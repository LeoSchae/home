<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Farey Fractions</title><meta name="description" content="Interactively view Farey fractions on a number line."><style>body,html{width:100%;height:100%}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}details{display:block}summary{display:list-item}html{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,::after,::before{-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit}</style><link rel="stylesheet" href="/home/katex/katex.min.css"></head><body><style>:root{--sidebar-bg:black;--sidebar-fg:white;--sidebar-top-height:50px}body{display:grid;grid-template-columns:350px 1fr;grid-template-rows:var(--sidebar-top-height) 1fr;box-sizing:border-box}.nav-top-bar{grid-column:1/3;grid-row:1;background-color:#ff000055}nav .katex{font-size:1em!important}.n-ul1{display:block;font-size:1.5rem;list-style:none;padding:0 .5em}.n-ul2{display:block;font-size:1.5rem;list-style:none;padding:0 .75em}.n-li1{margin:1em 0}main{position:relative;grid-column:1/3;grid-row:2;overflow:auto}.nav-sidebar{position:relative;grid-column:1;background-color:var(--sidebar-bg);color:var(--sidebar-fg);font-size:1.25rem;transform:translateX(-100%);transition:transform 150ms ease-in-out;z-index:999}.nav-home-top{grid-row:1;grid-column:1;padding-left:var(--sidebar-top-height);display:flex;align-items:center}.nav-home-top a{font-size:1.5rem;border-bottom:1px dotted #fff;text-decoration:underline dotted;color:currentColor}.nav-home-top a:hover{font-size:1.5rem;text-decoration:underline}#nav-sidebar{overflow:auto}.nav-sidebar a{color:currentColor;text-decoration:none;border-bottom:1px dotted #fff}.nav-sidebar a:hover{border-bottom-style:solid}.nav-list-1,.nav-list-2{list-style:none;display:flex;flex-direction:column;gap:.25em;align-items:center;padding:0}.nav-list-1{gap:1.5em;margin:1em}.nav-item-1,.nav-item-2{display:flex;flex-direction:column;align-items:center}.nav-item-1>span::after,.nav-item-1>span::before{content:" - "}.nav-item-1>span{margin-bottom:.5em}#nav-sidebar-checkbox{position:absolute;transform:translateX(-100%)}#nav-sidebar-checkbox:checked~.nav-sidebar{transform:translateX(0)}#nav-sidebar-checkbox-label{position:absolute;display:block;cursor:pointer;padding:10px;right:0;height:100%;width:var(--sidebar-top-height);color:#000;transform:translateX(100%)}#nav-sidebar-checkbox-label:hover{background-color:#55555577}#nav-sidebar-checkbox:checked~.nav-sidebar #nav-sidebar-checkbox-label{color:var(--sidebar-fg);transform:translateX(0)}@media (min-width:1200px){.nav-home-top{display:none}.nav-sidebar{transform:translateX(0)}#nav-sidebar-checkbox-label{display:none}main{grid-column:2}}</style><input id="nav-sidebar-checkbox" type="checkbox" aria-label="Toggle sidebar"><aside class="nav-sidebar" style="grid-row:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-bottom:1px solid #fff"><a href="/home/">Leo's Website</a> <label for="nav-sidebar-checkbox" id="nav-sidebar-checkbox-label"><svg viewBox="0 0 10 10" style="width:100%;height:100%"><path d="M0,2 10,2M0,5 10,5M0,8 10,8" stroke="currentColor" stroke-width="1"/></svg></label></aside><aside id="nav-sidebar" class="nav-sidebar" style="grid-row:2"><nav class="nav-list-container"><ul class="nav-list-1"><li class="nav-item-1"><span tabindex="0">Web Apps</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/FareyFractions/">Farey Fractions</a></li><li class="nav-item-2"><a href="/home/projects/FordCircles/">Ford Circles</a></li><li class="nav-item-2"><a href="/home/projects/Hyperbola/">Hyperbolamethod</a></li><li class="nav-item-2"><a href="/home/projects/Subgroups/">Subgroups</a></li><li class="nav-item-2"><a href="/home/projects/SubgroupsTest/">Congruence Subgroups</a></li><li class="nav-item-2"><a href="/home/projects/PointsInP2/">Points in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">P</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi mathvariant="double-struck">Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{P}^2(\mathbb{Q})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathbb">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbb">Q</span><span class="mclose">)</span></span></span></span></a></li></ul></li><li class="nav-item-1"><a href="/home/projects/">All Projects</a></li><li class="nav-item-1"><span tabindex="0">Tiny Projects</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/textTest/">SVG Test</a></li></ul></li></ul></nav></aside><div class="nav-home-top"><a href="/home/">Leo Sch√§fer</a></div><main id="content-root"><style>.content-fullscreen{position:absolute;top:0;left:0;width:100%;height:100%}.content-text{max-width:min(750px,90%);margin-left:auto;margin-right:auto}</style><div class="content content-fullscreen"><script>(()=>{var l=Math.pow,t=(t,a,o)=>new Promise((e,i)=>{var n=t=>{try{s(o.next(t))}catch(t){i(t)}},r=t=>{try{s(o.throw(t))}catch(t){i(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);s((o=o.apply(t,a)).next())});function n(r,s,a,o){return t(this,null,function*(){var t;let e=(o=null==o?h:o).create(),i=(null!=(t=e.begin)&&t.call(e),s.apply(r,a)),n=i.next();for(;!n.done;)e.shouldYield()&&(yield e.yield()),n=i.next();return null!=(t=e.done)&&t.call(e),n.value})}function i(t,e,i){let n=e.apply(t,i),r=n.next();for(;!r.done;)r=n.next();return r.value}var r,s,h={create:()=>({shouldYield(){return!1},yield(){return t(this,null,function*(){})}})};function a(t){let e=t[t.length-1],i;return"create"in e&&(t=Array.prototype.slice.call(t,0,t.length-1),i=e),[i,t]}(e=r=r||{}).async=function(i){return function(...t){var[t,e]=a(t);return n(this,this[i],e,t)}},e.sync=function(e){return function(...t){return i(this,this[e],t)}},(e=s=s||{}).Infinity="infinity",e.Complex="complex",e.Moebius="moebius";var o={mathtype:s.Infinity};(class{[Symbol.iterator](){}});var E=class{constructor(t,e=0){this.mathtype=s.Complex,this.real=t,this.imag=e}abs2(){return this.real*this.real+this.imag*this.imag}abs(){return Math.sqrt(this.abs2())}add(t){return"number"==typeof t?new E(this.real+t,this.imag):new E(this.real+t.real,this.imag+t.imag)}sub(t){return"number"==typeof t?new E(this.real-t,this.imag):new E(this.real-t.real,this.imag-t.imag)}mul(t){return"number"==typeof t?new E(t*this.real,t*this.imag):new E(this.real*t.real-this.imag*t.imag,this.imag*t.real+this.real*t.imag)}div(t){return"number"==typeof t?new E(this.real/t,this.imag/t):this.mul(t.inv())}inv(){var t=this.abs2();return new E(this.real/t,-this.imag/t)}arg(){var t,e=this.real,i=this.imag;return 0==e?0<i?.5*Math.PI:i<0?1.5*Math.PI:0:0<=e?(t=Math.atan(+i/e))<0?2*Math.PI+t:t:Math.atan(+i/e)+Math.PI}toTeX(){return 0==this.imag?""+this.real:0==this.real?this.imag+"i":`${this.real} + ${this.imag}i`}},c=class{constructor(t,e,i,n){this.mathtype=s.Moebius,this.m=[t,e,i,n]}mul(t){var e=this.m,t=t.m;return new c(e[0]*t[0]+e[1]*t[2],e[0]*t[1]+e[1]*t[3],e[2]*t[0]+e[3]*t[2],e[2]*t[1]+e[3]*t[3])}inv(){var t=this.m;return new c(t[3],-t[1],-t[2],t[0])}transform(t,e){if("number"==typeof t)e=e,t="number"==typeof(i=t)?new E(i,e):Array.isArray(i)?new E(i[0],i[1]):i;else if(t.mathtype===s.Infinity)return 0==this.m[2]?o:new E(this.m[0]/this.m[2]);var e=this.m,i=t.mul(e[2]).add(e[3]);return 0==i.real&&0==i.imag?o:t.mul(e[0]).add(e[1]).div(i)}toTeX(){return`\\begin{pmatrix}${this.m[0]}&${this.m[1]}\\\\ ${this.m[2]}&${this.m[3]}\\end{pmatrix}`}};{var u={};class x{constructor(t,e){this.cosetRepresentatives=r.sync("_cosetRepresentatives"),this.cosetRepresentativesAsync=r.async("_cosetRepresentatives"),this.indicator=t,this.tex=e}findCosetIndex(t,e,i){let n=i.inv(),r=this.indicator;for(var s=0;s<e.length;s++)if(r(t,e[s].mul(n)))return s;return-1}findCoset(e,t,i){let n=i.inv(),r=this.indicator;return t.find(t=>r(e,t.mul(n)))}*_cosetRepresentatives(t){if(!Number.isInteger(t)||t<=0)throw"Invalid Level";let e=[new c(0,-1,1,0),new c(1,1,0,1),new c(1,-1,0,1)],i=[new c(1,0,0,1)];for(var n,r=[],s=[new c(1,0,0,1)];0<s.length;){n=r,r=s,s=[];for(var a of r)for(var o of e){yield;o=a.mul(o);-1==this.findCosetIndex(t,n,o)&&-1==this.findCosetIndex(t,s,o)&&-1==this.findCosetIndex(t,r,o)&&(i.push(o),s.push(o))}}return i}toTeX(){return this.tex}}function d(t,e,i){return(t-e)%i==0}u.CongruenceSubgroup=x,u.Gamma_0=new x(function(t,e){return d(e.m[2],0,t)},"\\Gamma_0"),u.Gamma_1=new x(function(t,e){return d(e.m[2],0,t)&&(d(e.m[0],1,t)||d(e.m[0],-1,t))},"\\Gamma_1"),u.Gamma=new x(function(t,e){return d(e.m[2],0,t)&&d(e.m[1],0,t)&&(d(e.m[0],1,t)||d(e.m[0],-1,t))},"\\Gamma"),u.Gamma.cosetRepresentatives=function(e){let i=u.Gamma_1.cosetRepresentatives(e),n=[];for(let t=0;t<e;t++){let e=new c(1,t,0,1);n.push(...i.map(t=>e.mul(t)))}return n},u.Gamma._cosetRepresentatives=function*(e){let i=yield*u.Gamma_1._cosetRepresentatives(e),n=[];for(let t=0;t<e;t++){yield;let e=new c(1,t,0,1);n.push(...i.map(t=>e.mul(t)))}return n};var e=new E(Math.cos(Math.PI/3),Math.sin(Math.PI/3));u.Domain1={corners:[o,e,new E(0,1),new E(-e.real,e.imag)],findCosetOf(i,n=100){if(!(i.imag<=0)){let t=new c(1,0,0,1),e=i;for(var r=0;r<n;r++){if(e==o)return t.inv();var s=Math.floor(e.real+.5);if(t=new c(1,-s,0,1).mul(t),1<=(e=t.transform(i)).abs2())return t.inv();t=new c(0,1,-1,0).mul(t),e=t.transform(i)}console.log("Max iterations in 'findMoebiousToFund' reached")}}}}var f=2*Math.PI,p=.5/Math.PI,H=class{constructor(t,e,i){this._lineWidth=1,this._fontSize=13,this._fillColor="#000000",this._strokeColor="#000000",this.fontAscent=-1,this.fontDescent=-1,this._ctx=t,this.width=void 0===e?t.canvas.width:e,this.height=void 0===i?t.canvas.height:i,this.fontSize=13}get lineWidth(){return this._lineWidth}set lineWidth(t){this._ctx.lineWidth=t,this._lineWidth=t}get fontSize(){return this._fontSize}set fontSize(t){this._ctx.textBaseline="alphabetic",this._ctx.font=t+"px Times New Roman",this._fontSize=t;t=this._ctx.measureText("1ATOgjp");this.fontAscent=t.fontBoundingBoxAscent||t.actualBoundingBoxAscent,this.fontDescent=t.fontBoundingBoxDescent||t.actualBoundingBoxDescent}get fillStyle(){return this._fillColor}set fillStyle(t){this._ctx.fillStyle=t,this._fillColor=t}get strokeStyle(){return this._strokeColor}set strokeStyle(t){this._ctx.strokeStyle=t,this._strokeColor=t}set(t){for(var[e,i]of Object.entries(t))switch(e){case"fontSize":this.fontSize=i;break;case"lineWidth":this.lineWidth=i;break;case"fill":this.fillStyle=i;break;case"stroke":this.strokeStyle=i;break;default:console.warn(`Unknown option key '${e}'`)}return this}measureText(t){this._ctx.textAlign="center";var t=this._ctx.measureText(t),e=(this.fontAscent+this.fontDescent)/2;return{top:1.3*e,bot:e,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight}}drawText(t,e,i,n){let r="middle",s="center";switch(12&n){case D.T:r="top";break;case D.B:r="bottom"}switch(3&n){case D.L:s="left";break;case D.R:s="right"}return this._ctx.textBaseline=r,this._ctx.textAlign=s,this._ctx.fillText(t,e,i),this}begin(){return this._ctx.beginPath(),this}move(t,e){return this._ctx.moveTo(t,e),this}line(t,e){return this._ctx.lineTo(t,e),this}quadratic(t,e,i,n){return this._ctx.quadraticCurveTo(t,e,i,n),this}cubic(t,e,i,n,r,s){return this._ctx.bezierCurveTo(t,e,i,n,r,s),this}close(){return this._ctx.closePath(),this}rect(t,e,i,n){return this._ctx.rect(t,e,i,n),this}arc(t,e,i,n,r,s){return n-=f*Math.floor(p*n),r-=f*Math.floor(p*r),this._ctx.arc(t,e,i,-n,-r,!s),this}stroke(){return this._ctx.stroke(),this}fill(){return this._ctx.fill(),this}fillAndStroke(){return this.fill(),this.stroke(),this}};Math.PI,Math.PI,Math.PI;(e=D=D||{})[e.C=0]="C",e[e.T=8]="T",e[e.L=2]="L",e[e.R=1]="R",e[e.B=4]="B",e[e.TL=10]="TL",e[e.TR=9]="TR",e[e.BL=6]="BL",e[e.BR=5]="BR";var D,m=class{constructor(t,e){this.origin=t,this.scale=e}project(t){return[(t=Array.isArray(t)?new E(t[0],t[1]):t).real*this.scale+this.origin[0],-t.imag*this.scale+this.origin[1]]}invert(t){return new E((t[0]-this.origin[0])/this.scale,-(t[1]-this.origin[1])/this.scale)}addTranslation(t){this.origin=[this.origin[0]+t[0],this.origin[1]+t[1]]}addZoom(t,e){var[i,n]=this.origin;this.origin=[i*t+e[0]*(1-t),n*t+e[1]*(1-t)],this.scale*=t}};function G(t,e,i,n,r,{arrowSize:s=9}={}){var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=[0===(r=[r[0]/a,r[1]/a])[0]?-1/0:(0-n[0])/r[0],0===r[0]?1/0:(e-n[0])/r[0],0===r[1]?-1/0:(0-n[1])/r[1],0===r[1]?1/0:(i-n[1])/r[1]].sort((t,e)=>t-e),e=[n[0]+a[1]*r[0],n[1]+a[1]*r[1]],i=[n[0]+(a[2]-1)*r[0],n[1]+(a[2]-1)*r[1]],n=(t.begin(),t.move(e[0],e[1]),t.line(i[0]-2*r[0],i[1]-2*r[1]),t.stroke(),s);return t.begin(),t.move(i[0],i[1]),t.line(i[0]-n*r[0]+.5*n*r[1],i[1]-n*r[1]-.5*n*r[0]),t.line(i[0]-n*r[0]-.5*n*r[1],i[1]-n*r[1]+.5*n*r[0]),t.line(i[0],i[1]),t.fill(),[e[0],e[1],i[0],i[1]]}function W(t,e,i){let{center:n=!1}=i||{},{top:r,bot:s,left:a,right:o}=t.measureText(e),l=0;return n&&(l=(o-a)/2,a+=l,o-=l),{text:e,dx:l,top:r,bot:s,left:a,right:o,draw:function(t,e,i){t.drawText(this.text,e-this.dx,i,0)}}}var v=class{constructor(t,e,i){this.onDrag=t,this.onZoom=e,this.onHover=i,this.state=new Array,this.down=r=>{if("mouse"!=r.pointerType||0==r.button){let{pointerId:e,offsetX:t,offsetY:i}=r,n=this.state.find(({id:t})=>t===e);void 0===n&&(n={id:e,x:t,y:i},this.state.push(n)),this.state.length<=1?this.onHover([t,i]):this.onHover(null),r.currentTarget.setPointerCapture(e)}},this.move=e=>{let{pointerId:i,offsetX:n,offsetY:r}=e;if(0===this.state.length)this.onHover([n,r]);else{var s,a,o,e=this.state.findIndex(({id:t})=>t===i);if(-1!==e){let t=this.state[e];1===this.state.length?(this.onHover([n,r]),this.onDrag([n-t.x,r-t.y])):2===this.state.length&&(o=t,e=this.state[1-e],s=l(o.x-e.x,2)+l(o.y-e.y,2),a=l(n-e.x,2)+l(r-e.y,2),o=[.5*(n-o.x),.5*(r-o.y)],this.onHover(null),this.onDrag(o),this.onZoom(a/s,[.5*(n+e.x),.5*(r+e.y)])),t.x=n,t.y=r}}},this.up=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.cancel=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.leave=i=>{if("mouse"==i.pointerType&&0===this.state.length&&this.onHover(null),!("mouse"==i.pointerType&&0!=i.button||i.currentTarget.hasPointerCapture(i.pointerId))){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.wheel=t=>{t.preventDefault(),this.onZoom(Math.exp(-t.deltaY*(1==t.deltaMode?.03333:.001)),[t.offsetX,t.offsetY])}}registerListeners(t){t.addEventListener("pointerup",this.up),t.addEventListener("pointerdown",this.down),t.addEventListener("pointermove",this.move),t.addEventListener("pointercancel",this.cancel),t.addEventListener("pointerleave",this.leave),t.addEventListener("wheel",this.wheel)}removeListeres(t){t.removeEventListener("pointerup",this.up),t.removeEventListener("pointerdown",this.down),t.removeEventListener("pointermove",this.move),t.removeEventListener("pointercancel",this.cancel),t.removeEventListener("wheel",this.wheel)}};function g(t,e=[],i={},n={}){let r=document.createElement(t);for(var[s,a]of Object.entries(i))r.setAttribute(s,"string"==typeof a?a:a+"");for(var[o,l]of Object.entries(n))r[o]=l;if(Array.isArray(e))for(var h of e)"string"==typeof h&&(h=document.createTextNode(h)),r.append(h);else r.innerHTML=e.__html;return r}var w={css:`:host{position:relative;top:0;left:0;display:block;width:100%;height:100%;overflow:hidden;padding:0;margin:0}._container_1kdby_13{display:block;position:absolute;width:100%;height:100%;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._container_1kdby_13>div,._container_1kdby_13>canvas{position:absolute;top:0;left:0;width:100%;height:100%}
`,class:{container:"_container_1kdby_13"}};var y,e=class extends HTMLElement{constructor(){super(...arguments),this.shadow=this.attachShadow({mode:"open"}),this.cleanup=[]}connectedCallback(){var t,e;let i=this.shadow,n=(i.innerHTML="",g("style",[w.css])),a=g("div",[],{class:w.class.container}),s=new ResizeObserver(()=>{var t,e,i,n,r;null!=(e=(t=this.layerHandler).resized)&&e.call(t,h);for(r of o.values())null!=(n=null==(i=r.layer)?void 0:i.resized)&&n.call(i,h,r.nodes)}),o=(s.observe(a),i.append(n,a),new Map),r=0,l=()=>{var t,e,i,n=2===r;r=0;for(i of o.values())(n||i.update)&&null!=(e=null==(t=i.layer)?void 0:t.update)&&e.call(t,h,i.nodes),i.update=!1},h={get width(){return a.clientWidth},get height(){return a.clientHeight},containerElement:a,hostElement:this,update:function(e){if(2!==r)if(0===r&&requestAnimationFrame(l),void 0===e)r=2;else if("string"==typeof e){r=1;let t=o.get(e);void(t&&(t.update=!0))}else for(var t of o.values())e===t.layer&&(t.update=!0)},addStyles:function(t){n.append(t)},addLayer:function(n,r){if(!(r instanceof Node)){let t,e;t="function"==typeof r?void(e=r(h)):(e=r.connected(h),r);var s=e.nodes;s&&(Array.isArray(s)?a.append(...s):a.append(s)),o.set(n,{nodes:s,layer:t,update:!1}),h.update(n);let i=e.handle;return(i=i||{}).update=()=>{this.update(n)},i}a.appendChild(r)},attachToShaddow(...t){i.append(...t)}};null!=(e=(t=this.layerHandler).connected)&&e.call(t,h),this.cleanup.push(()=>{var t,e,i,n,r;s.unobserve(a);for(r of o.values())null!=(e=null==(t=r.layer)?void 0:t.disconnected)&&e.call(t,h);null!=(n=(i=this.layerHandler).disconnected)&&n.call(i,h)})}disconnectedCallback(){for(var t of this.cleanup)t();this.cleanup=[],this.shadow.innerHTML=""}};window.customElements.define("farey-fractions",(y={connected(B){let P=new m([100,100],100);var r;new v(t=>{P.addTranslation(t),B.update()},(t,e)=>{var i=P.project(new E(0)),n=P.project(new E(1)),i=Math.abs(i[0]-n[0]);t<=.25*B.width/i&&(t=.25*B.width/i),P.addZoom(t,e),B.update()},()=>{}).registerListeners(B.containerElement),B.addLayer("draw",(r={update(s,a){{let t=P.project(new E(0)),e=P.project(new E(1)),i=Math.abs(t[0]-e[0]),n=!1,{width:r,height:s}=B;t[1]<s/6?(P.addTranslation([0,-t[1]+s/6]),n=!0):t[1]>5*s/6&&(P.addTranslation([0,-t[1]+5*s/6]),n=!0),e[0]<.5*r&&(P.addTranslation([-e[0]+.5*r,0]),n=!0),t[0]>.5*r&&(P.addTranslation([-t[0]+.5*r,0]),n=!0),i<.25*r&&(P.addZoom(.25*r/i,[r/2,s/2]),n=!0),n&&B.update()}let o=new H(a);a.clearRect(0,0,s.width,s.height),a.lineWidth=1.25;{var[s,a,{noX:l=!1,noY:h=!1,arrowSize:c=7,fontSize:u=13,labelX:d="Re",labelY:f="Im"}={}]=[o,P],{origin:a,scale:p}=a,{width:m,height:v}=s;s.set({fontSize:u});let t=function(t,e=0){var{ps:i,ox:n,oy:r}=this;return[t*i+n,-e*i+r]}.bind({ox:a[0],oy:a[1],ps:p}),e=t(1),i=t(0,1),n=[e[0]-a[0],e[1]-a[1]],r=[i[0]-a[0],i[1]-a[1]];l||([,,p,l]=G(s,m,v,a,n,{arrowSize:c}),d&&s.drawText(d,p-.2*u,l+.2*u+c/2,D.TR)),h||([,,d,p]=G(s,m,v,a,r,{arrowSize:c}),!h&&f&&s.drawText(f,d-.2*u-c/2,p+.2*u,D.TR))}var t;o.set({fontSize:10});let e=function(t,e){let i=0,n=1,r=0;for(;;)if(t/((i+n)*(i+n-1))<.75*(1+Math.log10(i+n))*e){if(0==r)return i;i+=r,n=1,r=0}else n=2*(r=n)}(P.scale,10),i=Math.max(-P.origin[0]/P.scale,1e-11),n=Math.min((o.width-P.origin[0])/P.scale,.99999999999),[r,g,w,y]=function(n,r){let t=Math.floor(r),s=(r-=t,0),a=1,o=1,l=1;for(;;){let t=o-r*l,e;(void 0===(e=0!=t?Math.floor((r*a-s)/t):e)||a+e*l>n)&&(e=Math.floor((n-a)/l)),s+=e*o,a+=e*l,t=a*r-s;let i;if((void 0===(i=0!=t?Math.floor((o-r*l)/t):i)||a*i+l>n)&&(i=Math.floor((n-l)/a)),o=s*i+o,l=a*i+l,0==e&&0==i)break}return[s,a,o,l]}(e,i),x=function(t,e,i,n){let r=[],[s,a,o,l]=e;for(;o<n*l;){var h=Math.floor((i+a)/l);[s,a,o,l]=[o,l,h*o-s,h*l-a],r.push({sprite:function(l,h){var t=.05*(l.top+l.bot+h.top+h.bot),e=.5*(l.left-l.right),i=.5*(h.left-h.right),n=-l.bot-t,t=h.top+t,r=Math.max(.5*(l.left+l.right),.5*(h.left+h.right));return{data:[e,n,i,t,r],top:-n+l.top,bot:t+h.bot,left:r,right:r,draw:function(t,e,i){var[n,r,s,a,o]=this.data;l.draw(t,e+n,i+r),h.draw(t,e+s,i+a),t.begin(),t.move(e-o,i),t.line(e+o,i),t.stroke()}}}(W(t,""+s),W(t,""+a)),at:s/a})}return r}(o,[r,g,w,y],e,n);x.push({sprite:W(o,"1",{center:!0}),at:1});for(t of x);var[b,l,{origin:m,scale:_},T,{gap:M=5}={}]=[o,"x",P,x],k=b.width||0;if(b.height,"x"==l){var I,S,L,C,R=m[0],A=m[1];for(let n=0;n<T.length;n++){let{at:t,sprite:e}=T[n],i=t*_+R;0<=i+e.right&&i-e.left<=k&&(S=i-.5,L=i+.5,C=(I=A)+3,b.begin().move(S,I).line(L,I).line(L,C).line(S,C).close(),b.fill(),e.draw(b,i,A+e.top+M))}}let z=W(o,"Fractions with denominator up to "+e);o.begin(),o.rect(0,o.height,z.left+z.right+20,-Math.round(z.bot+z.top+10)),o.fillStyle="#FFFFFF",o.fill(),o.stroke(),o.fillStyle="#000000",z.draw(o,z.left+10,o.height-z.bot-5)}},{update(t,e){let i=e.getContext("2d"),n=window.devicePixelRatio;Math.floor(t.width*n)===e.width&&Math.floor(t.height*n)===e.height||(e.width=Math.floor(t.width*n),e.height=Math.floor(t.height*n)),i.setTransform(n,0,0,n,0,0),r.update(t,i)},resized(t){t.update(this)},connected(t){return{nodes:g("canvas",[],{class:"canvas-layer"})}}}))}},class extends e{constructor(){super(...arguments),this.layerHandler=y}}))})()</script><farey-fractions><div style="display:grid;justify-items:center;align-items:center;width:100%;height:100%"><h2>Javascript required!</h2></div></farey-fractions></div></main></body></html>