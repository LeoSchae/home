<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Farey Fractions</title><meta name="description" content="Interactively view Farey fractions on a number line."><style>@font-face{font-family:LinuxLibertine;src:url(/home/fonts/LinLibertine_R.woff) format('woff'),url(/home/fonts/LinLibertine_R.ttf) format('truetype')}</style><link rel="preload" href="/home/fonts/LinLibertine_R.woff" as="font" type="font/woff"><style>body,html{width:100%;height:100%}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}details{display:block}summary{display:list-item}html{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,::after,::before{-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit}</style><link rel="stylesheet" href="/home/katex/katex.min.css"></head><body><style>:root{--sidebar-bg:black;--sidebar-fg:white;--sidebar-top-height:50px}body{display:grid;font-family:LinuxLibertine,'Times New Roman',Serif;grid-template-columns:350px 1fr;grid-template-rows:var(--sidebar-top-height) 1fr;box-sizing:border-box}.nav-top-bar{grid-column:1/3;grid-row:1;background-color:#ff000055}nav .katex{font-size:1em!important}.n-ul1{display:block;font-size:1.5rem;list-style:none;padding:0 .5em}.n-ul2{display:block;font-size:1.5rem;list-style:none;padding:0 .75em}.n-li1{margin:1em 0}main{position:relative;grid-column:1/3;grid-row:2;overflow:auto}.nav-sidebar{position:relative;grid-column:1;background-color:var(--sidebar-bg);color:var(--sidebar-fg);font-size:1.25rem;transform:translateX(-100%);transition:transform 150ms ease-in-out;z-index:999}.nav-home-top{grid-row:1;grid-column:1;padding-left:var(--sidebar-top-height);display:flex;align-items:center}.nav-home-top a{font-size:1.5rem;border-bottom:1px dotted #fff;text-decoration:underline dotted;color:currentColor}.nav-home-top a:hover{font-size:1.5rem;text-decoration:underline}#nav-sidebar{overflow:auto}.nav-sidebar a{color:currentColor;text-decoration:none;border-bottom:1px dotted #fff}.nav-sidebar a:hover{border-bottom-style:solid}.nav-list-1,.nav-list-2{list-style:none;display:flex;flex-direction:column;gap:.25em;align-items:center;padding:0}.nav-list-1{gap:1.5em;margin:1em}.nav-item-1,.nav-item-2{display:flex;flex-direction:column;align-items:center}.nav-item-1>span::after,.nav-item-1>span::before{content:" - "}.nav-item-1>span{margin-bottom:.5em}#nav-sidebar-checkbox{position:absolute;transform:translateX(-100%)}#nav-sidebar-checkbox:checked~.nav-sidebar{transform:translateX(0)}#nav-backdrop{top:0;left:0;width:100%;height:100%;z-index:998;transform:translateX(-100%);background-color:#000;opacity:.75;transition:transform .3s}#nav-sidebar-checkbox:checked~#nav-backdrop{transform:translateX(0)}#nav-sidebar-checkbox-label{position:absolute;display:block;cursor:pointer;padding:10px;right:0;height:100%;width:var(--sidebar-top-height);color:#000;transform:translateX(100%)}#nav-sidebar-checkbox-label:hover{background-color:#55555577}#nav-sidebar-checkbox:checked~.nav-sidebar #nav-sidebar-checkbox-label{color:var(--sidebar-fg);transform:translateX(0)}@media (min-width:1200px){#nav-backdrop{display:none}.nav-home-top{display:none}.nav-sidebar{transform:translateX(0)}#nav-sidebar-checkbox-label{display:none}main{grid-column:2}}</style><script>document.addEventListener("DOMContentLoaded",e=>{var d=document.getElementById("nav-backdrop"),n=document.getElementById("nav-sidebar-checkbox");n&&d?.addEventListener("click",()=>{n.checked=!1})})</script><input id="nav-sidebar-checkbox" type="checkbox" aria-label="Toggle sidebar"><div id="nav-backdrop" style="position:absolute"></div><aside class="nav-sidebar" style="grid-row:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-bottom:1px solid #fff"><a href="/home/">Leo's Website</a> <label for="nav-sidebar-checkbox" id="nav-sidebar-checkbox-label"><svg viewBox="0 0 10 10" style="width:100%;height:100%"><path d="M0,2 10,2M0,5 10,5M0,8 10,8" stroke="currentColor" stroke-width="1"/></svg></label></aside><aside id="nav-sidebar" class="nav-sidebar" style="grid-row:2"><nav class="nav-list-container"><ul class="nav-list-1"><li class="nav-item-1"><span tabindex="0">Web Apps</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/FareyFractions/">Farey Fractions</a></li><li class="nav-item-2"><a href="/home/projects/FordCircles/">Ford Circles</a></li><li class="nav-item-2"><a href="/home/projects/Hyperbola/">Hyperbolamethod</a></li><li class="nav-item-2"><a href="/home/projects/PointsInP2/">Points in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">P</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi mathvariant="double-struck">Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{P}^2(\mathbb{Q})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathbb">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbb">Q</span><span class="mclose">)</span></span></span></span></a></li><li class="nav-item-2"><a href="/home/projects/Subgroups/">Subgroups</a></li><li class="nav-item-2"><a href="/home/projects/SubgroupsTest/">Congruence Subgroups</a></li></ul></li><li class="nav-item-1"><a href="/home/projects/">All Projects</a></li><li class="nav-item-1"><span tabindex="0">Tiny Projects</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/textTest/">SVG Test</a></li></ul></li></ul></nav></aside><main id="content-root"><style>.content-fullscreen{position:absolute;top:0;left:0;width:100%;height:100%}.content-text{max-width:min(750px,90%);margin-left:auto;margin-right:auto}</style><div class="content content-fullscreen"><script>(()=>{var h=Math.pow,t=(t,a,o)=>new Promise((e,i)=>{var r=t=>{try{s(o.next(t))}catch(t){i(t)}},n=t=>{try{s(o.throw(t))}catch(t){i(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((o=o.apply(t,a)).next())});function r(n,s,a,o){return t(this,null,function*(){var t;let e=(o=null==o?l:o).create(),i=(null!=(t=e.begin)&&t.call(e),s.apply(n,a)),r=i.next();for(;!r.done;)e.shouldYield()&&(yield e.yield()),r=i.next();return null!=(t=e.done)&&t.call(e),r.value})}function i(t,e,i){let r=e.apply(t,i),n=r.next();for(;!n.done;)n=r.next();return n.value}var n,s,l={create:()=>({shouldYield(){return!1},yield(){return t(this,null,function*(){})}})};function a(t){let e=t[t.length-1],i;return"create"in e&&(t=Array.prototype.slice.call(t,0,t.length-1),i=e),[i,t]}(e=n=n||{}).async=function(i){return function(...t){var[t,e]=a(t);return r(this,this[i],e,t)}},e.sync=function(e){return function(...t){return i(this,this[e],t)}},(e=s=s||{}).Infinity="infinity",e.Complex="complex",e.Moebius="moebius";var o={mathtype:s.Infinity};(class{[Symbol.iterator](){}});var H,N=class{constructor(t,e=0){this.mathtype=s.Complex,this.real=t,this.imag=e}abs2(){return this.real*this.real+this.imag*this.imag}abs(){return Math.sqrt(this.abs2())}add(t){return"number"==typeof t?new N(this.real+t,this.imag):new N(this.real+t.real,this.imag+t.imag)}sub(t){return"number"==typeof t?new N(this.real-t,this.imag):new N(this.real-t.real,this.imag-t.imag)}mul(t){return"number"==typeof t?new N(t*this.real,t*this.imag):new N(this.real*t.real-this.imag*t.imag,this.imag*t.real+this.real*t.imag)}div(t){return"number"==typeof t?new N(this.real/t,this.imag/t):this.mul(t.inv())}inv(){var t=this.abs2();return new N(this.real/t,-this.imag/t)}arg(){var t,e=this.real,i=this.imag;return 0==e?0<i?.5*Math.PI:i<0?1.5*Math.PI:0:0<=e?(t=Math.atan(+i/e))<0?2*Math.PI+t:t:Math.atan(+i/e)+Math.PI}toTeX(){return 0==this.imag?""+this.real:0==this.real?this.imag+"i":`${this.real} + ${this.imag}i`}},c=class{constructor(t,e,i,r){this.mathtype=s.Moebius,this.m=[t,e,i,r]}mul(t){var e=this.m,t=t.m;return new c(e[0]*t[0]+e[1]*t[2],e[0]*t[1]+e[1]*t[3],e[2]*t[0]+e[3]*t[2],e[2]*t[1]+e[3]*t[3])}inv(){var t=this.m;return new c(t[3],-t[1],-t[2],t[0])}transform(t,e){if("number"==typeof t)e=e,t="number"==typeof(i=t)?new N(i,e):Array.isArray(i)?new N(i[0],i[1]):i;else if(t.mathtype===s.Infinity)return 0==this.m[2]?o:new N(this.m[0]/this.m[2]);var e=this.m,i=t.mul(e[2]).add(e[3]);return 0==i.real&&0==i.imag?o:t.mul(e[0]).add(e[1]).div(i)}toTeX(){return`\\begin{pmatrix}${this.m[0]}&${this.m[1]}\\\\ ${this.m[2]}&${this.m[3]}\\end{pmatrix}`}};{var u={};class I{constructor(t,e){this.cosetRepresentatives=n.sync("_cosetRepresentatives"),this.cosetRepresentativesAsync=n.async("_cosetRepresentatives"),this.indicator=t,this.tex=e}findCosetIndex(t,e,i){let r=i.inv(),n=this.indicator;for(var s=0;s<e.length;s++)if(n(t,e[s].mul(r)))return s;return-1}findCoset(e,t,i){let r=i.inv(),n=this.indicator;return t.find(t=>n(e,t.mul(r)))}*_cosetRepresentatives(t){if(!Number.isInteger(t)||t<=0)throw"Invalid Level";let e=[new c(0,-1,1,0),new c(1,1,0,1),new c(1,-1,0,1)],i=[new c(1,0,0,1)];for(var r,n=[],s=[new c(1,0,0,1)];0<s.length;){r=n,n=s,s=[];for(var a of n)for(var o of e){yield;o=a.mul(o);-1==this.findCosetIndex(t,r,o)&&-1==this.findCosetIndex(t,s,o)&&-1==this.findCosetIndex(t,n,o)&&(i.push(o),s.push(o))}}return i}toTeX(){return this.tex}}function d(t,e,i){return(t-e)%i==0}u.CongruenceSubgroup=I,u.Gamma_0=new I(function(t,e){return d(e.m[2],0,t)},"\\Gamma_0"),u.Gamma_1=new I(function(t,e){return d(e.m[2],0,t)&&(d(e.m[0],1,t)||d(e.m[0],-1,t))},"\\Gamma_1"),u.Gamma=new I(function(t,e){return d(e.m[2],0,t)&&d(e.m[1],0,t)&&(d(e.m[0],1,t)||d(e.m[0],-1,t))},"\\Gamma"),u.Gamma.cosetRepresentatives=function(e){let i=u.Gamma_1.cosetRepresentatives(e),r=[];for(let t=0;t<e;t++){let e=new c(1,t,0,1);r.push(...i.map(t=>e.mul(t)))}return r},u.Gamma._cosetRepresentatives=function*(e){let i=yield*u.Gamma_1._cosetRepresentatives(e),r=[];for(let t=0;t<e;t++){yield;let e=new c(1,t,0,1);r.push(...i.map(t=>e.mul(t)))}return r};var e=new N(Math.cos(Math.PI/3),Math.sin(Math.PI/3));u.Domain1={corners:[o,e,new N(0,1),new N(-e.real,e.imag)],findCosetOf(i,r=100){if(!(i.imag<=0)){let t=new c(1,0,0,1),e=i;for(var n=0;n<r;n++){if(e==o)return t.inv();var s=Math.floor(e.real+.5);if(t=new c(1,-s,0,1).mul(t),1<=(e=t.transform(i)).abs2())return t.inv();t=new c(0,1,-1,0).mul(t),e=t.transform(i)}console.log("Max iterations in 'findMoebiousToFund' reached")}}}}function f(i){if(i){if("string"!=typeof i)return i;let t=parseInt("0x"+i.substring(1)),e;9===i.length&&(e=(255&t)/255,t>>=8);var i=255&t,r=255&t>>8,n=255&t>>16;return void 0===e?[n,r,i]:[n,r,i,e]}}function p(t){let e={};for(var[i,r]of Object.entries(t))if(void 0!==r)switch(i){case"fill":e.fill=f(r);break;case"stroke":e.stroke=f(r);break;case"lineWidth":e.lineWidth=r;break;case"fontSize":e.fontSize=r;break;default:console.log("Unknown style option '"+i+"'")}return e}function m(t){let e={_backend:t,clear(t){return this._backend.clear(f(t)),this},save(){return this._backend.save(),this},restore(){return this._backend.restore(),this},style(t){return this._backend.style(p(t)),this},path(){return new v(this._backend.path())},primitive(){var t,e;return new g(this,null==(e=(t=this._backend).primitive)?void 0:e.call(t))}};return"text"in t&&(e.text=function(){return this._backend.text()}),e}(e=H=H||{})[e.C=0]="C",e[e.T=8]="T",e[e.L=2]="L",e[e.R=1]="R",e[e.B=4]="B",e[e.TL=10]="TL",e[e.TR=9]="TR",e[e.BL=6]="BL",e[e.BR=5]="BR",(e=H=H||{}).vertical=function(t){return 12&t},e.horizontal=function(t){return 3&t};var v=class{constructor(t){this.backend=t,this.isSet=!1,this.sx=NaN,this.sy=NaN,this.cx=NaN,this.cy=NaN}_c(t,e){this.cx=t,this.cy=e}move(t,e){return this.isSet=!0,this.backend.move(t,e),this.sx=t,this.sy=e,this._c(t,e),this}line(t,e){return this.isSet?(this.backend.line(t,e),this._c(t,e),this):this.move(t,e)}cubic(t,e,i,r,n,s){return this.isSet||this.move(n,s),this.backend.cubic(t,e,i,r,n,s),this._c(n,s),this}quadratic(t,e,i,r){var n,s;return this.isSet||this.move(i,r),this.backend.quadratic?this.backend.quadratic(t,e,i,r):(n=this.cx,s=this.cy,this.backend.cubic(n+2/3*(t-n),s+2/3*(e-s),i+2/3*(t-i),r+2/3*(e-r),i,r)),this._c(i,r),this}ellipse(t,e,i,r,n,s,a){return this.line(..._(t,e,i,r,n,s)),this.backend.ellipse(t,e,i,r,n,s,a),this._c(..._(t,e,i,r,n,s+a)),this}arc(t,e,i,r,n){return this.backend.arc?(this.line(..._(t,e,i,i,0,r)),this.backend.arc(t,e,i,r,n),this):this.ellipse(t,e,i,i,0,r,n)}close(){if(this.isSet)return this.backend.close(),this._c(this.sx,this.sy),this;throw new Error("No path to close")}draw(t=!0,e=!0){return this.backend.draw(t,e),this}fill(){return this.draw(!1,!0)}stroke(){return this.draw(!0,!1)}clip(){return this.backend.clip(),this}};function w(i){return{draw:(t=!0,e=!0)=>i.draw(t,e),stroke:()=>i.draw(!0,!1),fill:()=>i.draw(!1,!0)}}var j,g=class{constructor(t,e){this.r=t,this.b=e}circle(t,e,i,r=0){var n;if(null!=(n=this.b)&&n.circle)return w(this.b.circle(t,e,i,r));var s=.5*i;switch(H.vertical(r)){case H.T:e-=s;break;case H.B:e+=s;break;case H.C:}switch(H.horizontal(r)){case H.L:t-=s;break;case H.R:t+=s;break;case H.C:}return this.r.path().arc(t,e,s,0,.999).close()}square(t,e,i,r=0){var n;if(null!=(n=this.b)&&n.square)return w(this.b.square(t,e,i,r));var s=.5*i;switch(H.vertical(r)){case H.T:e-=s;break;case H.B:e+=s;break;case H.C:}switch(H.horizontal(r)){case H.L:t-=s;break;case H.R:t+=s;break;case H.C:}return this.r.path().move(t-s,e-s).line(t+s,e-s).line(t+s,e+s).line(t-s,e+s).close()}},b=((e=j=j||{}).from=m,e.toBackendStyle=p,e.Color=f,2*Math.PI);function x(t){let e="#"+t[0].toString(16).padStart(2,"0")+t[1].toString(16).padStart(2,"0")+t[2].toString(16).padStart(2,"0");return t[3]&&(e+=Math.round(255*t[3]).toString(16).padStart(2,"0")),e}var y=class{constructor(t){this.ctx=t,this._path=new Path2D}move(t,e){return this._path.moveTo(t,e),this}line(t,e){return this._path.lineTo(t,e),this}cubic(t,e,i,r,n,s){return this._path.bezierCurveTo(t,e,i,r,n,s),this}ellipse(t,e,i,r,n,s,a){return this._path.ellipse(t,e,i,r,-(n*=b),-(s*=b),-s-(a*=b),0<=a),this}close(){return this._path.closePath(),this}draw(t,e){return e&&this.ctx.fill(this._path),t&&this.ctx.stroke(this._path),this}clip(){return this.ctx.clip(this._path),this}},k=class{constructor(t){this.ctx=t,this.fontSize=9}draw(t,e,i,r=H.C){let n="middle",s="center",a=H.vertical(r),o=H.horizontal(r);switch(a){case H.T:n="top";break;case H.B:n="bottom";break;case H.C:break;default:}switch(o){case H.L:s="left";break;case H.R:s="right";break;case H.C:break;default:}return this.ctx.textBaseline=n,this.ctx.textAlign=s,this.ctx.fillText(i,t,e),this}},q=class{constructor(t){this.ctx=t}clear(t){return this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),t&&(this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillStyle=x(t),this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()),this}save(){return this.ctx.save(),this}restore(){return this.ctx.restore(),this}style(t){let e;for(var[i,r]of Object.entries(t))switch(i){case"fill":e=r,this.ctx.fillStyle=x(e);break;case"stroke":e=r,this.ctx.strokeStyle=x(e);break;case"lineWidth":this.ctx.lineWidth=r;break;case"fontSize":this.ctx.font=r+"px 'LinuxLibertine', 'Times New Roman', Serif";break;default:console.warn("Style option '"+i+"' not implemented (Canvas backend)")}return this}path(){return new y(this.ctx)}text(){return new k(this.ctx)}};var T=2*Math.PI;function _(t,e,i,r,n,s){s*=T,n*=T;i*=Math.cos(s),r*=Math.sin(s),s=Math.cos(n),n=Math.sin(n);return[t+s*i-n*r,e-n*i-s*r]}var M=class{constructor(t,e){this.origin=t,this.scale=e}project(t){return[(t=Array.isArray(t)?new N(t[0],t[1]):t).real*this.scale+this.origin[0],-t.imag*this.scale+this.origin[1]]}invert(t){return new N((t[0]-this.origin[0])/this.scale,-(t[1]-this.origin[1])/this.scale)}addTranslation(t){this.origin=[this.origin[0]+t[0],this.origin[1]+t[1]]}addZoom(t,e){var[i,r]=this.origin;this.origin=[i*t+e[0]*(1-t),r*t+e[1]*(1-t)],this.scale*=t}};function G(t,e,i,r,n,{arrowSize:s=9}={}){var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=[0===(n=[n[0]/a,n[1]/a])[0]?-1/0:(0-r[0])/n[0],0===n[0]?1/0:(e-r[0])/n[0],0===n[1]?-1/0:(0-r[1])/n[1],0===n[1]?1/0:(i-r[1])/n[1]].sort((t,e)=>t-e),e=[r[0]+a[1]*n[0],r[1]+a[1]*n[1]],i=[r[0]+(a[2]-1)*n[0],r[1]+(a[2]-1)*n[1]],r=(t.path().move(e[0],e[1]).line(i[0]-2*n[0],i[1]-2*n[1]).stroke(),s);return t.path().move(i[0],i[1]).line(i[0]-r*n[0]+.5*r*n[1],i[1]-r*n[1]-.5*r*n[0]).line(i[0]-r*n[0]-.5*r*n[1],i[1]-r*n[1]+.5*r*n[0]).line(i[0],i[1]).fill(),[e[0],e[1],i[0],i[1]]}function D(t,e,i){let{center:r=!1}=i||{},{top:n,bot:s,left:a,right:o}=t.measureText(e),h=0;return r&&(h=(o-a)/2,a+=h,o-=h),{text:e,dx:h,top:n,bot:s,left:a,right:o,draw:function(t,e,i){t.text().draw(e-this.dx,i,this.text)}}}var R=class{constructor(t,e,i){this.onDrag=t,this.onZoom=e,this.onHover=i,this.state=new Array,this.down=n=>{if("mouse"!=n.pointerType||0==n.button){let{pointerId:e,offsetX:t,offsetY:i}=n,r=this.state.find(({id:t})=>t===e);void 0===r&&(r={id:e,x:t,y:i},this.state.push(r)),this.state.length<=1?this.onHover([t,i]):this.onHover(null),n.currentTarget.setPointerCapture(e)}},this.move=e=>{let{pointerId:i,offsetX:r,offsetY:n}=e;if(0===this.state.length)this.onHover([r,n]);else{var s,a,o,e=this.state.findIndex(({id:t})=>t===i);if(-1!==e){let t=this.state[e];1===this.state.length?(this.onHover([r,n]),this.onDrag([r-t.x,n-t.y])):2===this.state.length&&(o=t,e=this.state[1-e],s=h(o.x-e.x,2)+h(o.y-e.y,2),a=h(r-e.x,2)+h(n-e.y,2),o=[.5*(r-o.x),.5*(n-o.y)],this.onHover(null),this.onDrag(o),this.onZoom(a/s,[.5*(r+e.x),.5*(n+e.y)])),t.x=r,t.y=n}}},this.up=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.cancel=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.leave=i=>{if("mouse"==i.pointerType&&0===this.state.length&&this.onHover(null),!("mouse"==i.pointerType&&0!=i.button||i.currentTarget.hasPointerCapture(i.pointerId))){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.wheel=t=>{t.preventDefault(),this.onZoom(Math.exp(-t.deltaY*(1==t.deltaMode?.03333:.001)),[t.offsetX,t.offsetY])}}registerListeners(t){t.addEventListener("pointerup",this.up),t.addEventListener("pointerdown",this.down),t.addEventListener("pointermove",this.move),t.addEventListener("pointercancel",this.cancel),t.addEventListener("pointerleave",this.leave),t.addEventListener("wheel",this.wheel)}removeListeres(t){t.removeEventListener("pointerup",this.up),t.removeEventListener("pointerdown",this.down),t.removeEventListener("pointermove",this.move),t.removeEventListener("pointercancel",this.cancel),t.removeEventListener("wheel",this.wheel)}};function S(t,e=[],i={},r={}){let n=document.createElement(t);for(var[s,a]of Object.entries(i))n.setAttribute(s,"string"==typeof a?a:a+"");for(var[o,h]of Object.entries(r))n[o]=h;if(Array.isArray(e))for(var l of e)"string"==typeof l&&(l=document.createTextNode(l)),n.append(l);else n.innerHTML=e.__html;return n}var L={css:`:host{position:relative;top:0;left:0;display:block;width:100%;height:100%;overflow:hidden;padding:0;margin:0}._container_1kdby_13{display:block;position:absolute;width:100%;height:100%;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._container_1kdby_13>div,._container_1kdby_13>canvas{position:absolute;top:0;left:0;width:100%;height:100%}
`,class:{container:"_container_1kdby_13"}};var C,e=class extends HTMLElement{constructor(){super(...arguments),this.shadow=this.attachShadow({mode:"open"}),this.cleanup=[]}connectedCallback(){var t,e;let i=this.shadow,r=(i.innerHTML="",S("style",[L.css])),a=S("div",[],{class:L.class.container}),s=new ResizeObserver(()=>{var t,e,i,r,n;null!=(e=(t=this.layerHandler).resized)&&e.call(t,l);for(n of o.values())null!=(r=null==(i=n.layer)?void 0:i.resized)&&r.call(i,l,n.nodes)}),o=(s.observe(a),i.append(r,a),new Map),n=0,h=()=>{var t,e,i,r=2===n;n=0;for(i of o.values())(r||i.update)&&null!=(e=null==(t=i.layer)?void 0:t.update)&&e.call(t,l,i.nodes),i.update=!1},l={get width(){return a.clientWidth},get height(){return a.clientHeight},containerElement:a,hostElement:this,update:function(e){if(2!==n)if(0===n&&requestAnimationFrame(h),void 0===e)n=2;else if("string"==typeof e){n=1;let t=o.get(e);void(t&&(t.update=!0))}else for(var t of o.values())e===t.layer&&(t.update=!0)},addStyles:function(t){r.append(t)},addLayer:function(r,n){if(!(n instanceof Node)){let t,e;t="function"==typeof n?void(e=n(l)):(e=n.connected(l),n);var s=e.nodes;s&&(Array.isArray(s)?a.append(...s):a.append(s)),o.set(r,{nodes:s,layer:t,update:!1}),l.update(r);let i=e.handle;return(i=i||{}).update=()=>{this.update(r)},i}a.appendChild(n)},attachToShaddow(...t){i.append(...t)}};null!=(e=(t=this.layerHandler).connected)&&e.call(t,l),this.cleanup.push(()=>{var t,e,i,r,n;s.unobserve(a);for(n of o.values())null!=(e=null==(t=n.layer)?void 0:t.disconnected)&&e.call(t,l);null!=(r=(i=this.layerHandler).disconnected)&&r.call(i,l)})}disconnectedCallback(){for(var t of this.cleanup)t();this.cleanup=[],this.shadow.innerHTML=""}};window.customElements.define("farey-fractions",(C={connected(E){let A=new M([100,100],100);var n;new R(t=>{A.addTranslation(t),E.update()},(t,e)=>{var i=A.project(new N(0)),r=A.project(new N(1)),i=Math.abs(i[0]-r[0]);t<=.25*E.width/i&&(t=.25*E.width/i),A.addZoom(t,e),E.update()},()=>{}).registerListeners(E.containerElement),E.addLayer("draw",(n={update(s,a){{let t=A.project(new N(0)),e=A.project(new N(1)),i=Math.abs(t[0]-e[0]),r=!1,{width:n,height:s}=E;t[1]<s/6?(A.addTranslation([0,-t[1]+s/6]),r=!0):t[1]>5*s/6&&(A.addTranslation([0,-t[1]+5*s/6]),r=!0),e[0]<.5*n&&(A.addTranslation([-e[0]+.5*n,0]),r=!0),t[0]>.5*n&&(A.addTranslation([-t[0]+.5*n,0]),r=!0),i<.25*n&&(A.addZoom(.25*n/i,[n/2,s/2]),r=!0),r&&E.update()}let o=j.from(new q(a));a.clearRect(0,0,s.width,s.height),a.lineWidth=1.25;{a=o;var h,{position:{width:h,height:l},projection:{origin:c,scale:u},arrow:{size:d=7}={},fontSize:f=13,hideX:p=!1,hideY:m=!1,xLabel:v="Re",yLabel:w="Im"}=h={position:{width:s.width,height:s.height},projection:A};a.style({fontSize:f});let t=function(t,e=0){var{ps:i,ox:r,oy:n}=this;return[t*i+r,-e*i+n]}.bind({ox:c[0],oy:c[1],ps:u}),e=t(1),i=t(0,1),r=[e[0]-c[0],e[1]-c[1]],n=[i[0]-c[0],i[1]-c[1]];p||([,,u,p]=G(a,h,l,c,r,{arrowSize:d}),v&&a.text().draw(u-.2*f,p+.2*f+d/2,v,H.TR)),m||([,,u,p]=G(a,h,l,c,n,{arrowSize:d}),w&&a.text().draw(u-.2*f-d/2,p+.2*f,w,H.TR))}let t=function(){let e=document.createElement("canvas").getContext("2d"),i=(e.textBaseline="middle",e.textAlign="center",e.measureText("PQppqg")),r=i.actualBoundingBoxAscent,n=i.actualBoundingBoxDescent;return{set fontSize(t){e.font=t+"px 'LinuxLibertine', 'Times New Roman', Serif",i=e.measureText("PQppqg"),r=i.actualBoundingBoxAscent,n=i.actualBoundingBoxDescent},measureText(t){t=e.measureText(t);return{top:1.5*r,bot:n,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight}}}}(),e=(o.style({fontSize:10}),t.fontSize=10,function(t,e){let i=0,r=1,n=0;for(;;)if(t/((i+r)*(i+r-1))<.75*(1+Math.log10(i+r))*e){if(0==n)return i;i+=n,r=1,n=0}else r=2*(n=r)}(A.scale,10)),i=Math.max(-A.origin[0]/A.scale,1e-11),r=Math.min((s.width-A.origin[0])/A.scale,.99999999999),[n,g,b,x]=function(r,n){let t=Math.floor(n),s=(n-=t,0),a=1,o=1,h=1;for(;;){let t=o-n*h,e;(void 0===(e=0!=t?Math.floor((n*a-s)/t):e)||a+e*h>r)&&(e=Math.floor((r-a)/h)),s+=e*o,a+=e*h,t=a*n-s;let i;if((void 0===(i=0!=t?Math.floor((o-n*h)/t):i)||a*i+h>r)&&(i=Math.floor((r-h)/a)),o=s*i+o,h=a*i+h,0==e&&0==i)break}return[s,a,o,h]}(e,i),y=function(t,e,i,r){let n=[],[s,a,o,h]=e;for(;o<r*h;){var l=Math.floor((i+a)/h);[s,a,o,h]=[o,h,l*o-s,l*h-a],n.push({sprite:function(h,l){var t=.05*(h.top+h.bot+l.top+l.bot),e=.5*(h.left-h.right),i=.5*(l.left-l.right),r=-h.bot-t,t=l.top+t,n=Math.max(.5*(h.left+h.right),.5*(l.left+l.right));return{data:[e,r,i,t,n],top:-r+h.top,bot:t+l.bot,left:n,right:n,draw:function(t,e,i){var[r,n,s,a,o]=this.data;h.draw(t,e+r,i+n),l.draw(t,e+s,i+a),t.path().move(e-o,i).line(e+o,i).stroke()}}}(D(t,""+s),D(t,""+a)),at:s/a})}return n}(t,[n,g,b,x],e,r);y.push({sprite:D(t,"1",{center:!0}),at:1});for(var k of y);var[T,v,{origin:m,scale:_},M,{gap:S=5}={}]=[o,"x",A,y],L=T.width||1/0;if(T.height,"x"==v){var C,I,R,B,z=m[0],P=m[1];for(let r=0;r<M.length;r++){let{at:t,sprite:e}=M[r],i=t*_+z;0<=i+e.right&&i-e.left<=L&&(I=i-.5,R=i+.5,B=(C=P)+3,T.path().move(I,C).line(R,C).line(R,B).line(I,B).close().fill(),e.draw(T,i,P+e.top+S))}}}},{update(t,e){let i=e.getContext("2d"),r=window.devicePixelRatio;Math.floor(t.width*r)===e.width&&Math.floor(t.height*r)===e.height||(e.width=Math.floor(t.width*r),e.height=Math.floor(t.height*r)),i.setTransform(r,0,0,r,0,0),n.update(t,i)},resized(t){t.update(this)},connected(t){return{nodes:S("canvas",[],{class:"canvas-layer"})}}}))}},class extends e{constructor(){super(...arguments),this.layerHandler=C}}))})()</script><farey-fractions><div style="display:grid;justify-items:center;align-items:center;width:100%;height:100%"><h2>Javascript required!</h2></div></farey-fractions></div></main></body></html>