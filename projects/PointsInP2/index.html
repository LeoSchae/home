<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>P2 Points</title><meta name="description" content="...."><style>body,html{width:100%;height:100%}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}details{display:block}summary{display:list-item}html{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,::after,::before{-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit}</style><link rel="stylesheet" href="/home/katex/katex.min.css"></head><body><style>:root{--sidebar-bg:black;--sidebar-fg:white;--sidebar-top-height:50px}body{display:grid;grid-template-columns:350px 1fr;grid-template-rows:var(--sidebar-top-height) 1fr;box-sizing:border-box}.nav-top-bar{grid-column:1/3;grid-row:1;background-color:#ff000055}nav .katex{font-size:1em!important}.n-ul1{display:block;font-size:1.5rem;list-style:none;padding:0 .5em}.n-ul2{display:block;font-size:1.5rem;list-style:none;padding:0 .75em}.n-li1{margin:1em 0}main{position:relative;grid-column:1/3;grid-row:2;overflow:auto}.nav-sidebar{position:relative;grid-column:1;background-color:var(--sidebar-bg);color:var(--sidebar-fg);font-size:1.25rem;transform:translateX(-100%);transition:transform 150ms ease-in-out;z-index:999}.nav-home-top{grid-row:1;grid-column:1;padding-left:var(--sidebar-top-height);display:flex;align-items:center}.nav-home-top a{font-size:1.5rem;border-bottom:1px dotted #fff;text-decoration:underline dotted;color:currentColor}.nav-home-top a:hover{font-size:1.5rem;text-decoration:underline}#nav-sidebar{overflow:auto}.nav-sidebar a{color:currentColor;text-decoration:none;border-bottom:1px dotted #fff}.nav-sidebar a:hover{border-bottom-style:solid}.nav-list-1,.nav-list-2{list-style:none;display:flex;flex-direction:column;gap:.25em;align-items:center;padding:0}.nav-list-1{gap:1.5em;margin:1em}.nav-item-1,.nav-item-2{display:flex;flex-direction:column;align-items:center}.nav-item-1>span::after,.nav-item-1>span::before{content:" - "}.nav-item-1>span{margin-bottom:.5em}#nav-sidebar-checkbox{position:absolute;transform:translateX(-100%)}#nav-sidebar-checkbox:checked~.nav-sidebar{transform:translateX(0)}#nav-sidebar-checkbox-label{position:absolute;display:block;cursor:pointer;padding:10px;right:0;height:100%;width:var(--sidebar-top-height);color:#000;transform:translateX(100%)}#nav-sidebar-checkbox-label:hover{background-color:#55555577}#nav-sidebar-checkbox:checked~.nav-sidebar #nav-sidebar-checkbox-label{color:var(--sidebar-fg);transform:translateX(0)}@media (min-width:1200px){.nav-home-top{display:none}.nav-sidebar{transform:translateX(0)}#nav-sidebar-checkbox-label{display:none}main{grid-column:2}}</style><input id="nav-sidebar-checkbox" type="checkbox" aria-label="Toggle sidebar"><aside class="nav-sidebar" style="grid-row:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-bottom:1px solid #fff"><a href="/home/">Leo's Website</a> <label for="nav-sidebar-checkbox" id="nav-sidebar-checkbox-label"><svg viewBox="0 0 10 10" style="width:100%;height:100%"><path d="M0,2 10,2M0,5 10,5M0,8 10,8" stroke="currentColor" stroke-width="1"/></svg></label></aside><aside id="nav-sidebar" class="nav-sidebar" style="grid-row:2"><nav class="nav-list-container"><ul class="nav-list-1"><li class="nav-item-1"><span tabindex="0">Web Apps</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/FareyFractions/">Farey Fractions</a></li><li class="nav-item-2"><a href="/home/projects/FordCircles/">Ford Circles</a></li><li class="nav-item-2"><a href="/home/projects/Hyperbola/">Hyperbolamethod</a></li><li class="nav-item-2"><a href="/home/projects/Subgroups/">Subgroups</a></li><li class="nav-item-2"><a href="/home/projects/SubgroupsTest/">Congruence Subgroups</a></li><li class="nav-item-2"><a href="/home/projects/PointsInP2/">Points in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">P</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi mathvariant="double-struck">Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{P}^2(\mathbb{Q})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathbb">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbb">Q</span><span class="mclose">)</span></span></span></span></a></li></ul></li><li class="nav-item-1"><a href="/home/projects/">All Projects</a></li><li class="nav-item-1"><span tabindex="0">Tiny Projects</span><ul class="nav-list-2"><li class="nav-item-2"><a href="/home/projects/textTest/">SVG Test</a></li></ul></li></ul></nav></aside><div class="nav-home-top"><a href="/home/">Leo Sch√§fer</a></div><main id="content-root"><style>.content-fullscreen{position:absolute;top:0;left:0;width:100%;height:100%}.content-text{max-width:min(750px,90%);margin-left:auto;margin-right:auto}</style><div class="content content-fullscreen"><script>(()=>{var n=Object.defineProperty,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=Math.pow,o=(t,e,i)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,h=(t,e)=>{for(var i in e=e||{})s.call(e,i)&&o(t,i,e[i]);if(r)for(var i of r(e))a.call(e,i)&&o(t,i,e[i]);return t},i=(t,a,o)=>new Promise((e,i)=>{var n=t=>{try{s(o.next(t))}catch(t){i(t)}},r=t=>{try{s(o.throw(t))}catch(t){i(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);s((o=o.apply(t,a)).next())}),e=class{constructor(){this.map=new Map}getNew(n,r){return{create:()=>{let t=this.map,e;t.has(n)?e=t.get(n):(e=[],t.set(n,e));var i=new c(r);return e.push(i),i}}}abortAll(t){if(this.map.has(t)){var e;for(e of this.map.get(t))e.aborted=!0;this.map.delete(t)}}},c=class{constructor(t=16){this.I=-1,this.i=0,this.t=performance.now(),this.aborted=!1,this.d=t}begin(){this.t0=this.t=performance.now()}done(){if(this.aborted)throw console.debug("A task was aborted!"),"aborted";this.aborted=!0;var t=performance.now()-(this.t0||performance.now());1500<t&&console.debug("Long Task Took: "+Math.round(t)+"ms")}shouldYield(){return!(this.i++<this.I)&&(this.I=-1,performance.now()-this.t>=this.d)}yield(){return i(this,null,function*(){var t,e;if(this.t&&(t=performance.now()-this.t,this.I=Math.max(1,this.i*Math.min(this.d/(1+t),4))),e=0,yield new Promise(t=>setTimeout(t,e)),this.aborted)throw console.debug("A task was aborted!"),"aborted";this.i=0,this.t=performance.now()})}};function u(r,s,a,o){return i(this,null,function*(){var t;let e=(o=null==o?m:o).create(),i=(null!=(t=e.begin)&&t.call(e),s.apply(r,a)),n=i.next();for(;!n.done;)e.shouldYield()&&(yield e.yield()),n=i.next();return null!=(t=e.done)&&t.call(e),n.value})}function d(t,e,i){let n=e.apply(t,i),r=n.next();for(;!r.done;)r=n.next();return r.value}var t,p,f,m={create:()=>({shouldYield(){return!1},yield(){return i(this,null,function*(){})}})};function v(t){let e=t[t.length-1],i;return"create"in e&&(t=Array.prototype.slice.call(t,0,t.length-1),i=e),[i,t]}(_=t=t||{}).async=function(i){return function(...t){var[t,e]=v(t);return u(this,i,e,t)}},_.sync=function(e){return function(...t){return d(this,e,t)}},(_=p=p||{}).async=function(i){return function(...t){var[t,e]=v(t);return u(this,this[i],e,t)}},_.sync=function(e){return function(...t){return d(this,this[e],t)}},(_=f=f||{}).Infinity="infinity",_.Complex="complex",_.Moebius="moebius";var g={mathtype:f.Infinity};(class{[Symbol.iterator](){}});var y=class{constructor(t,e=0){this.mathtype=f.Complex,this.real=t,this.imag=e}abs2(){return this.real*this.real+this.imag*this.imag}abs(){return Math.sqrt(this.abs2())}add(t){return"number"==typeof t?new y(this.real+t,this.imag):new y(this.real+t.real,this.imag+t.imag)}sub(t){return"number"==typeof t?new y(this.real-t,this.imag):new y(this.real-t.real,this.imag-t.imag)}mul(t){return"number"==typeof t?new y(t*this.real,t*this.imag):new y(this.real*t.real-this.imag*t.imag,this.imag*t.real+this.real*t.imag)}div(t){return"number"==typeof t?new y(this.real/t,this.imag/t):this.mul(t.inv())}inv(){var t=this.abs2();return new y(this.real/t,-this.imag/t)}arg(){var t,e=this.real,i=this.imag;return 0==e?0<i?.5*Math.PI:i<0?1.5*Math.PI:0:0<=e?(t=Math.atan(+i/e))<0?2*Math.PI+t:t:Math.atan(+i/e)+Math.PI}toTeX(){return 0==this.imag?""+this.real:0==this.real?this.imag+"i":`${this.real} + ${this.imag}i`}},b=class{constructor(t,e,i,n){this.mathtype=f.Moebius,this.m=[t,e,i,n]}mul(t){var e=this.m,t=t.m;return new b(e[0]*t[0]+e[1]*t[2],e[0]*t[1]+e[1]*t[3],e[2]*t[0]+e[3]*t[2],e[2]*t[1]+e[3]*t[3])}inv(){var t=this.m;return new b(t[3],-t[1],-t[2],t[0])}transform(t,e){if("number"==typeof t)e=e,t="number"==typeof(i=t)?new y(i,e):Array.isArray(i)?new y(i[0],i[1]):i;else if(t.mathtype===f.Infinity)return 0==this.m[2]?g:new y(this.m[0]/this.m[2]);var e=this.m,i=t.mul(e[2]).add(e[3]);return 0==i.real&&0==i.imag?g:t.mul(e[0]).add(e[1]).div(i)}toTeX(){return`\\begin{pmatrix}${this.m[0]}&${this.m[1]}\\\\ ${this.m[2]}&${this.m[3]}\\end{pmatrix}`}};{var w={};class P{constructor(t,e){this.cosetRepresentatives=p.sync("_cosetRepresentatives"),this.cosetRepresentativesAsync=p.async("_cosetRepresentatives"),this.indicator=t,this.tex=e}findCosetIndex(t,e,i){let n=i.inv(),r=this.indicator;for(var s=0;s<e.length;s++)if(r(t,e[s].mul(n)))return s;return-1}findCoset(e,t,i){let n=i.inv(),r=this.indicator;return t.find(t=>r(e,t.mul(n)))}*_cosetRepresentatives(t){if(!Number.isInteger(t)||t<=0)throw"Invalid Level";let e=[new b(0,-1,1,0),new b(1,1,0,1),new b(1,-1,0,1)],i=[new b(1,0,0,1)];for(var n,r=[],s=[new b(1,0,0,1)];0<s.length;){n=r,r=s,s=[];for(var a of r)for(var o of e){yield;o=a.mul(o);-1==this.findCosetIndex(t,n,o)&&-1==this.findCosetIndex(t,s,o)&&-1==this.findCosetIndex(t,r,o)&&(i.push(o),s.push(o))}}return i}toTeX(){return this.tex}}function x(t,e,i){return(t-e)%i==0}w.CongruenceSubgroup=P,w.Gamma_0=new P(function(t,e){return x(e.m[2],0,t)},"\\Gamma_0"),w.Gamma_1=new P(function(t,e){return x(e.m[2],0,t)&&(x(e.m[0],1,t)||x(e.m[0],-1,t))},"\\Gamma_1"),w.Gamma=new P(function(t,e){return x(e.m[2],0,t)&&x(e.m[1],0,t)&&(x(e.m[0],1,t)||x(e.m[0],-1,t))},"\\Gamma"),w.Gamma.cosetRepresentatives=function(e){let i=w.Gamma_1.cosetRepresentatives(e),n=[];for(let t=0;t<e;t++){let e=new b(1,t,0,1);n.push(...i.map(t=>e.mul(t)))}return n},w.Gamma._cosetRepresentatives=function*(e){let i=yield*w.Gamma_1._cosetRepresentatives(e),n=[];for(let t=0;t<e;t++){yield;let e=new b(1,t,0,1);n.push(...i.map(t=>e.mul(t)))}return n};var _=new y(Math.cos(Math.PI/3),Math.sin(Math.PI/3));w.Domain1={corners:[g,_,new y(0,1),new y(-_.real,_.imag)],findCosetOf(i,n=100){if(!(i.imag<=0)){let t=new b(1,0,0,1),e=i;for(var r=0;r<n;r++){if(e==g)return t.inv();var s=Math.floor(e.real+.5);if(t=new b(1,-s,0,1).mul(t),1<=(e=t.transform(i)).abs2())return t.inv();t=new b(0,1,-1,0).mul(t),e=t.transform(i)}console.log("Max iterations in 'findMoebiousToFund' reached")}}}}var k=2*Math.PI,M=.5/Math.PI,$=class{constructor(t,e,i){this._lineWidth=1,this._fontSize=13,this._fillColor="#000000",this._strokeColor="#000000",this.fontAscent=-1,this.fontDescent=-1,this._ctx=t,this.width=void 0===e?t.canvas.width:e,this.height=void 0===i?t.canvas.height:i,this.fontSize=13}get lineWidth(){return this._lineWidth}set lineWidth(t){this._ctx.lineWidth=t,this._lineWidth=t}get fontSize(){return this._fontSize}set fontSize(t){this._ctx.textBaseline="alphabetic",this._ctx.font=t+"px Times New Roman",this._fontSize=t;t=this._ctx.measureText("1ATOgjp");this.fontAscent=t.fontBoundingBoxAscent||t.actualBoundingBoxAscent,this.fontDescent=t.fontBoundingBoxDescent||t.actualBoundingBoxDescent}get fillStyle(){return this._fillColor}set fillStyle(t){this._ctx.fillStyle=t,this._fillColor=t}get strokeStyle(){return this._strokeColor}set strokeStyle(t){this._ctx.strokeStyle=t,this._strokeColor=t}set(t){for(var[e,i]of Object.entries(t))switch(e){case"fontSize":this.fontSize=i;break;case"lineWidth":this.lineWidth=i;break;case"fill":this.fillStyle=i;break;case"stroke":this.strokeStyle=i;break;default:console.warn(`Unknown option key '${e}'`)}return this}measureText(t){this._ctx.textAlign="center";var t=this._ctx.measureText(t),e=(this.fontAscent+this.fontDescent)/2;return{top:1.3*e,bot:e,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight}}drawText(t,e,i,n){let r="middle",s="center";switch(12&n){case T.T:r="top";break;case T.B:r="bottom"}switch(3&n){case T.L:s="left";break;case T.R:s="right"}return this._ctx.textBaseline=r,this._ctx.textAlign=s,this._ctx.fillText(t,e,i),this}begin(){return this._ctx.beginPath(),this}move(t,e){return this._ctx.moveTo(t,e),this}line(t,e){return this._ctx.lineTo(t,e),this}quadratic(t,e,i,n){return this._ctx.quadraticCurveTo(t,e,i,n),this}cubic(t,e,i,n,r,s){return this._ctx.bezierCurveTo(t,e,i,n,r,s),this}close(){return this._ctx.closePath(),this}rect(t,e,i,n){return this._ctx.rect(t,e,i,n),this}arc(t,e,i,n,r,s){return n-=k*Math.floor(M*n),r-=k*Math.floor(M*r),this._ctx.arc(t,e,i,-n,-r,!s),this}stroke(){return this._ctx.stroke(),this}fill(){return this._ctx.fill(),this}fillAndStroke(){return this.fill(),this.stroke(),this}},R=class{constructor(t,e,...i){this.name=t,this.children=i,this.attributes=e||{}}attrString(){return Object.entries(this.attributes).map(([t,e])=>t+`="${e}"`).join(" ")}chString(){return this.children.map(t=>t.toString()).join("")}append(t){this.children.push(t)}toString(){var t=this.name;return""===t?this.chString():`<${t} ${this.attrString()}>${this.chString()}</${t}>`}};function S(t,e,...i){return"function"==typeof t?t(e,...i):new R(t,e,...i)}S.Fragment="";Math.PI,Math.PI;var T,O=.5/Math.PI,j=class{constructor(t,e){this.style={stroke:{stroke:"#000000","stroke-width":1},fill:{fill:"#000000"},fontSize:13},this.svg=S("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",viewBox:`0 0 ${t} `+e})}round(t){return Math.round(1e4*t)/1e4}get fillStyle(){return this.style.fill.fill}set fillStyle(t){let e=this.style["fill"];var i;9==t.length?(i=parseInt("0x"+t.slice(7,9))/255,t=t.slice(0,7),1==i?delete e["fill-opacity"]:e["fill-opacity"]=Math.round(1e3*i)/1e3):delete e["fill-opacity"],e.fill=t}get strokeStyle(){return this.style.stroke.stroke}set strokeStyle(t){let e=this.style["stroke"];var i;9==t.length?(i=parseInt("0x"+t.slice(7,9))/255,t=t.slice(0,7),1==i?delete e["stroke-opacity"]:e["stroke-opacity"]=Math.round(1e3*i)/1e3):delete e["stroke-opacity"],e.stroke=t}get lineWidth(){return this.style.stroke["stroke-width"]}set lineWidth(t){this.style.stroke["stroke-width"]=t}get fontSize(){return this.style.fontSize}set fontSize(t){this.style.fontSize=t}set(t){for(var[e,i]of Object.entries(t))switch(e){case"fontSize":this.fontSize=i;break;case"lineWidth":this.lineWidth=i;break;case"fill":this.fillStyle=i;break;case"stroke":this.strokeStyle=i;break;default:console.warn(`Unknown option key '${e}'`)}return this}drawText(t,e,i,n=0){let r="middle",s="middle";switch(12&n){case T.T:r="hanging";break;case T.B:r="text-after-edge"}switch(3&n){case T.L:s="start";break;case T.R:s="end"}let a=this.round;return this.svg.append(S("text",{x:a(e),y:a(i),"font-size":this.style.fontSize,"font-family":"Times New Roman","dominant-baseline":r,"text-anchor":s},t)),this}begin(){return this._path=void 0,this}move(t,e){let i=this.round;return this._path=(this._path||"")+(`M${i(t)} `+i(e)),this}line(t,e){if(!this._path)return this.move(t,e);let i=this.round;return this._path+=`L${i(t)} `+i(e),this}quadratic(t,e,i,n){if(!this._path)return this.move(i,n);let r=this.round;return this._path+=`Q${r(t)} ${r(e)} ${r(i)} `+r(n),this}cubic(t,e,i,n,r,s){if(!this._path)return this.move(r,s);let a=this.round;return this._path+=`C${a(t)} ${a(e)} ${a(i)} ${a(n)} ${a(r)} `+a(s),this}close(){return this._path=(this._path||"")+"Z",this}rect(t,e,i,n){return this.move(t,e),this.line(t+i,e),this.line(t+i,e+n),this.line(t,e+n),this.line(t,e),this}arc(t,e,i,n,r,s){var a,o=((r=-r)-(n=-n))*O;if(.499<=(o-=Math.floor(o))&&o<=.511)return this.arc(t,e,i,n,a=n+(s?.5*o:-.5*o),s),this.arc(t,e,i,a,r,s),this;let l=t+i*Math.cos(n),h=e+i*Math.sin(n),c=t+i*Math.cos(r),u=e+i*Math.sin(r),d=o<=.5==s,p=this.round;return this.line(l,h),this._path+=`A ${p(i)} ${p(i)} 0 ${d?0:1} ${s?1:0} ${p(c)} `+p(u),this}stroke(){return this._path&&this.svg.append(S("path",h({d:this._path,fill:"none"},this.style.stroke))),this}fill(){return this._path&&this.svg.append(S("path",h({d:this._path},this.style.fill))),this}fillAndStroke(){return this._path&&this.svg.append(S("path",h(h({d:this._path},this.style.fill),this.style.stroke))),this}toXML(){return`<?xml version="1.0" encoding="UTF-8" standalone="no"?> `+this.svg.toString()}toFileString(){return this.toXML()}},H=class{constructor(t,e){this.style={stroke:{color:"black",opacity:1,width:1},fill:{opacity:1,color:"black"},fontSize:13},this.width=t,this.height=e,this.TeX=`\\begin{tikzpicture}[x=1pt,y=-1pt,every node/.style={inner sep=0,outer sep=0}]%
\\fontfamily{ptm}\\selectfont%
\\useasboundingbox (0,0) rectangle (${t},${e});%
\\clip (0,0) rectangle (${t},${e});%
`}round(t){return Math.round(1e4*t)/1e4}_pathAttr(t,e){let{fill:i,stroke:n}=this.style,r;return t&&(r="fill="+i.color+(1==i.opacity?"":",fill opacity="+i.opacity)),r=e?(r?r+",":"")+`draw=${n.color},line width=`+n.width+(1==n.opacity?"":",draw opacity="+n.opacity):r}get fillStyle(){throw new Error("not implemented")}set fillStyle(t){let e=this.style["fill"],i=parseInt("0x"+t.substring(1));9===t.length?(e.opacity=(255&i)/255,i>>=8):e.opacity=1;var t=255&i,n=255&i>>8,r=255&i>>16;e.color=0==r&&0==n&&0==t?"black":`{rgb,255:red,${r}; green,${n}; blue,${t}}`}get strokeStyle(){throw new Error("Not Implemented")}set strokeStyle(t){let e=this.style["stroke"],i=parseInt("0x"+t.substring(1));9===t.length?(e.opacity=(255&i)/255,i>>=8):e.opacity=1;var t=255&i,n=255&i>>8,r=255&i>>16;e.color=0==r&&0==n&&0==t?"black":`{rgb,255:red,${r}; green,${n}; blue,${t}}`}get lineWidth(){throw new Error("Not Implemented")}set lineWidth(t){this.style.stroke.width=t}get fontSize(){return this.style.fontSize}set fontSize(t){this.style.fontSize=t}set(t){for(var[e,i]of Object.entries(t))switch(e){case"fontSize":this.fontSize=i;break;case"lineWidth":this.lineWidth=i;break;case"fill":this.fillStyle=i;break;case"stroke":this.strokeStyle=i;break;default:console.warn(`Unknown option key '${e}'`)}return this}drawText(t,e,i,n=0){let r;switch(12&n){case T.T:r="north";break;case T.B:r="south"}switch(3&n){case T.L:r=(r?r+" ":"")+"west";break;case T.R:r=(r?r+" ":"")+"east"}r=r||"center";let s=this.round;return this.TeX+=`\\node at(${s(e)},${s(i)}) [anchor=${r}]{\\fontsize{${this.style.fontSize}pt}{${this.style.fontSize}pt}\\selectfont\\vphantom{Og}${t.replace("\\","\\textbackslash{}")}};`,this}begin(){return this.path=void 0,this.pos=void 0,this}move(t,e){let i=this.round;return this.path=(this.path||"")+` (${i(t)},${i(e)})`,this.pos=[t,e],this}line(t,e){if(!this.path)return this.move(t,e);let i=this.round;return this.path+=` -- (${i(t)},${i(e)})`,this.pos=[t,e],this}quadratic(t,e,i,n){if(!this.path)return this.move(i,n);var[r,s]=this.pos;return this.cubic(r+2/3*(t-r),s+2/3*(e-s),i+2/3*(t-i),n+2/3*(e-n),i,n)}cubic(t,e,i,n,r,s){if(!this.path)return this.move(r,s);let a=this.round;return this.path+=` .. controls (${a(t)},${a(e)}) and (${a(i)},${a(n)}) .. (${a(r)},${a(s)})`,this.pos=[r,s],this}close(){return this.path+=" -- cycle",this}rect(t,e,i,n){return this.move(t,e),this.line(t+i,e),this.line(t+i,e+n),this.line(t,e+n),this.line(t,e),this}arc(t,e,i,n,r,s){n=-n,r=-r;var a=t+i*Math.cos(n),o=e+i*Math.sin(n),t=t+i*Math.cos(r),e=e+i*Math.sin(r);n/=2*Math.PI,r/=2*Math.PI,n-=Math.floor(n),r-=Math.floor(r),s&&r<n&&(r+=1),!s&&n<r&&--r,this.line(a,o);let l=this.round;return this.path+=` arc(${l(360*n)}:${l(360*r)}:${l(i)})`,this.pos=[t,e],this}stroke(){var t=`\\path [${this._pathAttr(!1,!0)}]${this.path};%
`;return this.TeX+=t,this}fill(){var t=`\\path [${this._pathAttr(!0,!1)}]${this.path};%
`;return this.TeX+=t,this}fillAndStroke(){var t=`\\path [${this._pathAttr(!0,!0)}]${this.path};%
`;return this.TeX+=t,this}toTeX(){return this.TeX+"\\end{tikzpicture}"}toFileString(){return this.toTeX()}},W=((_=T=T||{})[_.C=0]="C",_[_.T=8]="T",_[_.L=2]="L",_[_.R=1]="R",_[_.B=4]="B",_[_.TL=10]="TL",_[_.TR=9]="TR",_[_.BL=6]="BL",_[_.BR=5]="BR",class{constructor(t,e){this.origin=t,this.scale=e}project(t){return[(t=Array.isArray(t)?new y(t[0],t[1]):t).real*this.scale+this.origin[0],-t.imag*this.scale+this.origin[1]]}invert(t){return new y((t[0]-this.origin[0])/this.scale,-(t[1]-this.origin[1])/this.scale)}addTranslation(t){this.origin=[this.origin[0]+t[0],this.origin[1]+t[1]]}addZoom(t,e){var[i,n]=this.origin;this.origin=[i*t+e[0]*(1-t),n*t+e[1]*(1-t)],this.scale*=t}}),X=class{constructor(t,e,i){this.onDrag=t,this.onZoom=e,this.onHover=i,this.state=new Array,this.down=r=>{if("mouse"!=r.pointerType||0==r.button){let{pointerId:e,offsetX:t,offsetY:i}=r,n=this.state.find(({id:t})=>t===e);void 0===n&&(n={id:e,x:t,y:i},this.state.push(n)),this.state.length<=1?this.onHover([t,i]):this.onHover(null),r.currentTarget.setPointerCapture(e)}},this.move=e=>{let{pointerId:i,offsetX:n,offsetY:r}=e;if(0===this.state.length)this.onHover([n,r]);else{var s,a,o,e=this.state.findIndex(({id:t})=>t===i);if(-1!==e){let t=this.state[e];1===this.state.length?(this.onHover([n,r]),this.onDrag([n-t.x,r-t.y])):2===this.state.length&&(o=t,e=this.state[1-e],s=l(o.x-e.x,2)+l(o.y-e.y,2),a=l(n-e.x,2)+l(r-e.y,2),o=[.5*(n-o.x),.5*(r-o.y)],this.onHover(null),this.onDrag(o),this.onZoom(a/s,[.5*(n+e.x),.5*(r+e.y)])),t.x=n,t.y=r}}},this.up=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.cancel=i=>{if("mouse"!=i.pointerType||0==i.button){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.leave=i=>{if("mouse"==i.pointerType&&0===this.state.length&&this.onHover(null),!("mouse"==i.pointerType&&0!=i.button||i.currentTarget.hasPointerCapture(i.pointerId))){let e=i["pointerId"],t=this.state.findIndex(({id:t})=>t===e);this.state.splice(t,1),i.currentTarget.releasePointerCapture(e)}},this.wheel=t=>{t.preventDefault(),this.onZoom(Math.exp(-t.deltaY*(1==t.deltaMode?.03333:.001)),[t.offsetX,t.offsetY])}}registerListeners(t){t.addEventListener("pointerup",this.up),t.addEventListener("pointerdown",this.down),t.addEventListener("pointermove",this.move),t.addEventListener("pointercancel",this.cancel),t.addEventListener("pointerleave",this.leave),t.addEventListener("wheel",this.wheel)}removeListeres(t){t.removeEventListener("pointerup",this.up),t.removeEventListener("pointerdown",this.down),t.removeEventListener("pointermove",this.move),t.removeEventListener("pointercancel",this.cancel),t.removeEventListener("wheel",this.wheel)}};function z(t,e=[],i={},n={}){let r=document.createElement(t);for(var[s,a]of Object.entries(i))r.setAttribute(s,"string"==typeof a?a:a+"");for(var[o,l]of Object.entries(n))r[o]=l;if(Array.isArray(e))for(var h of e)"string"==typeof h&&(h=document.createTextNode(h)),r.append(h);else r.innerHTML=e.__html;return r}function L(t,e){for(var i of e)Array.isArray(i)?L(t,i):t.append(i instanceof Node?i:""+i)}function C(t,e,...i){var n,r,s;if(t===C.Fragment)return L(n=document.createDocumentFragment(),i),n;let a=document.createElement(t);"__html"in(e=e||{})&&(a.innerHTML=""+e.__html,delete e.__html);for([r,s]of Object.entries(e))"function"==typeof s?a[r]=s:a.setAttribute(r,""+s);return L(a,i),a}C.Fragment="";var I={css:`:host{position:relative;top:0;left:0;display:block;width:100%;height:100%;overflow:hidden;padding:0;margin:0}._container_1kdby_13{display:block;position:absolute;width:100%;height:100%;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._container_1kdby_13>div,._container_1kdby_13>canvas{position:absolute;top:0;left:0;width:100%;height:100%}
`,class:{container:"_container_1kdby_13"}};var E={css:`._button_1aydv_1{position:absolute;bottom:1em;right:1em;width:50px;height:50px;padding:10px;border-radius:50%;border:2px solid #012;background-color:#012;color:#def;z-index:99}._button_1aydv_1:hover{background-color:#bbddee;color:#001122}._button_1aydv_1:active{transform:translateY(1px);background-color:#bbddee;color:#001122}._icon_1aydv_25{display:block;width:100%;height:100%}.active ._icon_1aydv_25{display:none}._icon_x_1aydv_35{display:none;width:100%;height:100%}.active ._icon_x_1aydv_35{display:block}._container_1aydv_45{display:none;position:absolute;overflow:scroll;top:0;right:0;width:100%;height:100%;background-color:#eeeeeeaa;margin:0;padding:20px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;z-index:99}._list_1aydv_63{display:grid;display:block;grid-template-columns:repeat(auto-fill,250px);margin:auto}dialog::backdrop{background:rgba(0,0,0,0.9)}
`,class:{button:"_button_1aydv_1",icon:"_icon_1aydv_25",icon_x:"_icon_x_1aydv_35",container:"_container_1aydv_45",list:"_list_1aydv_63"}},N={section:function(t,e){return{input:C(null!=(e=null==e?void 0:e.level)?e:"h2",{},t)}},number:function(t){let e=t.onChange;return{label:C("label",null,t.label),input:C("input",h({type:"number",oninput:t=>{null!=e&&e(parseInt(t.target.value))}},t.default?{value:t.default}:{}))}},color:function(t){let e=t.onChange;return{label:C("label",null,t.label),input:C("input",h({type:"color",oninput:t=>{null!=e&&e(t.target.value)}},t.default?{value:t.default}:{}))}},radio:function(e){let i=e.onChange;return{label:C("label",null,e.label),input:C(C.Fragment,null,e.values.map(t=>C(C.Fragment,null,C("label",null,t.label,C("input",h({type:"radio",name:e.label,value:t.name,oninput:t=>{null!=i&&i(t.target.value)}},t.name===e.default?{checked:""}:{}))),C("span",{style:"display:inline-block;width:1em;"}))))}},multiButton:function(t){let e=t.onClick;return{label:C("label",null,t.label),input:C(C.Fragment,null,t.values.map(t=>C("button",{value:t.name,onclick:t=>{null!=e&&e(t.target.value)}},t.label)))}},custom:function(t){return{label:"string"==typeof t.label?C("span",null,t.label):t.label,input:t.input}}};function G(s){let t=C("input",{type:"number",style:"width:6em;"}),e=C("input",{type:"number",style:"width:6em;"}),n=C("span",null,"auto sizing"),r=new ResizeObserver(()=>{var t,e,i,n,r;""!==s.containerElement.style.width&&(i=s.hostElement)&&({clientWidth:t,clientHeight:e}=s.containerElement,{clientWidth:i,clientHeight:n}=i,r=Math.min(i/t,n/e),s.containerElement.style.transformOrigin="top left",s.containerElement.style.transform=`translate(${(i-t*r)/2}px, ${(n-e*r)/2}px) scale(${r}, ${r})`)}),a=!1,i=(t,e)=>{var i=t<0||e<0||isNaN(t)||isNaN(e);i&&a&&(r.unobserve(s.containerElement),r.unobserve(s.hostElement),a=!1),a||i||(r.observe(s.containerElement),r.observe(s.hostElement),a=!0),i?(s.containerElement.style.width="",s.containerElement.style.height="",s.containerElement.style.outline="",s.containerElement.style.transform="",s.containerElement.style.transformOrigin="",n.textContent="auto sizing"):(s.containerElement.style.width=t+"px",s.containerElement.style.height=e+"px",s.containerElement.style.outline="1px dashed black",n.textContent=t+" x "+e),o.close()},o=C("dialog",null,C("form",{onsubmit:()=>(i(parseInt(t.value),parseInt(e.value)),!1)},C("p",null,"Choose new size:"),t," x ",e,C("br",null),C("input",{type:"submit",value:"Apply"}),C("input",{type:"button",value:"Reset",onclick:()=>{i(-1,-1)}}))),l;return l=C("span",null,C("input",{type:"button",value:"Change",onclick:()=>{o.showModal()}}),o),{label:C("span",null,"Canvas size (",n,")"),input:l}}var F=class{constructor(){this.container=C("div",null)}add(t,...e){Array.isArray(t)&&(e=t.slice(1),t=t[0]);t=("function"==typeof t?t:N[t])(...e);if(this.addOption(t),"handle"in t)return t.handle}addOption(t){this.container.appendChild(C("div",{style:"margin-top: 10px;"},t.label?C("div",null,C("b",null,t.label,":")):[],C("div",null,t.input)))}},_=class extends HTMLElement{constructor(){super(...arguments),this.shadow=this.attachShadow({mode:"open"}),this.cleanup=[]}connectedCallback(){var t,e;let i=this.shadow,n=(i.innerHTML="",z("style",[I.css])),a=z("div",[],{class:I.class.container}),s=new ResizeObserver(()=>{var t,e,i,n,r;null!=(e=(t=this.layerHandler).resized)&&e.call(t,h);for(r of o.values())null!=(n=null==(i=r.layer)?void 0:i.resized)&&n.call(i,h,r.nodes)}),o=(s.observe(a),i.append(n,a),new Map),r=0,l=()=>{var t,e,i,n=2===r;r=0;for(i of o.values())(n||i.update)&&null!=(e=null==(t=i.layer)?void 0:t.update)&&e.call(t,h,i.nodes),i.update=!1},h={get width(){return a.clientWidth},get height(){return a.clientHeight},containerElement:a,hostElement:this,update:function(e){if(2!==r)if(0===r&&requestAnimationFrame(l),void 0===e)r=2;else if("string"==typeof e){r=1;let t=o.get(e);void(t&&(t.update=!0))}else for(var t of o.values())e===t.layer&&(t.update=!0)},addStyles:function(t){n.append(t)},addLayer:function(n,r){if(!(r instanceof Node)){let t,e;t="function"==typeof r?void(e=r(h)):(e=r.connected(h),r);var s=e.nodes;s&&(Array.isArray(s)?a.append(...s):a.append(s)),o.set(n,{nodes:s,layer:t,update:!1}),h.update(n);let i=e.handle;return(i=i||{}).update=()=>{this.update(n)},i}a.appendChild(r)},attachToShaddow(...t){i.append(...t)}};null!=(e=(t=this.layerHandler).connected)&&e.call(t,h),this.cleanup.push(()=>{var t,e,i,n,r;s.unobserve(a);for(r of o.values())null!=(e=null==(t=r.layer)?void 0:t.disconnected)&&e.call(t,h);null!=(n=(i=this.layerHandler).disconnected)&&n.call(i,h)})}disconnectedCallback(){for(var t of this.cleanup)t();this.cleanup=[],this.shadow.innerHTML=""}};function D(...t){let e=1,i=0;for(var n of t){var r=Math.abs(n[1]/function(t,e){var i;for((t=Math.abs(t))<(e=Math.abs(e))&&(i=t,t=e,e=i);;){if(0==e)return t;if(0==(t%=e))return e;e%=t}}(e,n[1]));e*=r,i*=r,i=Math.max(i,Math.abs(n[0]*e/n[1]))}return i}var A,B=t.async(function*(t,e){let i=e.projection,n=(l=e.height,{[Symbol.iterator]:function*(t){let[e,i,n,r]=null!=t?t:[0,1,1,l];for(yield[e,i],yield[n,r];1!==r;){var s=Math.floor((l+i)/r);[e,i,n,r]=[n,r,s*n-e,s*r-i],yield[n,r]}},approximate(n){n-=Math.floor(n);let r=0,s=1,a=1,o=1;for(;;){let t=a-n*o,e;(void 0===(e=0!=t?Math.floor((n*s-r)/t):e)||s+e*o>l)&&(e=Math.floor((l-s)/o)),r+=e*a,s+=e*o,t=s*n-r;let i;if((void 0===(i=0!=t?Math.floor((a-n*o)/t):i)||s*i+o>l)&&(i=Math.floor((l-o)/s)),a=r*i+a,o=s*i+o,0==e&&0==i)break}return[r,s,a,o]},startAt(t){return this.continue(...this.approximate(t))},continue(t,e,i,n){if(e*i-t*n!=1||e+n<=l)throw t+`/${e} and ${i}/${n} are not consecutive`;return this[Symbol.iterator]([t,e,i,n])}});var l,r;for(r of n)for(var s of n)D(r,s,[1,1])>e.height||(yield,s=i.project([r[0]/r[1],s[0]/s[1]]),t.begin().arc(...s,.5,0,1.9999*Math.PI,!1).close().fill());var a=i.project([0,0]);t.drawText("[0 : 0 : 1]",a[0]-7,a[1]+5,T.T),a=i.project([1,1]),t.drawText("[1 : 1 : 1]",a[0]+7,a[1]-5,T.B)});window.customElements.define("projective-points",(A={connected(l){let n=new e,r=new W([l.width/2,l.height/2],100),h={projection:r,height:20},t=(new X(t=>{r.addTranslation(t),l.update()},(t,e)=>{var i=r.project([0,0]),n=r.project([1,0]),i=Math.abs(i[0]-n[0]);t<=.1*l.width/i&&(t=.1*l.width/i),r.addZoom(t,e),l.update()},()=>{}).registerListeners(l.containerElement),l.addLayer("Options",t=>{let e=C("div",{class:E.class.container},C("h1",null,"Options")),i=C("button",{"arial-label":"Options Toggle",class:E.class.button,title:"Show all options",__html:`<svg xmlns="http://www.w3.org/2000/svg" class="${E.class.icon}" viewBox="0 0 24 24" style="fill:currentColor;"><path d="M19.9,13.3C20,12.8,20,12.4,20,12s0-0.8-0.1-1.3L21.8,9l-2.3-4l-2.4,0.8c-0.7-0.5-1.4-1-2.2-1.3L14.3,2H9.7L9.2,4.5	C8.3,4.8,7.6,5.3,6.9,5.8L4.5,5L2.2,9l1.9,1.7C4,11.2,4,11.6,4,12c0,0.4,0,0.8,0.1,1.3L2.2,15l2.3,4l2.4-0.8l0,0	c0.7,0.5,1.4,1,2.2,1.3L9.7,22h4.7l0.5-2.5c0.8-0.3,1.6-0.7,2.2-1.3l0,0l2.4,0.8l2.3-4L19.9,13.3L19.9,13.3z M12,16	c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C16,14.2,14.2,16,12,16z"></path></svg><svg class="${E.class.icon_x}" version="1.1" viewBox="0 0 460.78 460.78" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="m285.08 230.4 171.14-171.13c6.076-6.077 6.076-15.911 0-21.986l-32.707-32.719c-2.913-2.911-6.866-4.55-10.992-4.55-4.127 0-8.08 1.639-10.993 4.55l-171.14 171.14-171.14-171.14c-2.913-2.911-6.866-4.55-10.993-4.55-4.126 0-8.08 1.639-10.992 4.55l-32.707 32.719c-6.077 6.075-6.077 15.909 0 21.986l171.14 171.13-171.12 171.11c-6.074 6.077-6.074 15.911 0 21.986l32.709 32.719c2.911 2.911 6.865 4.55 10.992 4.55s8.08-1.639 10.994-4.55l171.12-171.12 171.12 171.12c2.913 2.911 6.866 4.55 10.993 4.55 4.128 0 8.081-1.639 10.992-4.55l32.709-32.719c6.074-6.075 6.074-15.909 0-21.986l-171.12-171.11z"/></svg>`,onclick:()=>{var t="block"==e.style.display;e.style.display=t?"":"block",t?i.classList.remove("active"):i.classList.add("active")}}),n=new F;return n.container.className=E.class.list,e.append(n.container),t.attachToShaddow(C("style",{__html:E.css}),e,i),{nodes:void 0,handle:n}}));var s;t.add("number",{label:"Height",onChange(t){h.height=1<t?t:1,l.update()},default:h.height}),t.add(G,l),t.add("multiButton",{label:"Export as",values:[{name:"SVG",label:"SVG"},{name:"TikZ",label:"TikZ"}],onClick(e){return i(this,null,function*(){let i,n="Hyperbola",r;if("SVG"==e)(i=new j(l.width,l.height)).round=t=>t,n+=".svg",r="image/svg+xml";else{if("TikZ"!=e)throw new Error("Unknown format");(i=new H(l.width,l.height)).round=t=>t,n+=".tikz",r="text/plain"}let t=B(i,h);t.catch(t=>console.log(t)),yield t;{var[s,a,o="text/plain"]=[i.toFileString(),n,r];let t=`data:${o};base64,`+window.btoa(s),e=document.createElement("a");return e.setAttribute("download",a),e.href=t,void e.click()}})}}),l.addLayer("draw",(s={update(t,e){var i=new $(e);e.clearRect(0,0,t.width,t.height),n.abortAll("draw"),B(i,h,n.getNew("draw",20)).catch(t=>{"aborted"!==t&&console.log(t)})}},{update(t,e){let i=e.getContext("2d"),n=window.devicePixelRatio;Math.floor(t.width*n)===e.width&&Math.floor(t.height*n)===e.height||(e.width=Math.floor(t.width*n),e.height=Math.floor(t.height*n)),i.setTransform(n,0,0,n,0,0),s.update(t,i)},resized(t){t.update(this)},connected(t){return{nodes:z("canvas",[],{class:"canvas-layer"})}}}))}},class extends _{constructor(){super(...arguments),this.layerHandler=A}}))})()</script><projective-points><div style="display:grid;justify-items:center;align-items:center;width:100%;height:100%"><h2>Javascript required!</h2></div></projective-points></div></main></body></html>