(()=>{var ue=Object.defineProperty;var D=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var K=(i,e,t)=>e in i?ue(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,k=(i,e)=>{for(var t in e||(e={}))de.call(e,t)&&K(i,t,e[t]);if(D)for(var t of D(e))me.call(e,t)&&K(i,t,e[t]);return i};var z=(i,e,t)=>new Promise((n,r)=>{var a=m=>{try{h(t.next(m))}catch(p){r(p)}},o=m=>{try{h(t.throw(m))}catch(p){r(p)}},h=m=>m.done?n(m.value):Promise.resolve(m.value).then(a,o);h((t=t.apply(i,e)).next())});function E(i,e=[],t={},n={}){let r=document.createElement(i);for(let[o,h]of Object.entries(t))r.setAttribute(o,typeof h=="string"?h:h+"");for(let[o,h]of Object.entries(n))r[o]=h;if(Array.isArray(e))for(var a of e)typeof a=="string"&&(a=document.createTextNode(a)),r.append(a);else r.innerHTML=e.__html;return r}function X(i,e){for(var t of e)Array.isArray(t)?X(i,t):i.append(t instanceof Node?t:""+t)}function f(i,e,...t){if(i===f.Fragment){let o=document.createDocumentFragment();return X(o,t),o}let n=document.createElement(i);e=e||{},"__html"in e&&(n.innerHTML=""+e.__html,delete e.__html);for(var[r,a]of Object.entries(e))typeof a=="function"?n[r]=a:n.setAttribute(r,""+a);return X(n,t),n}f.Fragment="";var he=`:host{position:relative;top:0;left:0;display:block;width:100%;height:100%;overflow:hidden;padding:0;margin:0}._container_1kdby_13{display:block;position:absolute;width:100%;height:100%;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._container_1kdby_13>div,._container_1kdby_13>canvas{position:absolute;top:0;left:0;width:100%;height:100%}
`,be={container:"_container_1kdby_13"},B={css:he,class:be};function G(i){return{update(e,t){let n=t.getContext("2d"),r=window.devicePixelRatio;(Math.floor(e.width*r)!==t.width||Math.floor(e.height*r)!==t.height)&&(t.width=Math.floor(e.width*r),t.height=Math.floor(e.height*r)),n.setTransform(r,0,0,r,0,0),i.update(e,n)},resized(e){e.update(this)},connected(e){return{nodes:E("canvas",[],{class:"canvas-layer"})}}}}var ce=`._button_1aydv_1{position:absolute;bottom:1em;right:1em;width:50px;height:50px;padding:10px;border-radius:50%;border:2px solid #012;background-color:#012;color:#def;z-index:99}._button_1aydv_1:hover{background-color:#bbddee;color:#001122}._button_1aydv_1:active{transform:translateY(1px);background-color:#bbddee;color:#001122}._icon_1aydv_25{display:block;width:100%;height:100%}.active ._icon_1aydv_25{display:none}._icon_x_1aydv_35{display:none;width:100%;height:100%}.active ._icon_x_1aydv_35{display:block}._container_1aydv_45{display:none;position:absolute;overflow:scroll;top:0;right:0;width:100%;height:100%;background-color:#eeeeeeaa;margin:0;padding:20px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;z-index:99}._list_1aydv_63{display:grid;display:block;grid-template-columns:repeat(auto-fill,250px);margin:auto}dialog::backdrop{background:rgba(0,0,0,0.9)}
`,pe={button:"_button_1aydv_1",icon:"_icon_1aydv_25",icon_x:"_icon_x_1aydv_35",container:"_container_1aydv_45",list:"_list_1aydv_63"},w={css:ce,class:pe};var fe={section:function(i,e){var t;return{input:f((t=e==null?void 0:e.level)!=null?t:"h2",{},i)}},number:function(i){let e=i.onChange;return{label:f("label",null,i.label),input:f("input",k({type:"number",oninput:t=>{e==null||e(parseInt(t.target.value))}},i.default?{value:i.default}:{}))}},color:function(i){let e=i.onChange;return{label:f("label",null,i.label),input:f("input",k({type:"color",oninput:t=>{e==null||e(t.target.value)}},i.default?{value:i.default}:{}))}},radio:function(i){let e=i.onChange;return{label:f("label",null,i.label),input:f(f.Fragment,null,i.values.map(t=>f(f.Fragment,null,f("label",null,t.label,f("input",k({type:"radio",name:i.label,value:t.name,oninput:n=>{e==null||e(n.target.value)}},t.name===i.default?{checked:""}:{}))),f("span",{style:"display:inline-block;width:1em;"}))))}},multiButton:function(i){let e=i.onClick;return{label:f("label",null,i.label),input:f(f.Fragment,null,i.values.map(t=>f("button",{value:t.name,onclick:n=>{e==null||e(n.target.value)}},t.label)))}},custom:function(i){return{label:typeof i.label=="string"?f("span",null,i.label):i.label,input:i.input}}};function A(){return i=>{let e=f("div",{class:w.class.container},f("h1",null,"Options")),t=f("button",{"arial-label":"Options Toggle",class:w.class.button,title:"Show all options",__html:`<svg xmlns="http://www.w3.org/2000/svg" class="${w.class.icon}" viewBox="0 0 24 24" style="fill:currentColor;"><path d="M19.9,13.3C20,12.8,20,12.4,20,12s0-0.8-0.1-1.3L21.8,9l-2.3-4l-2.4,0.8c-0.7-0.5-1.4-1-2.2-1.3L14.3,2H9.7L9.2,4.5	C8.3,4.8,7.6,5.3,6.9,5.8L4.5,5L2.2,9l1.9,1.7C4,11.2,4,11.6,4,12c0,0.4,0,0.8,0.1,1.3L2.2,15l2.3,4l2.4-0.8l0,0	c0.7,0.5,1.4,1,2.2,1.3L9.7,22h4.7l0.5-2.5c0.8-0.3,1.6-0.7,2.2-1.3l0,0l2.4,0.8l2.3-4L19.9,13.3L19.9,13.3z M12,16	c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C16,14.2,14.2,16,12,16z"></path></svg><svg class="${w.class.icon_x}" version="1.1" viewBox="0 0 460.78 460.78" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="m285.08 230.4 171.14-171.13c6.076-6.077 6.076-15.911 0-21.986l-32.707-32.719c-2.913-2.911-6.866-4.55-10.992-4.55-4.127 0-8.08 1.639-10.993 4.55l-171.14 171.14-171.14-171.14c-2.913-2.911-6.866-4.55-10.993-4.55-4.126 0-8.08 1.639-10.992 4.55l-32.707 32.719c-6.077 6.075-6.077 15.909 0 21.986l171.14 171.13-171.12 171.11c-6.074 6.077-6.074 15.911 0 21.986l32.709 32.719c2.911 2.911 6.865 4.55 10.992 4.55s8.08-1.639 10.994-4.55l171.12-171.12 171.12 171.12c2.913 2.911 6.866 4.55 10.993 4.55 4.128 0 8.081-1.639 10.992-4.55l32.709-32.719c6.074-6.075 6.074-15.909 0-21.986l-171.12-171.11z"/></svg>`,onclick:()=>{let r=e.style.display=="block";e.style.display=r?"":"block",r?t.classList.remove("active"):t.classList.add("active")}}),n=new J;return n.container.className=w.class.list,e.append(n.container),i.attachToShaddow(f("style",{__html:w.css}),e,t),{nodes:void 0,handle:n}}}function V(i){let e=f("input",{type:"number",style:"width:6em;"}),t=f("input",{type:"number",style:"width:6em;"}),n=f("span",null,"auto sizing"),r=new ResizeObserver(()=>{if(i.containerElement.style.width==="")return;let b=i.hostElement;if(!b)return;let{clientWidth:s,clientHeight:d}=i.containerElement,{clientWidth:l,clientHeight:u}=b,c=Math.min(l/s,u/d);i.containerElement.style.transformOrigin="top left",i.containerElement.style.transform=`translate(${(l-s*c)/2}px, ${(u-d*c)/2}px) scale(${c}, ${c})`}),a=!1,o=(b,s)=>{let d=b<0||s<0||isNaN(b)||isNaN(s);d&&a&&(r.unobserve(i.containerElement),r.unobserve(i.hostElement),a=!1),!a&&!d&&(r.observe(i.containerElement),r.observe(i.hostElement),a=!0),d?(i.containerElement.style.width="",i.containerElement.style.height="",i.containerElement.style.outline="",i.containerElement.style.transform="",i.containerElement.style.transformOrigin="",n.textContent="auto sizing"):(i.containerElement.style.width=b+"px",i.containerElement.style.height=s+"px",i.containerElement.style.outline="1px dashed black",n.textContent=b+" x "+s),h.close()},h=f("dialog",null,f("form",{onsubmit:()=>(o(parseInt(e.value),parseInt(t.value)),!1)},f("p",null,"Choose new size:"),e," x ",t,f("br",null),f("input",{type:"submit",value:"Apply"}),f("input",{type:"button",value:"Reset",onclick:()=>{o(-1,-1)}}))),m,p;return m=f("span",null,f("input",{type:"button",value:"Change",onclick:()=>{h.showModal()}}),h),{label:f("span",null,"Canvas size (",n,")"),input:m}}var J=class{constructor(){this.container=f("div",null)}add(e,...t){Array.isArray(e)&&(t=e.slice(1),e=e[0]);var r=(typeof e=="function"?e:fe[e])(...t);if(console.log(r),this.addOption(r),"handle"in r)return r.handle}addOption(e){this.container.appendChild(f("div",{style:"margin-top: 10px;"},e.label?f("div",null,f("b",null,e.label,":")):[],f("div",null,e.input)))}};var q=class extends HTMLElement{constructor(){super(...arguments);this.shadow=this.attachShadow({mode:"open"});this.cleanup=[]}connectedCallback(){var p,b;let e=this.shadow;e.innerHTML="";let t=E("style",[B.css]),n=E("div",[],{class:B.class.container}),r=new ResizeObserver(()=>{var d,l,u,c;(l=(d=this.layerHandler).resized)==null||l.call(d,m);for(var s of a.values())(c=(u=s.layer)==null?void 0:u.resized)==null||c.call(u,m,s.nodes)});r.observe(n),e.append(t,n);let a=new Map,o=0,h=()=>{var l,u;let s=o===2;o=0;for(var d of a.values())(s||d.update)&&((u=(l=d.layer)==null?void 0:l.update)==null||u.call(l,m,d.nodes)),d.update=!1},m={get width(){return n.clientWidth},get height(){return n.clientHeight},containerElement:n,hostElement:this,update:function(s){if(o!==2){if(o===0&&requestAnimationFrame(h),s===void 0){o=2;return}if(typeof s=="string"){o=1;let l=a.get(s);l&&(l.update=!0);return}for(var d of a.values())s===d.layer&&(d.update=!0)}},addStyles:function(s){t.append(s)},addLayer:function(s,d){if(d instanceof Node){n.appendChild(d);return}let l,u;typeof d=="function"?(u=d(m),l=void 0):(u=d.connected(m),l=d);let c=u.nodes;c&&(Array.isArray(c)?n.append(...c):n.append(c)),a.set(s,{nodes:c,layer:l,update:!1}),m.update(s);let y=u.handle;return y||(y={}),y.update=()=>{this.update(s)},y},attachToShaddow(...s){e.append(...s)}};(b=(p=this.layerHandler).connected)==null||b.call(p,m),this.cleanup.push(()=>{var d,l,u,c;r.unobserve(n);for(var s of a.values())(l=(d=s.layer)==null?void 0:d.disconnected)==null||l.call(d,m);(c=(u=this.layerHandler).disconnected)==null||c.call(u,m)})}disconnectedCallback(){for(var e of this.cleanup)e();this.cleanup=[],this.shadow.innerHTML=""}};function Z(i){return class extends q{constructor(){super(...arguments);this.layerHandler=i}}}var U=2*Math.PI,Q=.5/Math.PI,P=class{constructor(e,t,n){this._lineWidth=1;this._fontSize=13;this._fillColor="#000000";this._strokeColor="#000000";this.fontAscent=-1;this.fontDescent=-1;this._ctx=e,this.width=t===void 0?e.canvas.width:t,this.height=n===void 0?e.canvas.height:n,this.fontSize=13}get lineWidth(){return this._lineWidth}set lineWidth(e){this._ctx.lineWidth=e,this._lineWidth=e}get fontSize(){return this._fontSize}set fontSize(e){this._ctx.textBaseline="alphabetic",this._ctx.font=e+"px Times New Roman",this._fontSize=e;let t=this._ctx.measureText("1ATOgjp");this.fontAscent=t.fontBoundingBoxAscent||t.actualBoundingBoxAscent,this.fontDescent=t.fontBoundingBoxDescent||t.actualBoundingBoxDescent}get fillStyle(){return this._fillColor}set fillStyle(e){this._ctx.fillStyle=e,this._fillColor=e}get strokeStyle(){return this._strokeColor}set strokeStyle(e){this._ctx.strokeStyle=e,this._strokeColor=e}measureText(e){this._ctx.textAlign="center";let t=this._ctx.measureText(e),n=(this.fontAscent+this.fontDescent)/2;return{top:n*1.3,bot:n*1,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight}}textNode(e,t,n,r){let a="middle",o="center";switch(r&12){case v.T:a="top";break;case v.B:a="bottom";break}switch(r&3){case v.L:o="left";break;case v.R:o="right";break}return this._ctx.textBaseline=a,this._ctx.textAlign=o,this._ctx.fillText(e,t,n),this}beginPath(){return this._ctx.beginPath(),this}moveTo(e,t){return this._ctx.moveTo(e,t),this}lineTo(e,t){return this._ctx.lineTo(e,t),this}quadraticTo(e,t,n,r){return this._ctx.quadraticCurveTo(e,t,n,r),this}cubicTo(e,t,n,r,a,o){return this._ctx.bezierCurveTo(e,t,n,r,a,o),this}closePath(){return this._ctx.closePath(),this}rect(e,t,n,r){return this._ctx.rect(e,t,n,r),this}arc(e,t,n,r,a,o){return this._ctx.arc(e,t,n,r-U*Math.floor(Q*r),a-U*Math.floor(Q*a),!o),this}stroke(){return this._ctx.stroke(),this}fill(){return this._ctx.fill(),this}fillAndStroke(){return this.fill(),this.stroke(),this}};var j=class{constructor(e,t,...n){this.name=e;this.children=n,this.attributes=t||{}}attrString(){return Object.entries(this.attributes).map(([e,t])=>`${e}="${t}"`).join(" ")}chString(){return this.children.map(e=>e.toString()).join("")}append(e){this.children.push(e)}toString(){let e=this.name;return e===""?this.chString():`<${e} ${this.attrString()}>${this.chString()}</${e}>`}};function S(i,e,...t){return typeof i=="function"?i(e,...t):new j(i,e,...t)}S.Fragment="";var Ae=180/Math.PI,De=2*Math.PI,ye=.5/Math.PI,N=class{constructor(e,t){this.style={stroke:{stroke:"#000000","stroke-width":1},fill:{fill:"#000000"},fontSize:13};this.svg=S("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",viewBox:`0 0 ${e} ${t}`})}round(e){return Math.round(e*1e3)/1e3}get fillStyle(){return this.style.fill.fill}set fillStyle(e){let{fill:t}=this.style;if(e.length==9){let n=parseInt("0x"+e.slice(7,9))/255;e=e.slice(0,7),n===1?delete t["fill-opacity"]:t["fill-opacity"]=Math.round(1e3*n)/1e3}else delete t["fill-opacity"];t.fill=e}get strokeStyle(){return this.style.stroke.stroke}set strokeStyle(e){let{stroke:t}=this.style;if(e.length==9){let n=parseInt("0x"+e.slice(7,9))/255;e=e.slice(0,7),n===1?delete t["stroke-opacity"]:t["stroke-opacity"]=Math.round(1e3*n)/1e3}else delete t["stroke-opacity"];t.stroke=e}get lineWidth(){return this.style.stroke["stroke-width"]}set lineWidth(e){this.style.stroke["stroke-width"]=e}get fontSize(){return this.style.fontSize}set fontSize(e){this.style.fontSize=e}textNode(e,t,n,r=0){let a="middle",o="middle";switch(r&12){case v.T:a="hanging";break;case v.B:a="text-after-edge";break}switch(r&3){case v.L:o="start";break;case v.R:o="end";break}let h=this.round;return this.svg.append(S("text",{x:h(t),y:h(n),"font-size":this.style.fontSize,"font-family":"Times New Roman","dominant-baseline":a,"text-anchor":o},e)),this}beginPath(){return this._path=void 0,this}moveTo(e,t){let n=this.round;return this._path=(this._path||"")+`M${n(e)} ${n(t)}`,this}lineTo(e,t){if(!this._path)return this.moveTo(e,t);let n=this.round;return this._path+=`L${n(e)} ${n(t)}`,this}quadraticTo(e,t,n,r){if(!this._path)return this.moveTo(n,r);let a=this.round;return this._path+=`Q${a(e)} ${a(t)} ${a(n)} ${a(r)}`,this}cubicTo(e,t,n,r,a,o){if(!this._path)return this.moveTo(a,o);let h=this.round;return this._path+=`C${h(e)} ${h(t)} ${h(n)} ${h(r)} ${h(a)} ${h(o)}`,this}closePath(){return this._path=(this._path||"")+"Z",this}rect(e,t,n,r){return this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this}arc(e,t,n,r,a,o){let h=(a-r)*ye;if(h=h-Math.floor(h),h>=.499&&h<=.511){let u=r+(o?.5*h:-.5*h);return this.arc(e,t,n,r,u,o),this.arc(e,t,n,u,a,o),this}let m=e+n*Math.cos(r),p=t+n*Math.sin(r),b=e+n*Math.cos(a),s=t+n*Math.sin(a),d=h<=.5==o,l=this.round;return this.lineTo(m,p),this._path+=`A ${l(n)} ${l(n)} 0 ${d?0:1} ${o?1:0} ${l(b)} ${l(s)}`,this}stroke(){return this._path&&this.svg.append(S("path",k({d:this._path,fill:"none"},this.style.stroke))),this}fill(){return this._path&&this.svg.append(S("path",k({d:this._path},this.style.fill))),this}fillAndStroke(){return this._path&&this.svg.append(S("path",k(k({d:this._path},this.style.fill),this.style.stroke))),this}toXML(){return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
${this.svg.toString()}`}toFileString(){return this.toXML()}};var I=class{constructor(e,t){this.style={stroke:{color:"black",opacity:1,width:1},fill:{opacity:1,color:"black"},fontSize:13};this.width=e,this.height=t,this.TeX=`\\begin{tikzpicture}[x=1pt,y=-1pt,every node/.style={inner sep=0,outer sep=0}]%
\\fontfamily{ptm}\\selectfont%
\\useasboundingbox (0,0) rectangle (${e},${t});%
\\clip (0,0) rectangle (${e},${t});%
`}round(e){return Math.round(e*1e3)/1e3}_pathAttr(e,t){let{fill:n,stroke:r}=this.style,a;return e&&(a=`fill=${n.color}${n.opacity==1?"":",fill opacity="+n.opacity}`),t&&(a=(a?a+",":"")+`draw=${r.color},line width=${r.width}${r.opacity==1?"":",draw opacity="+r.opacity}`),a}get fillStyle(){throw new Error("not implemented")}set fillStyle(e){let{fill:t}=this.style,n=parseInt("0x"+e.substring(1));e.length===9?(t.opacity=(n&255)/255,n>>=8):t.opacity=1;let r=255&n,a=255&n>>8,o=255&n>>16;o==0&&a==0&&r==0?t.color="black":t.color=`{rgb,255:red,${o}; green,${a}; blue,${r}}`}get strokeStyle(){throw new Error("Not Implemented")}set strokeStyle(e){let{stroke:t}=this.style,n=parseInt("0x"+e.substring(1));e.length===9?(t.opacity=(n&255)/255,n>>=8):t.opacity=1;let r=255&n,a=255&n>>8,o=255&n>>16;o==0&&a==0&&r==0?t.color="black":t.color=`{rgb,255:red,${o}; green,${a}; blue,${r}}`}get lineWidth(){throw new Error("Not Implemented")}set lineWidth(e){this.style.stroke.width=e}get fontSize(){return this.style.fontSize}set fontSize(e){this.style.fontSize=e}textNode(e,t,n,r=0){let a;switch(r&12){case v.T:a="north";break;case v.B:a="south";break}switch(r&3){case v.L:a=(a?a+" ":"")+"west";break;case v.R:a=(a?a+" ":"")+"east";break}a=a||"center";let o=this.round;return this.TeX+=`\\node at(${o(t)},${o(n)}) [anchor=${a}]{\\fontsize{${this.style.fontSize}pt}{${this.style.fontSize}pt}\\selectfont\\vphantom{Og}${e.replace("\\","\\textbackslash{}")}};`,this}beginPath(){return this.path=void 0,this.pos=void 0,this}moveTo(e,t){let n=this.round;return this.path=(this.path||"")+` (${n(e)},${n(t)})`,this.pos=[e,t],this}lineTo(e,t){if(!this.path)return this.moveTo(e,t);let n=this.round;return this.path+=` -- (${n(e)},${n(t)})`,this.pos=[e,t],this}quadraticTo(e,t,n,r){if(!this.path)return this.moveTo(n,r);let[a,o]=this.pos;return this.cubicTo(a+2/3*(e-a),o+2/3*(t-o),n+2/3*(e-n),r+2/3*(t-r),n,r)}cubicTo(e,t,n,r,a,o){if(!this.path)return this.moveTo(a,o);let h=this.round;return this.path+=` .. controls (${h(e)},${h(t)}) and (${h(n)},${h(r)}) .. (${h(a)},${h(o)})`,this.pos=[a,o],this}closePath(){return this.path+=" -- cycle",this}rect(e,t,n,r){return this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this}arc(e,t,n,r,a,o){let h=e+n*Math.cos(r),m=t+n*Math.sin(r),p=e+n*Math.cos(a),b=t+n*Math.sin(a);r/=2*Math.PI,a/=2*Math.PI,r-=Math.floor(r),a-=Math.floor(a),o&&a<r&&(a+=1),!o&&r<a&&(a-=1),this.lineTo(h,m);let s=this.round;return this.path+=` arc(${s(r*360)}:${s(a*360)}:${s(n)})`,this.pos=[p,b],this}stroke(){let e=`\\path [${this._pathAttr(!1,!0)}]${this.path};%
`;return this.TeX+=e,this}fill(){let e=`\\path [${this._pathAttr(!0,!1)}]${this.path};%
`;return this.TeX+=e,this}fillAndStroke(){let e=`\\path [${this._pathAttr(!0,!0)}]${this.path};%
`;return this.TeX+=e,this}toTeX(){return this.TeX+"\\end{tikzpicture}"}toFileString(){return this.toTeX()}};var v;(function(p){p[p.C=0]="C",p[p.T=8]="T",p[p.L=2]="L",p[p.R=1]="R",p[p.B=4]="B",p[p.TL=10]="TL",p[p.TR=9]="TR",p[p.BL=6]="BL",p[p.BR=5]="BR"})(v||(v={}));function ee(i,e,t,n){return z(this,null,function*(){var h,m;n!=null||(n=ge);let r=n.create();(h=r.begin)==null||h.call(r);let a=e.apply(i,t),o=a.next();for(;!o.done;)r.shouldYield()&&(yield r.yield()),o=a.next();return(m=r.done)==null||m.call(r),o.value})}function te(i,e,t){let n=e.apply(i,t),r=n.next();for(;!r.done;)r=n.next();return r.value}var ge={create:()=>({shouldYield(){return!1},yield(){return z(this,null,function*(){})}})};function ne(i){let e=i[i.length-1],t;return"create"in e&&(i=Array.prototype.slice.call(i,0,i.length-1),t=e),[t,i]}var re;(function(t){function i(n){return function(...a){let[o,h]=ne(a);return ee(this,n,h,o)}}t.async=i;function e(n){return function(...a){return te(this,n,a)}}t.sync=e})(re||(re={}));var O;(function(t){function i(n){return function(...a){let[o,h]=ne(a);return ee(this,this[n],h,o)}}t.async=i;function e(n){return function(...a){return te(this,this[n],a)}}t.sync=e})(O||(O={}));var C;(function(n){n.Infinity="infinity",n.Complex="complex",n.Moebius="moebius"})(C||(C={}));var $={mathtype:C.Infinity},F=class{constructor(e,t,n=1){this.start=e;this.end=t;this.step=n}*[Symbol.iterator](){let{start:e,step:t,end:n}=this;for(;e<n;)yield e,e+=t}};function Te(i,e){return typeof i=="number"?new x(i,e):Array.isArray(i)?new x(i[0],i[1]):i}var x=class{constructor(e,t=0){this.mathtype=C.Complex;this.real=e,this.imag=t}abs2(){return this.real*this.real+this.imag*this.imag}abs(){return Math.sqrt(this.abs2())}add(e){return typeof e=="number"?new x(this.real+e,this.imag):new x(this.real+e.real,this.imag+e.imag)}sub(e){return typeof e=="number"?new x(this.real-e,this.imag):new x(this.real-e.real,this.imag-e.imag)}mul(e){return typeof e=="number"?new x(e*this.real,e*this.imag):new x(this.real*e.real-this.imag*e.imag,this.imag*e.real+this.real*e.imag)}div(e){return typeof e=="number"?new x(this.real/e,this.imag/e):this.mul(e.inv())}inv(){var e=this.abs2();return new x(this.real/e,-this.imag/e)}arg(){var e=this.real,t=this.imag;if(e==0)return t>0?.5*Math.PI:t<0?1.5*Math.PI:0;if(e>=0){let n=Math.atan(1*t/e);return n<0?2*Math.PI+n:n}return Math.atan(1*t/e)+Math.PI}toTeX(){return this.imag==0?`${this.real}`:this.real==0?`${this.imag}i`:`${this.real} + ${this.imag}i`}},_=class{constructor(e,t,n,r){this.mathtype=C.Moebius;this.m=[e,t,n,r]}mul(e){let t=this.m,n=e.m;return new _(t[0]*n[0]+t[1]*n[2],t[0]*n[1]+t[1]*n[3],t[2]*n[0]+t[3]*n[2],t[2]*n[1]+t[3]*n[3])}inv(){let e=this.m;return new _(e[3],-e[1],-e[2],e[0])}transform(e,t){if(typeof e=="number")e=Te(e,t);else if(e.mathtype===C.Infinity)return this.m[2]==0?$:new x(this.m[0]/this.m[2]);let n=this.m,r=e.mul(n[2]).add(n[3]);return r.real==0&&r.imag==0?$:e.mul(n[0]).add(n[1]).div(r)}toTeX(){return`\\begin{pmatrix}${this.m[0]}&${this.m[1]}\\\\ ${this.m[2]}&${this.m[3]}\\end{pmatrix}`}},ie;(function(b){class i{constructor(d,l){this.cosetRepresentatives=O.sync("_cosetRepresentatives");this.cosetRepresentativesAsync=O.async("_cosetRepresentatives");this.indicator=d,this.tex=l}findCosetIndex(d,l,u){let c=u.inv(),y=this.indicator;for(var T=0;T<l.length;T++)if(y(d,l[T].mul(c)))return T;return-1}findCoset(d,l,u){let c=u.inv(),y=this.indicator;return l.find(T=>y(d,T.mul(c)))}*_cosetRepresentatives(d){if(!Number.isInteger(d)||d<=0)throw"Invalid Level";let l=[new _(0,-1,1,0),new _(1,1,0,1),new _(1,-1,0,1)],u=this,c=[new _(1,0,0,1)];for(var y=[],T=[],M=[new _(1,0,0,1)];M.length>0;){y=T,T=M,M=[];for(let se of T)for(let le of l){yield;let L=se.mul(le);u.findCosetIndex(d,y,L)==-1&&u.findCosetIndex(d,M,L)==-1&&u.findCosetIndex(d,T,L)==-1&&(c.push(L),M.push(L))}}return c}toTeX(){return this.tex}}b.CongruenceSubgroup=i;function e(s,d,l){return(s-d)%l==0}function t(s,d){return e(d.m[2],0,s)}b.Gamma_0=new i(t,"\\Gamma_0");function r(s,d){return e(d.m[2],0,s)&&(e(d.m[0],1,s)||e(d.m[0],-1,s))}b.Gamma_1=new i(r,"\\Gamma_1");function o(s,d){return e(d.m[2],0,s)&&e(d.m[1],0,s)&&(e(d.m[0],1,s)||e(d.m[0],-1,s))}b.Gamma=new i(o,"\\Gamma"),b.Gamma.cosetRepresentatives=function(s){let d=b.Gamma_1.cosetRepresentatives(s),l=[];for(let u=0;u<s;u++){let c=new _(1,u,0,1);l.push(...d.map(y=>c.mul(y)))}return l},b.Gamma._cosetRepresentatives=function*(s){let d=yield*b.Gamma_1._cosetRepresentatives(s),l=[];for(let u=0;u<s;u++){yield;let c=new _(1,u,0,1);l.push(...d.map(y=>c.mul(y)))}return l};let m=new x(Math.cos(Math.PI/3),Math.sin(Math.PI/3));b.Domain1={corners:[$,m,new x(0,1),new x(-m.real,m.imag)],findCosetOf(s,d=100){if(s.imag<=0)return;let l=new _(1,0,0,1),u=s;for(var c=0;c<d;c++){if(u==$)return l.inv();var y=Math.floor(u.real+.5);if(l=new _(1,-y,0,1).mul(l),u=l.transform(s),u.abs2()>=1)return l.inv();l=new _(0,1,-1,0).mul(l),u=l.transform(s)}console.log("Max iterations in 'findMoebiousToFund' reached")}}})(ie||(ie={}));var g;(function(u){u[u.BEGIN=0]="BEGIN",u[u.MOVE=1]="MOVE",u[u.LINE=2]="LINE",u[u.QUADRATIC=3]="QUADRATIC",u[u.CUBIC=4]="CUBIC",u[u.ARC=5]="ARC",u[u.CLOSE=6]="CLOSE",u[u.STROKE=7]="STROKE",u[u.FILL=8]="FILL",u[u.TEXTNODE=9]="TEXTNODE",u[u.CH_LINEWIDTH=10]="CH_LINEWIDTH",u[u.CH_FONTSIZE=11]="CH_FONTSIZE",u[u.CH_STROKESTYLE=12]="CH_STROKESTYLE",u[u.CH_FILLSTYLE=13]="CH_FILLSTYLE"})(g||(g={}));var H=class{constructor(){this.data=[]}get strokeStyle(){throw new Error("Method not implemented.")}get fontSize(){throw new Error("Method not implemented.")}get lineWidth(){throw new Error("Method not implemented.")}get fillStyle(){throw new Error("Method not implemented.")}set strokeStyle(e){this.data.push(12,e)}set fillStyle(e){this.data.push(13,e)}set lineWidth(e){this.data.push(10,e)}set fontSize(e){this.data.push(11,e)}measureText(e){throw new Error("Method not implemented.")}textNode(e,t,n,r=0){return this.data.push(9,e,t,n,r),this}beginPath(){return this.data.push(0),this}moveTo(e,t){return this.data.push(1,e,t),this}lineTo(e,t){return this.data.push(2,e,t),this}quadraticTo(e,t,n,r){return this.data.push(3,e,t,n,r),this}cubicTo(e,t,n,r,a,o){return this.data.push(4,e,t,n,r,a,o),this}closePath(){return this.data.push(6),this}rect(e,t,n,r){return this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this}arc(e,t,n,r,a,o){return this.data.push(5,e,t,n,r,a,o),this}stroke(){return this.data.push(7),this}fill(){return this.data.push(8),this}fillAndStroke(){return this.fill(),this.stroke(),this}applyWith(e,t){let n=(t==null?void 0:t.scale)||1,[r,a]=(t==null?void 0:t.origin)||[0,0],o=this.data,h,m;for(m=0;m<this.data.length;m++)switch(h=o[m],h){case 0:e.beginPath();break;case 11:e.fontSize=o[++m];break;case 10:e.lineWidth=o[++m];break;case 12:e.strokeStyle=o[++m];break;case 13:e.fillStyle=o[++m];break;case 8:e.fill();break;case 2:e.lineTo(n*o[++m]+r,n*o[++m]+a);break;case 3:e.quadraticTo(n*o[++m]+r,n*o[++m]+a,n*o[++m]+r,n*o[++m]+a);break;case 4:e.cubicTo(n*o[++m]+r,n*o[++m]+a,n*o[++m]+r,n*o[++m]+a,n*o[++m]+r,n*o[++m]+a);break;case 5:e.arc(n*o[++m]+r,n*o[++m]+a,n*o[++m],o[++m],o[++m],o[++m]);break;case 1:e.moveTo(n*o[++m]+r,n*o[++m]+a);break;case 7:e.stroke();break;case 9:e.textNode(o[++m],n*o[++m]+r,n*o[++m]+a,o[++m]);break;case 6:e.closePath();break;default:let p=h}}};var R=class extends H{addVisibleBox(e,t,n,r){let{minX:a,minY:o,maxX:h,maxY:m}=this;this.minX=a===void 0?Math.min(e,n):Math.min(e,n,a),this.maxX=h===void 0?Math.max(e,n):Math.max(e,n,h),this.minY=o===void 0?Math.min(t,r):Math.min(t,r,o),this.maxY=m===void 0?Math.max(t,r):Math.max(t,r,m)}arc(e,t,n,r,a,o){return super.arc(e,t,n,r,a,o),console.warn("NOT IMPLEMENTED FOR SCALING!"),this}moveTo(e,t){return super.moveTo(e,t),this.addVisibleBox(e,t,e,t),this}lineTo(e,t){return super.lineTo(e,t),this.addVisibleBox(e,t,e,t),this}applyScaled(e,t,n,r){let a=(r==null?void 0:r.buffer)||0,{minX:o=0,maxX:h=0,minY:m=0,maxY:p=0}=this,b=Math.min((t-2*a)/(h-o),(n-2*a)/(p-m)),s=[.5*(t-b*(o+h)),.5*(n-b*(m+p))];super.applyWith(e,{scale:b,origin:s})}};function ve(i,e,t="text/plain"){let n=`data:${t};base64,${window.btoa(i)}`,r=document.createElement("a");r.setAttribute("download",e),r.href=n,r.click()}function ae(i,e){let{N:t,J:n,W:r}=e,{shadeTop:a="#0000FF33",shadeFront:o="#ffcc0033",shadeSide:h="#444444"}=e.color||{},m=Math.log(t/r)/n,p=[...new F(0,n+1)].map(l=>r*Math.exp(l*m)),b=1/4,s=(l,u,c)=>[l-c*b,t-(u-.8*c*b)];function d(l,[u,c,y]){let T="ff";i.fillStyle=o+T,i.beginPath(),i.moveTo(...s(l[u],l[c],l[y])).lineTo(...s(l[u-1],l[c],l[y])).lineTo(...s(l[u-1],l[c-1],l[y])).lineTo(...s(l[u],l[c-1],l[y])).closePath().fill().stroke(),i.fillStyle=a+T,i.beginPath(),i.moveTo(...s(l[u],l[c],l[y])).lineTo(...s(l[u-1],l[c],l[y])).lineTo(...s(l[u-1],l[c],l[y-1])).lineTo(...s(l[u],l[c],l[y-1])).closePath().fill().stroke(),i.fillStyle=h+T,i.beginPath(),i.moveTo(...s(l[u],l[c],l[y])).lineTo(...s(l[u],l[c],l[y-1])).lineTo(...s(l[u],l[c-1],l[y-1])).lineTo(...s(l[u],l[c-1],l[y])).closePath().fill().stroke()}i.lineWidth=1.5,i.strokeStyle="#000000",i.beginPath(),i.moveTo(...s(r,r,r)).lineTo(...s(t+(t-r)*.1,r,r)),i.moveTo(...s(r,r,r)).lineTo(...s(r,t+(t-r)*.1,r)),i.moveTo(...s(r,r,r)).lineTo(...s(r,r,t+(t-r)*.1)),i.stroke(),i.lineWidth=.75;for(let l=1;l<p.length;l++)for(let u=1;u<p.length-l+1;u++)d(p,[l,u,p.length+1-l-u])}function oe(i,e){let{N:t,J:n,W:r}=e,{fill:a="#0000FF33",error:o="#ffcc0033",gridLine:h="#444444",hypLine:m="#000000"}=e.color||{},p=Math.log(t/r)/n,b=[...new F(0,n+1)].map(y=>r*Math.exp(y*p));i.fillStyle=a,i.strokeStyle=h,i.lineWidth=1.5,i.beginPath(),i.moveTo(b[0],t-b[0]).lineTo(b[0],t-b[n]);for(var s=1;s<b.length;s++)i.lineTo(b[s-1],t-b[n-s]).lineTo(b[s],t-b[n-s]);i.lineTo(b[n],t-b[0]).closePath(),i.fill(),i.beginPath(),i.fillStyle=o,i.lineWidth=1.5,i.moveTo(b[0],t-b[n]);for(var s=1;s<b.length;s++)i.lineTo(b[s-1],t-b[n-s+1]).lineTo(b[s],t-b[n-s+1]);for(var s=n;s>0;s--)i.lineTo(b[s],t-b[n-s]).lineTo(b[s-1],t-b[n-s]);i.lineTo(b[0],t-b[n]),i.fill();let d;i.lineWidth=1,i.beginPath(),d=[b[1],t-b[n]],i.moveTo(r,t-r).lineTo(r,d[1]).lineTo(d[0],d[1]).lineTo(d[0],t-r),d=[b[n],t-b[1]],i.moveTo(r,t-r).lineTo(d[0],t-r).lineTo(d[0],d[1]).lineTo(r,d[1]);let l=n+1,u=2;for(var s=u;s<=l-u;s++)d=[b[s],t-b[l-s]],i.moveTo(r,d[1]).lineTo(d[0],d[1]).lineTo(d[0],t-r);i.stroke(),i.beginPath();let c=100;i.lineWidth=2,i.strokeStyle=m,i.moveTo(r,t-r);for(let y of[...new F(0,c+1)]){let T=Math.pow(t/r,y/c);i.lineTo(r*T,t-t/T)}i.closePath(),i.stroke()}window.customElements.define("hyperbola-app",Z({connected(i){let e={N:100,W:10,J:10,dim:"3D",color:{shadeTop:"#bbbbbb",shadeFront:"#555555",shadeSide:"#111111",hypLine:"#000000",gridLine:"#000000",fill:"#333333",error:"#999999"}};i.addLayer("draw",G({update(n,r){r.clearRect(0,0,n.width,n.height);let a=new R;e.dim=="2D"?oe(a,e):ae(a,e),a.applyScaled(new P(r),n.width,n.height,{buffer:10})}}));let t=i.addLayer("options",A());t.add("number",{label:"Cuts",onChange:n=>{e.J=n,i.update()},default:e.J}),t.add("radio",{label:"Dimension",values:[{name:"2D",label:"2D"},{name:"3D",label:"3D"}],default:e.dim,onChange:n=>{e.dim=n,i.update()}}),t.add("color",{label:"3D-top",onChange:n=>{e.color.shadeTop=n,i.update()},default:e.color.shadeTop}),t.add("color",{label:"3D-front",onChange:n=>{e.color.shadeFront=n,i.update()},default:e.color.shadeFront}),t.add("color",{label:"3D-side",onChange:n=>{e.color.shadeSide=n,i.update()},default:e.color.shadeSide}),t.add("color",{label:"2D-lower",onChange:n=>{e.color.fill=n,i.update()},default:e.color.fill}),t.add("color",{label:"2D-upper",onChange:n=>{e.color.error=n,i.update()},default:e.color.error}),t.add(V,i),t.add("multiButton",{label:"Export as",values:[{name:"SVG",label:"SVG"},{name:"TikZ",label:"TikZ"}],onClick(n){let r,a="Hyperbola",o;if(n=="SVG")r=new N(i.width,i.height),a+=".svg",o="image/svg+xml";else if(n=="TikZ")r=new I(i.width,i.height),a+=".tikz",o="text/plain";else throw new Error("Unknown format");let h=new R;e.dim=="2D"?oe(h,e):ae(h,e),h.applyScaled(r,i.width,i.height,{buffer:10}),ve(r.toFileString(),a,o)}})}}));})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibGlicmFyeS9zcmMvRG9tRWxlbWVudC50cyIsICJsaWJyYXJ5L3NyYy9jb21wb25lbnQvbGF5ZXJzL0NhbnZhcy50cyIsICJsaWJyYXJ5L3NyYy9jb21wb25lbnQvbGF5ZXJzL09wdGlvbnMudHN4IiwgImxpYnJhcnkvc3JjL2NvbXBvbmVudC9sYXllcnMvaW5kZXgudHMiLCAibGlicmFyeS9zcmMvcmVuZGVyZXIvQ2FudmFzLnRzIiwgImxpYnJhcnkvc3JjL1Vuc2FmZVhNTC50cyIsICJsaWJyYXJ5L3NyYy9yZW5kZXJlci9TVkcudHN4IiwgImxpYnJhcnkvc3JjL3JlbmRlcmVyL1Rpa1oudHMiLCAibGlicmFyeS9zcmMvcmVuZGVyZXIvaW5kZXgudHMiLCAibGlicmFyeS9zcmMvbW9kdWxlcy9Bc3luYy50cyIsICJsaWJyYXJ5L3NyYy9tb2R1bGVzL21hdGgvaW5kZXgudHMiLCAibGlicmFyeS9zcmMvcmVuZGVyZXIvQnVmZmVyLnRzIiwgImxpYnJhcnkvc3JjL3JlbmRlcmVyL0F1dG9TY2FsZS50cyIsICJsaWJyYXJ5L3NyYy9jb21wb25lbnQvSHlwZXJib2xhbWV0aG9kLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZnVuY3Rpb24gRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPihcbiAgbmFtZTogSyxcbiAgY2hpbGRyZW46IChzdHJpbmcgfCBOb2RlKVtdIHwgeyBfX2h0bWw6IHN0cmluZyB9ID0gW10sXG4gIGF0dHJzOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyO1xuICB9ID0ge30sXG4gIGV2ZW50czoge1xuICAgIFtrZXkgaW4ga2V5b2YgR2xvYmFsRXZlbnRIYW5kbGVyc10/OiBHbG9iYWxFdmVudEhhbmRsZXJzW2tleV07XG4gIH0gPSB7fVxuKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdIHtcbiAgbGV0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcblxuICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cnMpKVxuICAgIGVsLnNldEF0dHJpYnV0ZShrLCB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiA/IHYgOiB2ICsgXCJcIik7XG4gIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhldmVudHMpKSAoZWwgYXMgYW55KVtrXSA9IHY7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKVxuICAgIGZvciAodmFyIGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gXCJzdHJpbmdcIikgYyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGMpO1xuICAgICAgZWwuYXBwZW5kKGMpO1xuICAgIH1cbiAgZWxzZSBlbC5pbm5lckhUTUwgPSBjaGlsZHJlbi5fX2h0bWw7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gZGVlcENoaWxkcmVuKGVsOiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQsIGNoaWxkcmVuOiBhbnlbXSkge1xuICBmb3IgKHZhciBjIG9mIGNoaWxkcmVuKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIGRlZXBDaGlsZHJlbihlbCwgYyk7XG4gICAgZWxzZSBlbC5hcHBlbmQoYyBpbnN0YW5jZW9mIE5vZGUgPyBjIDogXCJcIiArIGMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqc3goXG4gIG5hbWU6IHN0cmluZyxcbiAgYXR0cnM6IGpzeC5KU1guSW50cmluc2ljRWxlbWVudHNbXCJcIl0sXG4gIC4uLmNoaWxkcmVuOiBhbnlbXVxuKTogSFRNTEVsZW1lbnQ7XG5leHBvcnQgZnVuY3Rpb24ganN4KFxuICBuYW1lOiBzdHJpbmcsXG4gIGF0dHJzOiBqc3guSlNYLkludHJpbnNpY0VsZW1lbnRzW1wiXCJdLFxuICAuLi5jaGlsZHJlbjogYW55W11cbik6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCB7XG4gIGlmIChuYW1lID09PSBqc3guRnJhZ21lbnQpIHtcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgZGVlcENoaWxkcmVuKGVsLCBjaGlsZHJlbik7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG4gIGF0dHJzID0gYXR0cnMgfHwge307XG5cbiAgaWYgKFwiX19odG1sXCIgaW4gYXR0cnMpIHtcbiAgICBlbC5pbm5lckhUTUwgPSBcIlwiICsgYXR0cnMuX19odG1sO1xuICAgIGRlbGV0ZSBhdHRycy5fX2h0bWw7XG4gIH1cblxuICBmb3IgKHZhciBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cnMpKSB7XG4gICAgaWYgKHR5cGVvZiB2ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIChlbCBhcyBhbnkpW2tdID0gdjtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGssIFwiXCIgKyB2KTtcbiAgICB9XG4gIH1cblxuICBkZWVwQ2hpbGRyZW4oZWwsIGNoaWxkcmVuKTtcbiAgcmV0dXJuIGVsO1xufVxuanN4LkZyYWdtZW50ID0gXCJcIjtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIGpzeC5KU1gge1xuICB0eXBlIEVsZW1lbnQgPSBIVE1MRWxlbWVudDtcbiAgdHlwZSBJbnRyaW5zaWNFbGVtZW50cyA9IHtcbiAgICBba2V5OiBzdHJpbmddOiB7XG4gICAgICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCAoKC4uLmFyZ3M6IGFueSkgPT4gYW55KSB8IHVuZGVmaW5lZDtcbiAgICB9ICYge1xuICAgICAgW2tleSBpbiBrZXlvZiBHbG9iYWxFdmVudEhhbmRsZXJzXT86XG4gICAgICAgIHwgR2xvYmFsRXZlbnRIYW5kbGVyc1trZXldXG4gICAgICAgIHwgc3RyaW5nXG4gICAgICAgIHwgbnVtYmVyO1xuICAgIH0gJiB7IF9faHRtbD86IHN0cmluZyB9O1xuICB9O1xufVxuIiwgImltcG9ydCB0eXBlIHsgTGF5ZXJlZENvbmZpZywgTGF5ZXJPYmplY3QgfSBmcm9tIFwiLi9cIjtcbmltcG9ydCAqIGFzIGRvbSBmcm9tIFwiQGxpYi9Eb21FbGVtZW50XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChvcHRpb25zOiB7XG4gIHVwZGF0ZTogKGNvbmZpZzogTGF5ZXJlZENvbmZpZywgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpID0+IHVua25vd247XG59KTogTGF5ZXJPYmplY3Q8SFRNTENhbnZhc0VsZW1lbnQ+IHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGUoY29uZmlnOiBMYXllcmVkQ29uZmlnLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIGlmIChcbiAgICAgICAgTWF0aC5mbG9vcihjb25maWcud2lkdGggKiBkcHIpICE9PSBjYW52YXMud2lkdGggfHxcbiAgICAgICAgTWF0aC5mbG9vcihjb25maWcuaGVpZ2h0ICogZHByKSAhPT0gY2FudmFzLmhlaWdodFxuICAgICAgKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IE1hdGguZmxvb3IoY29uZmlnLndpZHRoICogZHByKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IE1hdGguZmxvb3IoY29uZmlnLmhlaWdodCAqIGRwcik7XG4gICAgICB9XG4gICAgICBjdHguc2V0VHJhbnNmb3JtKGRwciwgMCwgMCwgZHByLCAwLCAwKTtcbiAgICAgIG9wdGlvbnMudXBkYXRlKGNvbmZpZywgY3R4KTtcbiAgICB9LFxuICAgIHJlc2l6ZWQoY29uZmlnOiBMYXllcmVkQ29uZmlnKSB7XG4gICAgICBjb25maWcudXBkYXRlKHRoaXMpO1xuICAgIH0sXG4gICAgY29ubmVjdGVkKGNvbmZpZzogTGF5ZXJlZENvbmZpZykge1xuICAgICAgbGV0IGNhbnZhcyA9IGRvbS5FbGVtZW50KFwiY2FudmFzXCIsIFtdLCB7IGNsYXNzOiBcImNhbnZhcy1sYXllclwiIH0pO1xuICAgICAgcmV0dXJuIHsgbm9kZXM6IGNhbnZhcyB9O1xuICAgIH0sXG4gIH07XG59XG4iLCAiLyoqIEBqc3gganN4ICovXG4vKiogQGpzeEZyYWcganN4LkZyYWdtZW50ICovXG5pbXBvcnQgeyBqc3ggfSBmcm9tIFwiQGxpYi9Eb21FbGVtZW50XCI7XG5pbXBvcnQgdHlwZSB7IExheWVyZWRDb25maWcsIExheWVyIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4vT3B0aW9ucy5jc3NcIjtcblxuY29uc3QgT1BUSU9OX1RZUEVTID0ge1xuICBzZWN0aW9uOiBmdW5jdGlvbiAobmFtZTogc3RyaW5nLCBvcHRpb25zPzogeyBsZXZlbD86IFwiaDFcIiB8IFwiaDJcIiB8IFwiaDNcIiB9KSB7XG4gICAgcmV0dXJuIHsgaW5wdXQ6IGpzeChvcHRpb25zPy5sZXZlbCA/PyBcImgyXCIsIHt9LCBuYW1lKSB9O1xuICB9LFxuICBudW1iZXI6IGZ1bmN0aW9uIChvcHRpb25zOiB7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBvbkNoYW5nZT86IChuOiBudW1iZXIpID0+IGFueTtcbiAgICBkZWZhdWx0PzogbnVtYmVyO1xuICB9KSB7XG4gICAgY29uc3QgY2hhbmdlZCA9IG9wdGlvbnMub25DaGFuZ2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiA8bGFiZWw+e29wdGlvbnMubGFiZWx9PC9sYWJlbD4sXG4gICAgICBpbnB1dDogKFxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICBvbmlucHV0PXsoZXY6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjaGFuZ2VkPy4ocGFyc2VJbnQoKGV2IGFzIGFueSkudGFyZ2V0LnZhbHVlKSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICB7Li4uKG9wdGlvbnMuZGVmYXVsdCA/IHsgdmFsdWU6IG9wdGlvbnMuZGVmYXVsdCB9IDoge30pfVxuICAgICAgICA+PC9pbnB1dD5cbiAgICAgICksXG4gICAgfTtcbiAgfSxcbiAgY29sb3I6IGZ1bmN0aW9uIChvcHRpb25zOiB7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBvbkNoYW5nZT86IChuOiBzdHJpbmcpID0+IGFueTtcbiAgICBkZWZhdWx0Pzogc3RyaW5nO1xuICB9KSB7XG4gICAgbGV0IGNoYW5nZWQgPSBvcHRpb25zLm9uQ2hhbmdlO1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogPGxhYmVsPntvcHRpb25zLmxhYmVsfTwvbGFiZWw+LFxuICAgICAgaW5wdXQ6IChcbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cImNvbG9yXCJcbiAgICAgICAgICBvbmlucHV0PXsoZXY6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjaGFuZ2VkPy4oKGV2IGFzIGFueSkudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIHsuLi4ob3B0aW9ucy5kZWZhdWx0ID8geyB2YWx1ZTogb3B0aW9ucy5kZWZhdWx0IH0gOiB7fSl9XG4gICAgICAgID48L2lucHV0PlxuICAgICAgKSxcbiAgICB9O1xuICB9LFxuICByYWRpbzogZnVuY3Rpb24gKG9wdGlvbnM6IHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIHZhbHVlczogeyBuYW1lOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfCBOb2RlIH1bXTtcbiAgICBvbkNoYW5nZT86IChuYW1lOiBzdHJpbmcpID0+IGFueTtcbiAgICBkZWZhdWx0Pzogc3RyaW5nO1xuICB9KSB7XG4gICAgbGV0IGNoYW5nZWQgPSBvcHRpb25zLm9uQ2hhbmdlO1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogPGxhYmVsPntvcHRpb25zLmxhYmVsfTwvbGFiZWw+LFxuXG4gICAgICBpbnB1dDogKFxuICAgICAgICA8PlxuICAgICAgICAgIHsuLi5vcHRpb25zLnZhbHVlcy5tYXAoKG9wdCkgPT4gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgIHtvcHQubGFiZWx9XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgbmFtZT17b3B0aW9ucy5sYWJlbH1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtvcHQubmFtZX1cbiAgICAgICAgICAgICAgICAgIG9uaW5wdXQ9eyhldjogRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZD8uKChldiBhcyBhbnkpLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgey4uLihvcHQubmFtZSA9PT0gb3B0aW9ucy5kZWZhdWx0ID8geyBjaGVja2VkOiBcIlwiIH0gOiB7fSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxZW07XCIgLz5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkpfVxuICAgICAgICA8Lz5cbiAgICAgICksXG4gICAgfTtcbiAgfSxcbiAgbXVsdGlCdXR0b246IGZ1bmN0aW9uIChvcHRpb25zOiB7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICB2YWx1ZXM6IHsgbmFtZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIHwgTm9kZSB9W107XG4gICAgb25DbGljaz86IChuYW1lOiBzdHJpbmcpID0+IGFueTtcbiAgICBkZWZhdWx0Pzogc3RyaW5nO1xuICB9KSB7XG4gICAgbGV0IGNsaWNrZWQgPSBvcHRpb25zLm9uQ2xpY2s7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiA8bGFiZWw+e29wdGlvbnMubGFiZWx9PC9sYWJlbD4sXG5cbiAgICAgIGlucHV0OiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgey4uLm9wdGlvbnMudmFsdWVzLm1hcCgob3B0KSA9PiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHZhbHVlPXtvcHQubmFtZX1cbiAgICAgICAgICAgICAgb25jbGljaz17KGV2OiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsaWNrZWQ/LigoZXYgYXMgYW55KS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7b3B0LmxhYmVsfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvPlxuICAgICAgKSxcbiAgICB9O1xuICB9LFxuICBjdXN0b206IGZ1bmN0aW9uIChvcHRpb25zOiB7IGxhYmVsPzogTm9kZSB8IHN0cmluZzsgaW5wdXQ/OiBOb2RlIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmxhYmVsID09PSBcInN0cmluZ1wiID8gKFxuICAgICAgICAgIDxzcGFuPntvcHRpb25zLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICBvcHRpb25zLmxhYmVsXG4gICAgICAgICksXG4gICAgICBpbnB1dDogb3B0aW9ucy5pbnB1dCxcbiAgICB9O1xuICB9LFxufTtcblxudHlwZSBPcHRpb25zID0ge1xuICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgYWRkT3B0aW9uKG9wdGlvbjogeyBsYWJlbDogTm9kZTsgaW5wdXQ6IE5vZGUgfSk6IHVua25vd247XG4gIGFkZDxLIGV4dGVuZHMga2V5b2YgdHlwZW9mIE9QVElPTl9UWVBFUz4oXG4gICAgb3B0aW9uOiB7IHR5cGU6IEsgfSAmIFBhcmFtZXRlcnM8dHlwZW9mIE9QVElPTl9UWVBFU1tLXT5bMF1cbiAgKTogXCJoYW5kbGVcIiBleHRlbmRzIGtleW9mIFJldHVyblR5cGU8dHlwZW9mIE9QVElPTl9UWVBFU1tLXT5cbiAgICA/IFJldHVyblR5cGU8dHlwZW9mIE9QVElPTl9UWVBFU1tLXT5bXCJoYW5kbGVcIl1cbiAgICA6IHZvaWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKTogTGF5ZXI8dW5kZWZpbmVkLCBPcHRpb25QYW5lPiB7XG4gIHJldHVybiAoY29uZmlnOiBMYXllcmVkQ29uZmlnKSA9PiB7XG4gICAgbGV0IG9wdGlvbnNGcmFtZSA9IChcbiAgICAgIDxkaXYgY2xhc3M9e3N0eWxlcy5jbGFzcy5jb250YWluZXJ9PlxuICAgICAgICA8aDE+T3B0aW9uczwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuXG4gICAgbGV0IG9wdGlvbnNCdXR0b24gPSAoXG4gICAgICA8YnV0dG9uXG4gICAgICAgIGFyaWFsLWxhYmVsPVwiT3B0aW9ucyBUb2dnbGVcIlxuICAgICAgICBjbGFzcz17c3R5bGVzLmNsYXNzLmJ1dHRvbn1cbiAgICAgICAgdGl0bGU9XCJTaG93IGFsbCBvcHRpb25zXCJcbiAgICAgICAgX19odG1sPXtgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCIke3N0eWxlcy5jbGFzcy5pY29ufVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHlsZT1cImZpbGw6Y3VycmVudENvbG9yO1wiPjxwYXRoIGQ9XCJNMTkuOSwxMy4zQzIwLDEyLjgsMjAsMTIuNCwyMCwxMnMwLTAuOC0wLjEtMS4zTDIxLjgsOWwtMi4zLTRsLTIuNCwwLjhjLTAuNy0wLjUtMS40LTEtMi4yLTEuM0wxNC4zLDJIOS43TDkuMiw0LjVcdEM4LjMsNC44LDcuNiw1LjMsNi45LDUuOEw0LjUsNUwyLjIsOWwxLjksMS43QzQsMTEuMiw0LDExLjYsNCwxMmMwLDAuNCwwLDAuOCwwLjEsMS4zTDIuMiwxNWwyLjMsNGwyLjQtMC44bDAsMFx0YzAuNywwLjUsMS40LDEsMi4yLDEuM0w5LjcsMjJoNC43bDAuNS0yLjVjMC44LTAuMywxLjYtMC43LDIuMi0xLjNsMCwwbDIuNCwwLjhsMi4zLTRMMTkuOSwxMy4zTDE5LjksMTMuM3ogTTEyLDE2XHRjLTIuMiwwLTQtMS44LTQtNGMwLTIuMiwxLjgtNCw0LTRjMi4yLDAsNCwxLjgsNCw0QzE2LDE0LjIsMTQuMiwxNiwxMiwxNnpcIj48L3BhdGg+PC9zdmc+PHN2ZyBjbGFzcz1cIiR7c3R5bGVzLmNsYXNzLmljb25feH1cIiB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIjAgMCA0NjAuNzggNDYwLjc4XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJtMjg1LjA4IDIzMC40IDE3MS4xNC0xNzEuMTNjNi4wNzYtNi4wNzcgNi4wNzYtMTUuOTExIDAtMjEuOTg2bC0zMi43MDctMzIuNzE5Yy0yLjkxMy0yLjkxMS02Ljg2Ni00LjU1LTEwLjk5Mi00LjU1LTQuMTI3IDAtOC4wOCAxLjYzOS0xMC45OTMgNC41NWwtMTcxLjE0IDE3MS4xNC0xNzEuMTQtMTcxLjE0Yy0yLjkxMy0yLjkxMS02Ljg2Ni00LjU1LTEwLjk5My00LjU1LTQuMTI2IDAtOC4wOCAxLjYzOS0xMC45OTIgNC41NWwtMzIuNzA3IDMyLjcxOWMtNi4wNzcgNi4wNzUtNi4wNzcgMTUuOTA5IDAgMjEuOTg2bDE3MS4xNCAxNzEuMTMtMTcxLjEyIDE3MS4xMWMtNi4wNzQgNi4wNzctNi4wNzQgMTUuOTExIDAgMjEuOTg2bDMyLjcwOSAzMi43MTljMi45MTEgMi45MTEgNi44NjUgNC41NSAxMC45OTIgNC41NXM4LjA4LTEuNjM5IDEwLjk5NC00LjU1bDE3MS4xMi0xNzEuMTIgMTcxLjEyIDE3MS4xMmMyLjkxMyAyLjkxMSA2Ljg2NiA0LjU1IDEwLjk5MyA0LjU1IDQuMTI4IDAgOC4wODEtMS42MzkgMTAuOTkyLTQuNTVsMzIuNzA5LTMyLjcxOWM2LjA3NC02LjA3NSA2LjA3NC0xNS45MDkgMC0yMS45ODZsLTE3MS4xMi0xNzEuMTF6XCIvPjwvc3ZnPmB9XG4gICAgICAgIG9uY2xpY2s9eygpID0+IHtcbiAgICAgICAgICBsZXQgaGlkZGVuID0gb3B0aW9uc0ZyYW1lLnN0eWxlLmRpc3BsYXkgPT0gXCJibG9ja1wiO1xuICAgICAgICAgIG9wdGlvbnNGcmFtZS5zdHlsZS5kaXNwbGF5ID0gaGlkZGVuID8gXCJcIiA6IFwiYmxvY2tcIjtcbiAgICAgICAgICBpZiAoaGlkZGVuKSBvcHRpb25zQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgICAgZWxzZSBvcHRpb25zQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgIH19XG4gICAgICA+PC9idXR0b24+XG4gICAgKTtcblxuICAgIGxldCBwYW5lID0gbmV3IE9wdGlvblBhbmUoKTtcbiAgICBwYW5lLmNvbnRhaW5lci5jbGFzc05hbWUgPSBzdHlsZXMuY2xhc3MubGlzdDtcbiAgICBvcHRpb25zRnJhbWUuYXBwZW5kKHBhbmUuY29udGFpbmVyKTtcblxuICAgIGNvbmZpZy5hdHRhY2hUb1NoYWRkb3coXG4gICAgICA8c3R5bGUgX19odG1sPXtzdHlsZXMuY3NzfSAvPixcbiAgICAgIG9wdGlvbnNGcmFtZSxcbiAgICAgIG9wdGlvbnNCdXR0b25cbiAgICApO1xuXG4gICAgcmV0dXJuIHsgbm9kZXM6IHVuZGVmaW5lZCwgaGFuZGxlOiBwYW5lIH07XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYW51YWxTaXppbmcoY29uZmlnOiBMYXllcmVkQ29uZmlnKToge1xuICBsYWJlbDogTm9kZTtcbiAgaW5wdXQ6IE5vZGU7XG59IHtcbiAgbGV0IHdpZHRoSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSAoXG4gICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0eWxlPVwid2lkdGg6NmVtO1wiIC8+XG4gICAgKSBhcyBhbnksXG4gICAgaGVpZ2h0SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSAoXG4gICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0eWxlPVwid2lkdGg6NmVtO1wiIC8+XG4gICAgKSBhcyBhbnk7XG4gIGxldCBjdXJyZW50U2l6aW5nOiBIVE1MRWxlbWVudCA9IDxzcGFuPmF1dG8gc2l6aW5nPC9zcGFuPjtcblxuICBsZXQgZml4ZWRTaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgaWYgKGNvbmZpZy5jb250YWluZXJFbGVtZW50LnN0eWxlLndpZHRoID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCBwYXJlbnQgPSBjb25maWcuaG9zdEVsZW1lbnQ7XG4gICAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgICAgbGV0IHsgY2xpZW50V2lkdGg6IGN3LCBjbGllbnRIZWlnaHQ6IGNoIH0gPSBjb25maWcuY29udGFpbmVyRWxlbWVudDtcbiAgICAgIGxldCB7IGNsaWVudFdpZHRoOiB3dywgY2xpZW50SGVpZ2h0OiB3aCB9ID0gcGFyZW50O1xuICAgICAgbGV0IHNjYWxlID0gTWF0aC5taW4od3cgLyBjdywgd2ggLyBjaCk7XG4gICAgICBjb25maWcuY29udGFpbmVyRWxlbWVudC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInRvcCBsZWZ0XCI7XG4gICAgICBjb25maWcuY29udGFpbmVyRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7XG4gICAgICAgICh3dyAtIGN3ICogc2NhbGUpIC8gMlxuICAgICAgfXB4LCAkeyh3aCAtIGNoICogc2NhbGUpIC8gMn1weCkgc2NhbGUoJHtzY2FsZX0sICR7c2NhbGV9KWA7XG4gICAgfSksXG4gICAgb2JzZXJ2aW5nID0gZmFsc2U7XG5cbiAgbGV0IHNldFNpemUgPSAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHtcbiAgICBsZXQgYXV0byA9IHdpZHRoIDwgMCB8fCBoZWlnaHQgPCAwIHx8IGlzTmFOKHdpZHRoKSB8fCBpc05hTihoZWlnaHQpO1xuXG4gICAgLy8gT25seSBvYnNlcnZlIHdoZW4gdXNpbmcgZml4ZWQgd2lkdGggLyBoZWlnaHRcbiAgICBpZiAoYXV0byAmJiBvYnNlcnZpbmcpIHtcbiAgICAgIGZpeGVkU2l6ZU9ic2VydmVyLnVub2JzZXJ2ZShjb25maWcuY29udGFpbmVyRWxlbWVudCk7XG4gICAgICBmaXhlZFNpemVPYnNlcnZlci51bm9ic2VydmUoY29uZmlnLmhvc3RFbGVtZW50KTtcbiAgICAgIG9ic2VydmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIW9ic2VydmluZyAmJiAhYXV0bykge1xuICAgICAgZml4ZWRTaXplT2JzZXJ2ZXIub2JzZXJ2ZShjb25maWcuY29udGFpbmVyRWxlbWVudCk7XG4gICAgICBmaXhlZFNpemVPYnNlcnZlci5vYnNlcnZlKGNvbmZpZy5ob3N0RWxlbWVudCk7XG4gICAgICBvYnNlcnZpbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChhdXRvKSB7XG4gICAgICBjb25maWcuY29udGFpbmVyRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiXCI7XG4gICAgICBjb25maWcuY29udGFpbmVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgY29uZmlnLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUub3V0bGluZSA9IFwiXCI7XG4gICAgICBjb25maWcuY29udGFpbmVyRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuICAgICAgY29uZmlnLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gXCJcIjtcblxuICAgICAgY3VycmVudFNpemluZy50ZXh0Q29udGVudCA9IFwiYXV0byBzaXppbmdcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICAgIGNvbmZpZy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgIGNvbmZpZy5jb250YWluZXJFbGVtZW50LnN0eWxlLm91dGxpbmUgPSBcIjFweCBkYXNoZWQgYmxhY2tcIjtcblxuICAgICAgY3VycmVudFNpemluZy50ZXh0Q29udGVudCA9IHdpZHRoICsgXCIgeCBcIiArIGhlaWdodDtcbiAgICB9XG5cbiAgICAoZGlhbG9nIGFzIGFueSkuY2xvc2UoKTtcbiAgfTtcblxuICBsZXQgZGlhbG9nOiBIVE1MRGlhbG9nRWxlbWVudCA9IChcbiAgICA8ZGlhbG9nPlxuICAgICAgPGZvcm1cbiAgICAgICAgb25zdWJtaXQ9eygpID0+IHtcbiAgICAgICAgICBzZXRTaXplKHBhcnNlSW50KHdpZHRoSW5wdXQudmFsdWUpLCBwYXJzZUludChoZWlnaHRJbnB1dC52YWx1ZSkpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPHA+Q2hvb3NlIG5ldyBzaXplOjwvcD5cbiAgICAgICAge3dpZHRoSW5wdXR9XG4gICAgICAgIHtcIiB4IFwifVxuICAgICAgICB7aGVpZ2h0SW5wdXR9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiQXBwbHlcIiAvPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICB2YWx1ZT1cIlJlc2V0XCJcbiAgICAgICAgICBvbmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRTaXplKC0xLCAtMSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2RpYWxvZz5cbiAgKSBhcyBhbnk7XG5cbiAgbGV0IGlucHV0czogSFRNTEVsZW1lbnQsIGF1dG86IEhUTUxFbGVtZW50O1xuXG4gIGlucHV0cyA9IChcbiAgICA8c3Bhbj5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgdmFsdWU9XCJDaGFuZ2VcIlxuICAgICAgICBvbmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgKGRpYWxvZyBhcyBhbnkpLnNob3dNb2RhbCgpO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIHtkaWFsb2d9XG4gICAgPC9zcGFuPlxuICApO1xuXG4gIHJldHVybiB7XG4gICAgbGFiZWw6IDxzcGFuPkNhbnZhcyBzaXplICh7Y3VycmVudFNpemluZ30pPC9zcGFuPixcbiAgICBpbnB1dDogaW5wdXRzLFxuICB9O1xufVxuXG5leHBvcnQgdHlwZSBPcHRpb248SyBleHRlbmRzIGtleW9mIHR5cGVvZiBPUFRJT05fVFlQRVM+ID0gW1xuICB0eXBlOiBLLFxuICAuLi5hcmdzOiBQYXJhbWV0ZXJzPHR5cGVvZiBPUFRJT05fVFlQRVNbS10+XG5dO1xuXG50eXBlIE9wdGlvblJldHVybjxGIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiB7IFtrZXk6IHN0cmluZ106IGFueSB9PiA9XG4gIFwiaGFuZGxlXCIgZXh0ZW5kcyBrZXlvZiBSZXR1cm5UeXBlPEY+ID8gUmV0dXJuVHlwZTxGPltcImhhbmRsZVwiXSA6IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBPcHRpb25QYW5lIHtcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudCA9ICg8ZGl2PjwvZGl2Pik7XG5cbiAgYWRkPEsgZXh0ZW5kcyBrZXlvZiB0eXBlb2YgT1BUSU9OX1RZUEVTPihcbiAgICBhcmdzOiBbdHlwZTogSywgLi4uYXJnczogUGFyYW1ldGVyczx0eXBlb2YgT1BUSU9OX1RZUEVTW0tdPl1cbiAgKTogT3B0aW9uUmV0dXJuPHR5cGVvZiBPUFRJT05fVFlQRVNbS10+O1xuXG4gIGFkZDxLIGV4dGVuZHMga2V5b2YgdHlwZW9mIE9QVElPTl9UWVBFUz4oXG4gICAgdHlwZTogSyxcbiAgICAuLi5hcmdzOiBQYXJhbWV0ZXJzPHR5cGVvZiBPUFRJT05fVFlQRVNbS10+XG4gICk6IE9wdGlvblJldHVybjx0eXBlb2YgT1BUSU9OX1RZUEVTW0tdPjtcblxuICBhZGQ8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbiAgICBmYWN0b3J5OiBGLFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rj5cbiAgKTogT3B0aW9uUmV0dXJuPEY+O1xuXG4gIGFkZDxGIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICAgIGFyZ3M6IFtmYWN0b3J5OiBGLCAuLi5hcmdzOiBQYXJhbWV0ZXJzPEY+XVxuICApOiBPcHRpb25SZXR1cm48Rj47XG5cbiAgYWRkKHR5cGVPckZhY3Rvcnk6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGVPckZhY3RvcnkpKSB7XG4gICAgICBhcmdzID0gdHlwZU9yRmFjdG9yeS5zbGljZSgxKTtcbiAgICAgIHR5cGVPckZhY3RvcnkgPSB0eXBlT3JGYWN0b3J5WzBdO1xuICAgIH1cbiAgICBsZXQgZmFjdG9yeTogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkgPVxuICAgICAgdHlwZW9mIHR5cGVPckZhY3RvcnkgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IHR5cGVPckZhY3RvcnlcbiAgICAgICAgOiAoT1BUSU9OX1RZUEVTIGFzIGFueSlbdHlwZU9yRmFjdG9yeV07XG4gICAgdmFyIG9wdCA9IGZhY3RvcnkoLi4uYXJncyk7XG4gICAgY29uc29sZS5sb2cob3B0KTtcbiAgICB0aGlzLmFkZE9wdGlvbihvcHQpO1xuICAgIGlmIChcImhhbmRsZVwiIGluIG9wdCkgcmV0dXJuIChvcHQgYXMgYW55KS5oYW5kbGU7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCBhcyBhbnk7XG4gIH1cblxuICBhZGRPcHRpb24ob3B0aW9uOiB7IGxhYmVsPzogTm9kZTsgaW5wdXQ/OiBOb2RlIH0pIHtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChcbiAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOiAxMHB4O1wiPlxuICAgICAgICB7b3B0aW9uLmxhYmVsID8gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Yj57b3B0aW9uLmxhYmVsfTo8L2I+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgW11cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdj57b3B0aW9uLmlucHV0fTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCAqIGFzIGRvbSBmcm9tIFwiQGxpYi9Eb21FbGVtZW50XCI7XG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL2luZGV4LmNzc1wiO1xuXG5leHBvcnQgdHlwZSBMYXllckhhbmRsZXIgPSB7XG4gIC8qKlxuICAgKiBTZXR1cCBmb3IgdGhlIExheWVyZWRFbGVtZW50XG4gICAqL1xuICBjb25uZWN0ZWQ/OiAoY29uZmlnOiBMYXllcmVkQ29uZmlnKSA9PiBhbnk7XG4gIGRpc2Nvbm5lY3RlZD86IChjb25maWc6IExheWVyZWRDb25maWcpID0+IGFueTtcbiAgcmVzaXplZD86IChjb25maWc6IExheWVyZWRDb25maWcpID0+IGFueTtcbn07XG5cbi8qKlxuICogQ29uZmlnIE9iamVjdCBmb3IgYSBMYXllcmVkRWxlbWVudC5cbiAqL1xuZXhwb3J0IHR5cGUgTGF5ZXJlZENvbmZpZyA9IHtcbiAgLyoqIFRoZSBjdXJyZW50IHdpZHRoIGluIENTU1BpeGVscyAqL1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICAvKiogVGhlIGN1cnJlbnQgaGVpZ2h0IGluIENTU1BpeGVscyAqL1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqIFRoZSBlbGVtZW50IHRoYXQgY29udGFpbnMgYWxsIGxheWVycyAqL1xuICByZWFkb25seSBjb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgLyoqIFRoZSB3ZWJjb21wb25lbnQgaG9zdCBlbGVtZW50ICovXG4gIHJlYWRvbmx5IGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgLyoqIFJlZHJhdyBhIHNpbmdsZSBsYXllci4gSW1wcm92ZWQgcGVyZm9ybWFuY2Ugd2hlbiB1c2luZyBzdHJpbmcuICovXG4gIHVwZGF0ZShsYXllcj86IHN0cmluZyB8IExheWVyT2JqZWN0PGFueT4pOiB1bmtub3duO1xuICAvKiogQWRkIENTUyB0byB0aGUgc3R5bGVzaGVldCBpbiB0aGUgc2hhZGRvdyBkb20gKi9cbiAgYWRkU3R5bGVzKGNzczogc3RyaW5nKTogdW5rbm93bjtcbiAgLyoqIEFkZCBhIGxheWVyIHRvIHRoZSBlbGVtZW50LiAqL1xuICBhZGRMYXllcihuYW1lOiBzdHJpbmcsIGxheWVyOiBOb2RlKTogdW5rbm93bjtcbiAgYWRkTGF5ZXI8Tz4obmFtZTogc3RyaW5nLCBsYXllcjogTGF5ZXI8YW55LCBPPik6IExheWVySGFuZGxlPE8+O1xuICAvKiogQXR0YWNoIGEgbm9kZSBkaXJlY3RseSB0byB0aGUgc2hhZGRvdyBkb20gKi9cbiAgYXR0YWNoVG9TaGFkZG93KC4uLm5vZGU6IE5vZGVbXSk6IHVua25vd247XG59O1xuXG4vKipcbiAqIE86IFRoZSBmaWVsZHMgdGhhdCB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBMYXllckhhbmRsZVxuICogTjogVHlwZSBvZiBub2RlcyB0byBhdHRhY2hcbiAqL1xuZXhwb3J0IHR5cGUgTGF5ZXJPYmplY3Q8XG4gIE4gZXh0ZW5kcyBOb2RlIHwgTm9kZVtdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBPID0gdW5kZWZpbmVkXG4+ID0ge1xuICBjb25uZWN0ZWQ6IChcbiAgICBjb25maWc6IExheWVyZWRDb25maWdcbiAgKSA9PiBOIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgPyBPIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICA/IHt9XG4gICAgICA6IHsgaGFuZGxlOiBPIH1cbiAgICA6IE8gZXh0ZW5kcyB1bmRlZmluZWRcbiAgICA/IHsgbm9kZXM6IE4gfVxuICAgIDogeyBub2RlczogTjsgaGFuZGxlOiBPIH07XG4gIGRpc2Nvbm5lY3RlZD86IChjb25maWc6IExheWVyZWRDb25maWcpID0+IHVua25vd247XG5cbiAgdXBkYXRlPzogKGNvbmZpZzogTGF5ZXJlZENvbmZpZywgbm9kZXM6IE4pID0+IHVua25vd247XG4gIHJlc2l6ZWQ/OiAoY29uZmlnOiBMYXllcmVkQ29uZmlnLCBub2RlczogTikgPT4gdW5rbm93bjtcbn07XG5leHBvcnQgdHlwZSBMYXllcjxOIGV4dGVuZHMgTm9kZSB8IE5vZGVbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCwgTyA9IHt9PiA9XG4gIHwgKChcbiAgICAgIGNvbmZpZzogTGF5ZXJlZENvbmZpZ1xuICAgICkgPT4gTiBleHRlbmRzIHVuZGVmaW5lZFxuICAgICAgPyBPIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICAgID8ge31cbiAgICAgICAgOiB7IGhhbmRsZTogTyB9XG4gICAgICA6IE8gZXh0ZW5kcyB1bmRlZmluZWRcbiAgICAgID8geyBub2RlczogTiB9XG4gICAgICA6IHsgbm9kZXM6IE47IGhhbmRsZTogTyB9KVxuICB8IExheWVyT2JqZWN0PE4sIE8+O1xuXG4vKiogVGhlIGhhbmRsZSByZXR1cm5lZCBieSBhZGRMYXllciAqL1xuZXhwb3J0IHR5cGUgTGF5ZXJIYW5kbGU8Tz4gPSB7XG4gIFtOYW1lIGluIEV4Y2x1ZGU8a2V5b2YgTywgXCJub2Rlc1wiIHwgXCJ1cGRhdGVcIj5dOiBPW05hbWVdO1xufSAmIHsgdXBkYXRlKCk6IHVua25vd24gfTtcblxuZXhwb3J0IHsgZGVmYXVsdCBhcyBDYW52YXMgfSBmcm9tIFwiLi9DYW52YXNcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgT3B0aW9ucyB9IGZyb20gXCIuL09wdGlvbnNcIjtcblxuYWJzdHJhY3QgY2xhc3MgTGF5ZXJlZEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIC8qKiBDb250YWluZXIgZm9yIHRoZSBjYW52YXNlcyAqL1xuICBwcml2YXRlIHNoYWRvdzogU2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHtcbiAgICBtb2RlOiBcIm9wZW5cIixcbiAgfSk7XG4gIHByaXZhdGUgY2xlYW51cDogKCgpID0+IGFueSlbXSA9IFtdO1xuICBhYnN0cmFjdCBsYXllckhhbmRsZXI6IExheWVySGFuZGxlcjtcblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25zdCBzaGFkb3cgPSB0aGlzLnNoYWRvdztcbiAgICBzaGFkb3cuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGNvbnN0IHN0eWxlID0gZG9tLkVsZW1lbnQoXCJzdHlsZVwiLCBbc3R5bGVzLmNzc10pO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvbS5FbGVtZW50KFwiZGl2XCIsIFtdLCB7XG4gICAgICBjbGFzczogc3R5bGVzLmNsYXNzLmNvbnRhaW5lcixcbiAgICB9KTtcbiAgICBjb25zdCByZXNpemVPYnMgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgdGhpcy5sYXllckhhbmRsZXIucmVzaXplZD8uKGNvbmZpZyk7XG4gICAgICBmb3IgKHZhciBsYXllciBvZiBsYXllcnMudmFsdWVzKCkpXG4gICAgICAgIGxheWVyLmxheWVyPy5yZXNpemVkPy4oY29uZmlnLCBsYXllci5ub2Rlcyk7XG4gICAgfSk7XG4gICAgcmVzaXplT2JzLm9ic2VydmUoY29udGFpbmVyKTtcbiAgICBzaGFkb3cuYXBwZW5kKHN0eWxlLCBjb250YWluZXIpO1xuXG4gICAgY29uc3QgbGF5ZXJzOiBNYXA8XG4gICAgICBzdHJpbmcsXG4gICAgICB7IG5vZGVzPzogTm9kZSB8IE5vZGVbXTsgbGF5ZXI/OiBMYXllck9iamVjdDxhbnksIGFueT47IHVwZGF0ZTogYm9vbGVhbiB9XG4gICAgPiA9IG5ldyBNYXAoKTtcblxuICAgIC8qKiBXaGVuIGNoYW5naW5nIGZyb20gMCBhbiBhbmltYXRpb24gZnJhbWVcbiAgICAgKiBmb3IgdXBkYXRlTGF5ZXJzIG5lZWRzIHRvIGJlIHNjaGVkdWxlZFxuICAgICAqIDAgbm8gdXBkYXRlcywgMSB1cGRhdGUgc29tZSBsYXllcnMsIDIgdXBkYXRlIGFsbFxuICAgICAqL1xuICAgIGxldCB1cGRhdGVTdGF0ZTogMCB8IDEgfCAyID0gMDtcbiAgICBjb25zdCB1cGRhdGVMYXllcnMgPSAoKSA9PiB7XG4gICAgICBsZXQgYWxsID0gdXBkYXRlU3RhdGUgPT09IDI7XG4gICAgICB1cGRhdGVTdGF0ZSA9IDA7XG4gICAgICBmb3IgKHZhciBsYXllciBvZiBsYXllcnMudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKGFsbCB8fCBsYXllci51cGRhdGUpXG4gICAgICAgICAgbGF5ZXIubGF5ZXI/LnVwZGF0ZT8uKGNvbmZpZywgbGF5ZXIubm9kZXMgYXMgYW55KTtcbiAgICAgICAgbGF5ZXIudXBkYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGNvbmZpZzogTGF5ZXJlZENvbmZpZyA9IHtcbiAgICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgIH0sXG4gICAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgIH0sXG4gICAgICBjb250YWluZXJFbGVtZW50OiBjb250YWluZXIsXG4gICAgICBob3N0RWxlbWVudDogdGhpcyxcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGxheWVyPzogc3RyaW5nIHwgTGF5ZXJPYmplY3Q8YW55Pik6IHVua25vd24ge1xuICAgICAgICBpZiAodXBkYXRlU3RhdGUgPT09IDIpIHJldHVybjtcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlID09PSAwKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlTGF5ZXJzKTtcbiAgICAgICAgaWYgKGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVTdGF0ZSA9IDI7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGF5ZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB1cGRhdGVTdGF0ZSA9IDE7XG4gICAgICAgICAgbGV0IGwgPSBsYXllcnMuZ2V0KGxheWVyKTtcbiAgICAgICAgICBpZiAobCkgbC51cGRhdGUgPSB0cnVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBsIG9mIGxheWVycy52YWx1ZXMoKSkge1xuICAgICAgICAgIGlmIChsYXllciA9PT0gbC5sYXllcikgbC51cGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWRkU3R5bGVzOiBmdW5jdGlvbiAoY3NzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgc3R5bGUuYXBwZW5kKGNzcyk7XG4gICAgICB9LFxuICAgICAgYWRkTGF5ZXI6IGZ1bmN0aW9uIDxPPihuYW1lOiBzdHJpbmcsIGxheWVyOiBOb2RlIHwgTGF5ZXI8YW55LCBPPik6IGFueSB7XG4gICAgICAgIC8vIE1hbnVhbGx5IGNoZWNrIHRoYXQgcmV0dXJuIHR5cGUgaXMgY29ycmVjdFxuICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxheWVyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGF5ZXJPYmplY3Q6IHVuZGVmaW5lZCB8IExheWVyT2JqZWN0PGFueSwgYW55PixcbiAgICAgICAgICBpbnN0YW5jZTogeyBub2Rlcz86IE5vZGUgfCBOb2RlW107IGhhbmRsZT86IE8gfTtcbiAgICAgICAgaWYgKHR5cGVvZiBsYXllciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgaW5zdGFuY2UgPSBsYXllcihjb25maWcpO1xuICAgICAgICAgIGxheWVyT2JqZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluc3RhbmNlID0gbGF5ZXIuY29ubmVjdGVkKGNvbmZpZyk7XG4gICAgICAgICAgbGF5ZXJPYmplY3QgPSBsYXllcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBub2RlcyA9IGluc3RhbmNlLm5vZGVzO1xuICAgICAgICBpZiAobm9kZXMpIHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub2RlcykpIGNvbnRhaW5lci5hcHBlbmQoLi4ubm9kZXMpO1xuICAgICAgICAgIGVsc2UgY29udGFpbmVyLmFwcGVuZChub2Rlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXllcnMuc2V0KG5hbWUsIHsgbm9kZXMsIGxheWVyOiBsYXllck9iamVjdCwgdXBkYXRlOiBmYWxzZSB9KTtcbiAgICAgICAgY29uZmlnLnVwZGF0ZShuYW1lKTtcblxuICAgICAgICBsZXQgaGFuZGxlOiBMYXllckhhbmRsZTxPPiA9IGluc3RhbmNlLmhhbmRsZSBhcyBhbnk7XG4gICAgICAgIGlmICghaGFuZGxlKSBoYW5kbGUgPSB7fSBhcyBhbnk7XG4gICAgICAgIGhhbmRsZS51cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGUobmFtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgIH0sXG4gICAgICBhdHRhY2hUb1NoYWRkb3coLi4ubm9kZXM6IE5vZGVbXSkge1xuICAgICAgICBzaGFkb3cuYXBwZW5kKC4uLm5vZGVzKTtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRoaXMubGF5ZXJIYW5kbGVyLmNvbm5lY3RlZD8uKGNvbmZpZyk7XG5cbiAgICB0aGlzLmNsZWFudXAucHVzaCgoKSA9PiB7XG4gICAgICByZXNpemVPYnMudW5vYnNlcnZlKGNvbnRhaW5lcik7XG4gICAgICBmb3IgKHZhciBsYXllciBvZiBsYXllcnMudmFsdWVzKCkpIHtcbiAgICAgICAgbGF5ZXIubGF5ZXI/LmRpc2Nvbm5lY3RlZD8uKGNvbmZpZyk7XG4gICAgICB9XG4gICAgICB0aGlzLmxheWVySGFuZGxlci5kaXNjb25uZWN0ZWQ/Lihjb25maWcpO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZm9yICh2YXIgY2xlYW4gb2YgdGhpcy5jbGVhbnVwKSBjbGVhbigpO1xuICAgIHRoaXMuY2xlYW51cCA9IFtdO1xuICAgIHRoaXMuc2hhZG93LmlubmVySFRNTCA9IFwiXCI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExheWVyZWRDb21wb25lbnQoaGFuZGxlcjogTGF5ZXJIYW5kbGVyKSB7XG4gIHJldHVybiBjbGFzcyBleHRlbmRzIExheWVyZWRFbGVtZW50IHtcbiAgICBsYXllckhhbmRsZXIgPSBoYW5kbGVyO1xuICB9O1xufVxuIiwgImltcG9ydCB7IFJlbmRlcmVyMkQsIE1lYXN1cmVUZXh0LCBUZXh0QWxpZ24gfSBmcm9tIFwiLi9cIjtcblxuY29uc3QgUElfMiA9IDIgKiBNYXRoLlBJO1xuY29uc3QgX1BJXzIgPSAwLjUgLyBNYXRoLlBJO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMgaW1wbGVtZW50cyBSZW5kZXJlcjJELCBNZWFzdXJlVGV4dCB7XG4gIHByaXZhdGUgX2N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIHByaXZhdGUgX2xpbmVXaWR0aCA9IDE7XG4gIHByaXZhdGUgX2ZvbnRTaXplID0gMTM7XG4gIHByaXZhdGUgX2ZpbGxDb2xvciA9IFwiIzAwMDAwMFwiO1xuICBwcml2YXRlIF9zdHJva2VDb2xvciA9IFwiIzAwMDAwMFwiO1xuXG4gIHByaXZhdGUgZm9udEFzY2VudDogbnVtYmVyID0gLTE7XG4gIHByaXZhdGUgZm9udERlc2NlbnQ6IG51bWJlciA9IC0xO1xuXG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3aWR0aD86IG51bWJlciwgaGVpZ2h0PzogbnVtYmVyKSB7XG4gICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gY3R4LmNhbnZhcy53aWR0aCA6IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBjdHguY2FudmFzLmhlaWdodCA6IGhlaWdodDtcbiAgICB0aGlzLmZvbnRTaXplID0gMTM7XG4gIH1cblxuICBnZXQgbGluZVdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9saW5lV2lkdGg7XG4gIH1cbiAgc2V0IGxpbmVXaWR0aChsaW5lV2lkdGg6IG51bWJlcikge1xuICAgIHRoaXMuX2N0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgdGhpcy5fbGluZVdpZHRoID0gbGluZVdpZHRoO1xuICB9XG5cbiAgZ2V0IGZvbnRTaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9mb250U2l6ZTtcbiAgfVxuICBzZXQgZm9udFNpemUoZm9udFNpemU6IG51bWJlcikge1xuICAgIHRoaXMuX2N0eC50ZXh0QmFzZWxpbmUgPSBcImFscGhhYmV0aWNcIjtcbiAgICB0aGlzLl9jdHguZm9udCA9IGZvbnRTaXplICsgXCJweCBUaW1lcyBOZXcgUm9tYW5cIjtcbiAgICB0aGlzLl9mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGNvbnN0IHRtID0gdGhpcy5fY3R4Lm1lYXN1cmVUZXh0KFwiMUFUT2dqcFwiKTtcbiAgICB0aGlzLmZvbnRBc2NlbnQgPSB0bS5mb250Qm91bmRpbmdCb3hBc2NlbnQgfHwgdG0uYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQ7XG4gICAgdGhpcy5mb250RGVzY2VudCA9IHRtLmZvbnRCb3VuZGluZ0JveERlc2NlbnQgfHwgdG0uYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50O1xuICB9XG5cbiAgZ2V0IGZpbGxTdHlsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9maWxsQ29sb3I7XG4gIH1cbiAgc2V0IGZpbGxTdHlsZShmaWxsU3R5bGU6IHN0cmluZykge1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gICAgdGhpcy5fZmlsbENvbG9yID0gZmlsbFN0eWxlO1xuICB9XG5cbiAgZ2V0IHN0cm9rZVN0eWxlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cm9rZUNvbG9yO1xuICB9XG4gIHNldCBzdHJva2VTdHlsZShzdHJva2VTdHlsZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gICAgdGhpcy5fc3Ryb2tlQ29sb3IgPSBzdHJva2VTdHlsZTtcbiAgfVxuXG4gIG1lYXN1cmVUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMuX2N0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIGNvbnN0IHRtID0gdGhpcy5fY3R4Lm1lYXN1cmVUZXh0KHRleHQpO1xuICAgIGxldCBjID0gKHRoaXMuZm9udEFzY2VudCArIHRoaXMuZm9udERlc2NlbnQpIC8gMjtcbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBjICogMS4zLFxuICAgICAgYm90OiBjICogMSxcbiAgICAgIGxlZnQ6IHRtLmFjdHVhbEJvdW5kaW5nQm94TGVmdCxcbiAgICAgIHJpZ2h0OiB0bS5hY3R1YWxCb3VuZGluZ0JveFJpZ2h0LFxuICAgIH07XG4gIH1cblxuICB0ZXh0Tm9kZSh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBhbGlnbjogVGV4dEFsaWduKSB7XG4gICAgbGV0IGJsOiBDYW52YXNUZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiLFxuICAgICAgYWw6IENhbnZhc1RleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgc3dpdGNoIChhbGlnbiAmIDBiMTEwMCkge1xuICAgICAgY2FzZSBUZXh0QWxpZ24uVDpcbiAgICAgICAgYmwgPSBcInRvcFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGV4dEFsaWduLkI6XG4gICAgICAgIGJsID0gXCJib3R0b21cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHN3aXRjaCAoYWxpZ24gJiAwYjAwMTEpIHtcbiAgICAgIGNhc2UgVGV4dEFsaWduLkw6XG4gICAgICAgIGFsID0gXCJsZWZ0XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUZXh0QWxpZ24uUjpcbiAgICAgICAgYWwgPSBcInJpZ2h0XCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLl9jdHgudGV4dEJhc2VsaW5lID0gYmw7XG4gICAgdGhpcy5fY3R4LnRleHRBbGlnbiA9IGFsO1xuICAgIHRoaXMuX2N0eC5maWxsVGV4dCh0ZXh0LCB4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJlZ2luUGF0aCgpIHtcbiAgICB0aGlzLl9jdHguYmVnaW5QYXRoKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBtb3ZlVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLl9jdHgubW92ZVRvKHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGluZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY3R4LmxpbmVUbyh4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHF1YWRyYXRpY1RvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLl9jdHgucXVhZHJhdGljQ3VydmVUbyhjcFgsIGNwWSwgeCwgeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjdWJpY1RvKFxuICAgIGNwMVg6IG51bWJlcixcbiAgICBjcDFZOiBudW1iZXIsXG4gICAgY3AyWDogbnVtYmVyLFxuICAgIGNwMlk6IG51bWJlcixcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuX2N0eC5iZXppZXJDdXJ2ZVRvKGNwMVgsIGNwMVksIGNwMlgsIGNwMlksIHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY2xvc2VQYXRoKCkge1xuICAgIHRoaXMuX2N0eC5jbG9zZVBhdGgoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKSB7XG4gICAgdGhpcy5fY3R4LnJlY3QoeCwgeSwgdywgaCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhcmMoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICByYWRpdXM6IG51bWJlcixcbiAgICBzdGFydEFuZ2xlOiBudW1iZXIsXG4gICAgZW5kQW5nbGU6IG51bWJlcixcbiAgICBjdz86IGJvb2xlYW5cbiAgKSB7XG4gICAgdGhpcy5fY3R4LmFyYyhcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgcmFkaXVzLFxuICAgICAgc3RhcnRBbmdsZSAtIFBJXzIgKiBNYXRoLmZsb29yKF9QSV8yICogc3RhcnRBbmdsZSksXG4gICAgICBlbmRBbmdsZSAtIFBJXzIgKiBNYXRoLmZsb29yKF9QSV8yICogZW5kQW5nbGUpLFxuICAgICAgIWN3XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHN0cm9rZSgpIHtcbiAgICB0aGlzLl9jdHguc3Ryb2tlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmaWxsKCkge1xuICAgIHRoaXMuX2N0eC5maWxsKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmaWxsQW5kU3Ryb2tlKCkge1xuICAgIHRoaXMuZmlsbCgpO1xuICAgIHRoaXMuc3Ryb2tlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiIsICJleHBvcnQgY2xhc3MgWE1MIHtcbiAgY2hpbGRyZW46IChYTUwgfCBzdHJpbmcpW107XG4gIGF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICBhdHRyaWJ1dGVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSxcbiAgICAuLi5jaGlsZHJlbjogKFhNTCB8IHN0cmluZylbXVxuICApIHtcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgfVxuXG4gIHByaXZhdGUgYXR0clN0cmluZygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5hdHRyaWJ1dGVzKVxuICAgICAgLm1hcCgoW2ssIHZdKSA9PiBgJHtrfT1cIiR7dn1cImApXG4gICAgICAuam9pbihcIiBcIik7XG4gIH1cblxuICBwcml2YXRlIGNoU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubWFwKCh2KSA9PiB2LnRvU3RyaW5nKCkpLmpvaW4oXCJcIik7XG4gIH1cblxuICBhcHBlbmQoY2hpbGQ6IFhNTCB8IHN0cmluZykge1xuICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBuYW1lID0gdGhpcy5uYW1lO1xuICAgIGlmIChuYW1lID09PSBcIlwiKSByZXR1cm4gdGhpcy5jaFN0cmluZygpO1xuICAgIHJldHVybiBgPCR7bmFtZX0gJHt0aGlzLmF0dHJTdHJpbmcoKX0+JHt0aGlzLmNoU3RyaW5nKCl9PC8ke25hbWV9PmA7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGpzeChcbiAgbmFtZTogc3RyaW5nIHwgKChwcm9wczogYW55LCAuLi5jaGlsZHJlbjogYW55KSA9PiBYTUwpLFxuICBwcm9wczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSxcbiAgLi4uY2hpbGRyZW46IGFueVtdXG4pOiBYTUwge1xuICBpZiAodHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG5hbWUocHJvcHMsIC4uLmNoaWxkcmVuKTtcbiAgcmV0dXJuIG5ldyBYTUwobmFtZSwgcHJvcHMsIC4uLmNoaWxkcmVuKTtcbn1cbmpzeC5GcmFnbWVudCA9IFwiXCI7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBqc3guSlNYIHtcbiAgdHlwZSBFbGVtZW50ID0gWE1MO1xuICB0eXBlIEludHJpbnNpY0VsZW1lbnRzID0ge1xuICAgIFtrZXk6IExvd2VyY2FzZTxzdHJpbmc+XToge1xuICAgICAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyO1xuICAgIH07XG4gIH07XG59XG4iLCAiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIFhNTCB9IGZyb20gXCIuLi9VbnNhZmVYTUxcIjtcbmltcG9ydCB7IFJlbmRlcmVyMkQsIFRleHRBbGlnbiB9IGZyb20gXCIuXCI7XG5cbmNvbnN0IFIyRCA9IDE4MC4wIC8gTWF0aC5QSTtcbmNvbnN0IFBJMiA9IDIgKiBNYXRoLlBJO1xuY29uc3QgX1BJMiA9IDAuNSAvIE1hdGguUEk7XG5cbnR5cGUgU1ZHU3R5bGUgPSB7XG4gIHN0cm9rZToge1xuICAgIHN0cm9rZTogc3RyaW5nO1xuICAgIFwic3Ryb2tlLXdpZHRoXCI6IG51bWJlcjtcbiAgICBcInN0cm9rZS1vcGFjaXR5XCI/OiBudW1iZXI7XG4gIH07XG4gIGZpbGw6IHtcbiAgICBmaWxsOiBzdHJpbmc7XG4gICAgXCJmaWxsLW9wYWNpdHlcIj86IG51bWJlcjtcbiAgfTtcbiAgZm9udFNpemU6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNWRyBpbXBsZW1lbnRzIFJlbmRlcmVyMkQge1xuICBzdmc6IFhNTDtcblxuICBwcml2YXRlIF9wYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgc3R5bGU6IFNWR1N0eWxlID0ge1xuICAgIHN0cm9rZToge1xuICAgICAgc3Ryb2tlOiBcIiMwMDAwMDBcIixcbiAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IDEsXG4gICAgfSxcbiAgICBmaWxsOiB7XG4gICAgICBmaWxsOiBcIiMwMDAwMDBcIixcbiAgICB9LFxuICAgIGZvbnRTaXplOiAxMyxcbiAgfTtcblxuICBwcml2YXRlIHJvdW5kKHg6IG51bWJlcikge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHggKiAxMDAwKSAvIDEwMDA7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuc3ZnID0gKFxuICAgICAgPHN2Z1xuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgIHZpZXdCb3g9e2AwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YH1cbiAgICAgID48L3N2Zz5cbiAgICApO1xuICB9XG5cbiAgZ2V0IGZpbGxTdHlsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnN0eWxlLmZpbGwuZmlsbDtcbiAgfVxuICBzZXQgZmlsbFN0eWxlKGZpbGxTdHlsZTogc3RyaW5nKSB7XG4gICAgbGV0IHsgZmlsbCB9ID0gdGhpcy5zdHlsZTtcbiAgICAvLyBPcGFjaXR5IG9ubHkgZm9yIDggZGlnaXQgaGV4XG4gICAgaWYgKGZpbGxTdHlsZS5sZW5ndGggPT0gOSkge1xuICAgICAgbGV0IG9wID0gcGFyc2VJbnQoXCIweFwiICsgZmlsbFN0eWxlLnNsaWNlKDcsIDkpKSAvIDI1NS4wO1xuICAgICAgZmlsbFN0eWxlID0gZmlsbFN0eWxlLnNsaWNlKDAsIDcpO1xuXG4gICAgICBpZiAob3AgPT09IDEuMCkgZGVsZXRlIGZpbGxbXCJmaWxsLW9wYWNpdHlcIl07XG4gICAgICBlbHNlIGZpbGxbXCJmaWxsLW9wYWNpdHlcIl0gPSBNYXRoLnJvdW5kKDEwMDAgKiBvcCkgLyAxMDAwO1xuICAgIH0gZWxzZSBkZWxldGUgZmlsbFtcImZpbGwtb3BhY2l0eVwiXTtcbiAgICBmaWxsLmZpbGwgPSBmaWxsU3R5bGU7XG4gIH1cblxuICBnZXQgc3Ryb2tlU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZS5zdHJva2Uuc3Ryb2tlO1xuICB9XG4gIHNldCBzdHJva2VTdHlsZShzdHJva2VTdHlsZTogc3RyaW5nKSB7XG4gICAgbGV0IHsgc3Ryb2tlIH0gPSB0aGlzLnN0eWxlO1xuICAgIC8vIHBhcnNlIG9wYWNpdHkgaWYgc3R5bGUgaXMgOCBkaWdpdCBoZXhcbiAgICBpZiAoc3Ryb2tlU3R5bGUubGVuZ3RoID09IDkpIHtcbiAgICAgIGxldCBvcGFjaXR5ID0gcGFyc2VJbnQoXCIweFwiICsgc3Ryb2tlU3R5bGUuc2xpY2UoNywgOSkpIC8gMjU1LjA7XG4gICAgICBzdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlLnNsaWNlKDAsIDcpO1xuXG4gICAgICBpZiAob3BhY2l0eSA9PT0gMS4wKSBkZWxldGUgc3Ryb2tlW1wic3Ryb2tlLW9wYWNpdHlcIl07XG4gICAgICBlbHNlIHN0cm9rZVtcInN0cm9rZS1vcGFjaXR5XCJdID0gTWF0aC5yb3VuZCgxMDAwICogb3BhY2l0eSkgLyAxMDAwO1xuICAgIH0gZWxzZSBkZWxldGUgc3Ryb2tlW1wic3Ryb2tlLW9wYWNpdHlcIl07XG4gICAgc3Ryb2tlLnN0cm9rZSA9IHN0cm9rZVN0eWxlO1xuICB9XG5cbiAgZ2V0IGxpbmVXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZS5zdHJva2VbXCJzdHJva2Utd2lkdGhcIl07XG4gIH1cbiAgc2V0IGxpbmVXaWR0aChsaW5lV2lkdGg6IG51bWJlcikge1xuICAgIHRoaXMuc3R5bGUuc3Ryb2tlW1wic3Ryb2tlLXdpZHRoXCJdID0gbGluZVdpZHRoO1xuICB9XG5cbiAgZ2V0IGZvbnRTaXplKCkge1xuICAgIHJldHVybiB0aGlzLnN0eWxlLmZvbnRTaXplO1xuICB9XG4gIHNldCBmb250U2l6ZShmb250U2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICB9XG5cbiAgdGV4dE5vZGUodGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgYWxpZ246IFRleHRBbGlnbiA9IDApIHtcbiAgICBsZXQgYmw6IFwidGV4dC1hZnRlci1lZGdlXCIgfCBcImhhbmdpbmdcIiB8IFwibWlkZGxlXCIgPSBcIm1pZGRsZVwiLFxuICAgICAgYWw6IFwic3RhcnRcIiB8IFwiZW5kXCIgfCBcIm1pZGRsZVwiID0gXCJtaWRkbGVcIjtcbiAgICBzd2l0Y2ggKGFsaWduICYgMGIxMTAwKSB7XG4gICAgICBjYXNlIFRleHRBbGlnbi5UOlxuICAgICAgICBibCA9IFwiaGFuZ2luZ1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGV4dEFsaWduLkI6XG4gICAgICAgIGJsID0gXCJ0ZXh0LWFmdGVyLWVkZ2VcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHN3aXRjaCAoYWxpZ24gJiAwYjAwMTEpIHtcbiAgICAgIGNhc2UgVGV4dEFsaWduLkw6XG4gICAgICAgIGFsID0gXCJzdGFydFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGV4dEFsaWduLlI6XG4gICAgICAgIGFsID0gXCJlbmRcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcblxuICAgIHRoaXMuc3ZnLmFwcGVuZChcbiAgICAgIDx0ZXh0XG4gICAgICAgIHg9e3JvdW5kZWQoeCl9XG4gICAgICAgIHk9e3JvdW5kZWQoeSl9XG4gICAgICAgIGZvbnQtc2l6ZT17dGhpcy5zdHlsZS5mb250U2l6ZX1cbiAgICAgICAgZm9udC1mYW1pbHk9XCJUaW1lcyBOZXcgUm9tYW5cIlxuICAgICAgICBkb21pbmFudC1iYXNlbGluZT17Ymx9XG4gICAgICAgIHRleHQtYW5jaG9yPXthbH1cbiAgICAgID5cbiAgICAgICAge3RleHR9XG4gICAgICA8L3RleHQ+XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJlZ2luUGF0aCgpIHtcbiAgICB0aGlzLl9wYXRoID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLl9wYXRoID0gKHRoaXMuX3BhdGggfHwgXCJcIikgKyBgTSR7cm91bmRlZCh4KX0gJHtyb3VuZGVkKHkpfWA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbGluZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLl9wYXRoKSByZXR1cm4gdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgbGV0IHJvdW5kZWQgPSB0aGlzLnJvdW5kO1xuICAgIHRoaXMuX3BhdGggKz0gYEwke3JvdW5kZWQoeCl9ICR7cm91bmRlZCh5KX1gO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHF1YWRyYXRpY1RvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzIHtcbiAgICBpZiAoIXRoaXMuX3BhdGgpIHJldHVybiB0aGlzLm1vdmVUbyh4LCB5KTtcbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG4gICAgdGhpcy5fcGF0aCArPSBgUSR7cm91bmRlZChjcFgpfSAke3JvdW5kZWQoY3BZKX0gJHtyb3VuZGVkKHgpfSAke3JvdW5kZWQoXG4gICAgICB5XG4gICAgKX1gO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGN1YmljVG8oXG4gICAgY3AxWDogbnVtYmVyLFxuICAgIGNwMVk6IG51bWJlcixcbiAgICBjcDJYOiBudW1iZXIsXG4gICAgY3AyWTogbnVtYmVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdGhpcyB7XG4gICAgaWYgKCF0aGlzLl9wYXRoKSByZXR1cm4gdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgbGV0IHJvdW5kZWQgPSB0aGlzLnJvdW5kO1xuICAgIHRoaXMuX3BhdGggKz0gYEMke3JvdW5kZWQoY3AxWCl9ICR7cm91bmRlZChjcDFZKX0gJHtyb3VuZGVkKFxuICAgICAgY3AyWFxuICAgICl9ICR7cm91bmRlZChjcDJZKX0gJHtyb3VuZGVkKHgpfSAke3JvdW5kZWQoeSl9YDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjbG9zZVBhdGgoKSB7XG4gICAgdGhpcy5fcGF0aCA9ICh0aGlzLl9wYXRoIHx8IFwiXCIpICsgXCJaXCI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmVjdCh4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIpIHtcbiAgICB0aGlzLm1vdmVUbyh4LCB5KTtcbiAgICB0aGlzLmxpbmVUbyh4ICsgdywgeSk7XG4gICAgdGhpcy5saW5lVG8oeCArIHcsIHkgKyBoKTtcbiAgICB0aGlzLmxpbmVUbyh4LCB5ICsgaCk7XG4gICAgdGhpcy5saW5lVG8oeCwgeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYXJjKFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgcmFkaXVzOiBudW1iZXIsXG4gICAgc3RhcnRBbmdsZTogbnVtYmVyLFxuICAgIGVuZEFuZ2xlOiBudW1iZXIsXG4gICAgY3c/OiBib29sZWFuXG4gICkge1xuICAgIGxldCBkZWx0YSA9IChlbmRBbmdsZSAtIHN0YXJ0QW5nbGUpICogX1BJMjtcbiAgICBkZWx0YSA9IGRlbHRhIC0gTWF0aC5mbG9vcihkZWx0YSk7XG4gICAgaWYgKGRlbHRhID49IDAuNDk5ICYmIGRlbHRhIDw9IDAuNTExKSB7XG4gICAgICAvLyBIYWxmIGFyY3MgYXJlIGFtYmlnb3VzIGluIHN2ZyBmaWxlcy5cbiAgICAgIC8vIFNwbGl0IHRoZSBhcmMgaW50byB0d28gaGFsZiBjaXJjbGVzLlxuICAgICAgbGV0IG1pZEFuZ2xlID0gc3RhcnRBbmdsZSArIChjdyA/ICswLjUgKiBkZWx0YSA6IC0wLjUgKiBkZWx0YSk7XG4gICAgICB0aGlzLmFyYyh4LCB5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIG1pZEFuZ2xlLCBjdyk7XG4gICAgICB0aGlzLmFyYyh4LCB5LCByYWRpdXMsIG1pZEFuZ2xlLCBlbmRBbmdsZSwgY3cpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGV0IHN4ID0geCArIHJhZGl1cyAqIE1hdGguY29zKHN0YXJ0QW5nbGUpLFxuICAgICAgc3kgPSB5ICsgcmFkaXVzICogTWF0aC5zaW4oc3RhcnRBbmdsZSk7XG4gICAgbGV0IGV4ID0geCArIHJhZGl1cyAqIE1hdGguY29zKGVuZEFuZ2xlKSxcbiAgICAgIGV5ID0geSArIHJhZGl1cyAqIE1hdGguc2luKGVuZEFuZ2xlKTtcblxuICAgIGxldCBzaG9ydCA9IGRlbHRhIDw9IDAuNSA9PSBjdztcblxuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLmxpbmVUbyhzeCwgc3kpO1xuXG4gICAgdGhpcy5fcGF0aCArPSBgQSAke3JvdW5kZWQocmFkaXVzKX0gJHtyb3VuZGVkKHJhZGl1cyl9IDAgJHtzaG9ydCA/IDAgOiAxfSAke1xuICAgICAgY3cgPyAxIDogMFxuICAgIH0gJHtyb3VuZGVkKGV4KX0gJHtyb3VuZGVkKGV5KX1gO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN0cm9rZSgpIHtcbiAgICBpZiAodGhpcy5fcGF0aClcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZChcbiAgICAgICAgPHBhdGggZD17dGhpcy5fcGF0aH0gZmlsbD1cIm5vbmVcIiB7Li4udGhpcy5zdHlsZS5zdHJva2V9IC8+XG4gICAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZpbGwoKSB7XG4gICAgaWYgKHRoaXMuX3BhdGgpXG4gICAgICB0aGlzLnN2Zy5hcHBlbmQoPHBhdGggZD17dGhpcy5fcGF0aH0gey4uLnRoaXMuc3R5bGUuZmlsbH0gLz4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZpbGxBbmRTdHJva2UoKSB7XG4gICAgaWYgKHRoaXMuX3BhdGgpXG4gICAgICB0aGlzLnN2Zy5hcHBlbmQoXG4gICAgICAgIDxwYXRoIGQ9e3RoaXMuX3BhdGh9IHsuLi50aGlzLnN0eWxlLmZpbGx9IHsuLi50aGlzLnN0eWxlLnN0cm9rZX0gLz5cbiAgICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdG9YTUwoKSB7XG4gICAgcmV0dXJuIGA8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJub1wiPz5cXG4ke3RoaXMuc3ZnLnRvU3RyaW5nKCl9YDtcbiAgfVxuICB0b0ZpbGVTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9YTUwoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IFJlbmRlcmVyMkQsIFRleHRBbGlnbiB9IGZyb20gXCIuXCI7XG5cbnR5cGUgUGljU3R5bGUgPSB7XG4gIHN0cm9rZToge1xuICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBvcGFjaXR5OiBudW1iZXI7XG4gIH07XG4gIGZpbGw6IHtcbiAgICBjb2xvcjogc3RyaW5nO1xuICAgIG9wYWNpdHk6IG51bWJlcjtcbiAgfTtcbiAgZm9udFNpemU6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpa1ogaW1wbGVtZW50cyBSZW5kZXJlcjJEIHtcbiAgcHJpdmF0ZSBUZVg6IHN0cmluZztcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcG9zOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHN0eWxlOiBQaWNTdHlsZSA9IHtcbiAgICBzdHJva2U6IHtcbiAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgd2lkdGg6IDEsXG4gICAgfSxcbiAgICBmaWxsOiB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgY29sb3I6IFwiYmxhY2tcIixcbiAgICB9LFxuICAgIGZvbnRTaXplOiAxMyxcbiAgfTtcblxuICBwcml2YXRlIHJvdW5kKHg6IG51bWJlcikge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHggKiAxMDAwKSAvIDEwMDA7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLlRlWCA9XG4gICAgICBgXFxcXGJlZ2lue3Rpa3pwaWN0dXJlfVt4PTFwdCx5PS0xcHQsZXZlcnkgbm9kZS8uc3R5bGU9e2lubmVyIHNlcD0wLG91dGVyIHNlcD0wfV0lXFxuYCArXG4gICAgICBgXFxcXGZvbnRmYW1pbHl7cHRtfVxcXFxzZWxlY3Rmb250JVxcbmAgK1xuICAgICAgYFxcXFx1c2Vhc2JvdW5kaW5nYm94ICgwLDApIHJlY3RhbmdsZSAoJHt3aWR0aH0sJHtoZWlnaHR9KTslXFxuYCArXG4gICAgICBgXFxcXGNsaXAgKDAsMCkgcmVjdGFuZ2xlICgke3dpZHRofSwke2hlaWdodH0pOyVcXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBfcGF0aEF0dHIoZG9GaWxsOiBib29sZWFuLCBkb1N0cm9rZTogYm9vbGVhbikge1xuICAgIGxldCB7IGZpbGwsIHN0cm9rZSB9ID0gdGhpcy5zdHlsZTtcbiAgICBsZXQgYXR0cjtcbiAgICBpZiAoZG9GaWxsKVxuICAgICAgYXR0ciA9IGBmaWxsPSR7ZmlsbC5jb2xvcn0ke1xuICAgICAgICBmaWxsLm9wYWNpdHkgPT0gMSA/IFwiXCIgOiBcIixmaWxsIG9wYWNpdHk9XCIgKyBmaWxsLm9wYWNpdHlcbiAgICAgIH1gO1xuICAgIGlmIChkb1N0cm9rZSlcbiAgICAgIGF0dHIgPVxuICAgICAgICAoYXR0ciA/IGF0dHIgKyBcIixcIiA6IFwiXCIpICtcbiAgICAgICAgYGRyYXc9JHtzdHJva2UuY29sb3J9LGxpbmUgd2lkdGg9JHtzdHJva2Uud2lkdGh9JHtcbiAgICAgICAgICBzdHJva2Uub3BhY2l0eSA9PSAxID8gXCJcIiA6IFwiLGRyYXcgb3BhY2l0eT1cIiArIHN0cm9rZS5vcGFjaXR5XG4gICAgICAgIH1gO1xuICAgIHJldHVybiBhdHRyO1xuICB9XG5cbiAgZ2V0IGZpbGxTdHlsZSgpOiBzdHJpbmcge1xuICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuICBzZXQgZmlsbFN0eWxlKGZpbGxTdHlsZTogc3RyaW5nKSB7XG4gICAgbGV0IHsgZmlsbCB9ID0gdGhpcy5zdHlsZTtcbiAgICBsZXQgYyA9IHBhcnNlSW50KFwiMHhcIiArIGZpbGxTdHlsZS5zdWJzdHJpbmcoMSkpO1xuXG4gICAgaWYgKGZpbGxTdHlsZS5sZW5ndGggPT09IDkpIHtcbiAgICAgIGZpbGwub3BhY2l0eSA9IChjICYgMHhmZikgLyAyNTUuMDtcbiAgICAgIGMgPj49IDg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGwub3BhY2l0eSA9IDE7XG4gICAgfVxuXG4gICAgbGV0IGIgPSAweGZmICYgYyxcbiAgICAgIGcgPSAweGZmICYgKGMgPj4gOCksXG4gICAgICByID0gMHhmZiAmIChjID4+IDE2KTtcblxuICAgIGlmIChyID09IDAgJiYgZyA9PSAwICYmIGIgPT0gMCkgZmlsbC5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICBlbHNlIGZpbGwuY29sb3IgPSBge3JnYiwyNTU6cmVkLCR7cn07IGdyZWVuLCR7Z307IGJsdWUsJHtifX1gO1xuICB9XG5cbiAgZ2V0IHN0cm9rZVN0eWxlKCk6IHN0cmluZyB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpO1xuICB9XG4gIHNldCBzdHJva2VTdHlsZShzdHJva2VTdHlsZTogc3RyaW5nKSB7XG4gICAgbGV0IHsgc3Ryb2tlIH0gPSB0aGlzLnN0eWxlO1xuICAgIGxldCBjID0gcGFyc2VJbnQoXCIweFwiICsgc3Ryb2tlU3R5bGUuc3Vic3RyaW5nKDEpKTtcblxuICAgIGlmIChzdHJva2VTdHlsZS5sZW5ndGggPT09IDkpIHtcbiAgICAgIHN0cm9rZS5vcGFjaXR5ID0gKGMgJiAweGZmKSAvIDI1NS4wO1xuICAgICAgYyA+Pj0gODtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Ryb2tlLm9wYWNpdHkgPSAxO1xuICAgIH1cblxuICAgIGxldCBiID0gMHhmZiAmIGMsXG4gICAgICBnID0gMHhmZiAmIChjID4+IDgpLFxuICAgICAgciA9IDB4ZmYgJiAoYyA+PiAxNik7XG5cbiAgICBpZiAociA9PSAwICYmIGcgPT0gMCAmJiBiID09IDApIHN0cm9rZS5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICBlbHNlIHN0cm9rZS5jb2xvciA9IGB7cmdiLDI1NTpyZWQsJHtyfTsgZ3JlZW4sJHtnfTsgYmx1ZSwke2J9fWA7XG4gIH1cblxuICBnZXQgbGluZVdpZHRoKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtcbiAgfVxuICBzZXQgbGluZVdpZHRoKGxpbmVXaWR0aDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdHlsZS5zdHJva2Uud2lkdGggPSBsaW5lV2lkdGg7XG4gIH1cblxuICBnZXQgZm9udFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGUuZm9udFNpemU7XG4gIH1cbiAgc2V0IGZvbnRTaXplKGZvbnRTaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7XG4gIH1cblxuICB0ZXh0Tm9kZSh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBhbGlnbjogVGV4dEFsaWduID0gMCkge1xuICAgIGxldCBhbmNob3I6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBzd2l0Y2ggKGFsaWduICYgMGIxMTAwKSB7XG4gICAgICBjYXNlIFRleHRBbGlnbi5UOlxuICAgICAgICBhbmNob3IgPSBcIm5vcnRoXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUZXh0QWxpZ24uQjpcbiAgICAgICAgYW5jaG9yID0gXCJzb3V0aFwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgc3dpdGNoIChhbGlnbiAmIDBiMDAxMSkge1xuICAgICAgY2FzZSBUZXh0QWxpZ24uTDpcbiAgICAgICAgYW5jaG9yID0gKGFuY2hvciA/IGFuY2hvciArIFwiIFwiIDogXCJcIikgKyBcIndlc3RcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRleHRBbGlnbi5SOlxuICAgICAgICBhbmNob3IgPSAoYW5jaG9yID8gYW5jaG9yICsgXCIgXCIgOiBcIlwiKSArIFwiZWFzdFwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgYW5jaG9yID0gYW5jaG9yIHx8IFwiY2VudGVyXCI7XG5cbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG5cbiAgICB0aGlzLlRlWCArPSBgXFxcXG5vZGUgYXQoJHtyb3VuZGVkKHgpfSwke3JvdW5kZWQoXG4gICAgICB5XG4gICAgKX0pIFthbmNob3I9JHthbmNob3J9XXtcXFxcZm9udHNpemV7JHt0aGlzLnN0eWxlLmZvbnRTaXplfXB0fXske1xuICAgICAgdGhpcy5zdHlsZS5mb250U2l6ZVxuICAgIH1wdH1cXFxcc2VsZWN0Zm9udFxcXFx2cGhhbnRvbXtPZ30ke3RleHQucmVwbGFjZShcIlxcXFxcIiwgXCJcXFxcdGV4dGJhY2tzbGFzaHt9XCIpfX07YDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGJlZ2luUGF0aCgpIHtcbiAgICB0aGlzLnBhdGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wb3MgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgbGV0IHJvdW5kZWQgPSB0aGlzLnJvdW5kO1xuICAgIHRoaXMucGF0aCA9ICh0aGlzLnBhdGggfHwgXCJcIikgKyBgICgke3JvdW5kZWQoeCl9LCR7cm91bmRlZCh5KX0pYDtcbiAgICB0aGlzLnBvcyA9IFt4LCB5XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBsaW5lVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBpZiAoIXRoaXMucGF0aCkgcmV0dXJuIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLnBhdGggKz0gYCAtLSAoJHtyb3VuZGVkKHgpfSwke3JvdW5kZWQoeSl9KWA7XG4gICAgdGhpcy5wb3MgPSBbeCwgeV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcXVhZHJhdGljVG8oY3BYOiBudW1iZXIsIGNwWTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xuICAgIGlmICghdGhpcy5wYXRoKSByZXR1cm4gdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgbGV0IFtwWCwgcFldID0gdGhpcy5wb3MgYXMgW251bWJlciwgbnVtYmVyXTtcbiAgICAvLyBUaWt6IG9ubHkgc3VwcG9ydHMgY3ViaWMgY3VydmVzLiBDb252ZXJ0IHF1YWRyYXRpYyB0byBjdWJpYy5cbiAgICByZXR1cm4gdGhpcy5jdWJpY1RvKFxuICAgICAgcFggKyAoMiAvIDMpICogKGNwWCAtIHBYKSxcbiAgICAgIHBZICsgKDIgLyAzKSAqIChjcFkgLSBwWSksXG4gICAgICB4ICsgKDIgLyAzKSAqIChjcFggLSB4KSxcbiAgICAgIHkgKyAoMiAvIDMpICogKGNwWSAtIHkpLFxuICAgICAgeCxcbiAgICAgIHlcbiAgICApO1xuICB9XG4gIGN1YmljVG8oXG4gICAgY3AxWDogbnVtYmVyLFxuICAgIGNwMVk6IG51bWJlcixcbiAgICBjcDJYOiBudW1iZXIsXG4gICAgY3AyWTogbnVtYmVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdGhpcyB7XG4gICAgaWYgKCF0aGlzLnBhdGgpIHJldHVybiB0aGlzLm1vdmVUbyh4LCB5KTtcbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG4gICAgdGhpcy5wYXRoICs9IGAgLi4gY29udHJvbHMgKCR7cm91bmRlZChjcDFYKX0sJHtyb3VuZGVkKFxuICAgICAgY3AxWVxuICAgICl9KSBhbmQgKCR7cm91bmRlZChjcDJYKX0sJHtyb3VuZGVkKGNwMlkpfSkgLi4gKCR7cm91bmRlZCh4KX0sJHtyb3VuZGVkKFxuICAgICAgeVxuICAgICl9KWA7XG4gICAgdGhpcy5wb3MgPSBbeCwgeV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvc2VQYXRoKCkge1xuICAgIHRoaXMucGF0aCArPSBcIiAtLSBjeWNsZVwiO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKSB7XG4gICAgdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgdGhpcy5saW5lVG8oeCArIHcsIHkpO1xuICAgIHRoaXMubGluZVRvKHggKyB3LCB5ICsgaCk7XG4gICAgdGhpcy5saW5lVG8oeCwgeSArIGgpO1xuICAgIHRoaXMubGluZVRvKHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFyYyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHJhZGl1czogbnVtYmVyLFxuICAgIHN0YXJ0QW5nbGU6IG51bWJlcixcbiAgICBlbmRBbmdsZTogbnVtYmVyLFxuICAgIGN3PzogYm9vbGVhblxuICApIHtcbiAgICBsZXQgc3ggPSB4ICsgcmFkaXVzICogTWF0aC5jb3Moc3RhcnRBbmdsZSksXG4gICAgICBzeSA9IHkgKyByYWRpdXMgKiBNYXRoLnNpbihzdGFydEFuZ2xlKTtcbiAgICBsZXQgZXggPSB4ICsgcmFkaXVzICogTWF0aC5jb3MoZW5kQW5nbGUpLFxuICAgICAgZXkgPSB5ICsgcmFkaXVzICogTWF0aC5zaW4oZW5kQW5nbGUpO1xuICAgIHN0YXJ0QW5nbGUgLz0gMiAqIE1hdGguUEk7XG4gICAgZW5kQW5nbGUgLz0gMiAqIE1hdGguUEk7XG4gICAgc3RhcnRBbmdsZSAtPSBNYXRoLmZsb29yKHN0YXJ0QW5nbGUpO1xuICAgIGVuZEFuZ2xlIC09IE1hdGguZmxvb3IoZW5kQW5nbGUpO1xuXG4gICAgLy8gQ2xvY2t3aXNlIGFuZCBjb3VudGVyY2xvY2t3aXNlIGFyZSBpbnZlcnRlZCBzaW5jZSB1bml0cyBhcmUgdG9vLlxuICAgIGlmIChjdyAmJiBlbmRBbmdsZSA8IHN0YXJ0QW5nbGUpIGVuZEFuZ2xlICs9IDE7XG4gICAgaWYgKCFjdyAmJiBzdGFydEFuZ2xlIDwgZW5kQW5nbGUpIGVuZEFuZ2xlIC09IDE7XG5cbiAgICB0aGlzLmxpbmVUbyhzeCwgc3kpO1xuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLnBhdGggKz0gYCBhcmMoJHtyb3VuZGVkKHN0YXJ0QW5nbGUgKiAzNjApfToke3JvdW5kZWQoXG4gICAgICBlbmRBbmdsZSAqIDM2MFxuICAgICl9OiR7cm91bmRlZChyYWRpdXMpfSlgO1xuICAgIHRoaXMucG9zID0gW2V4LCBleV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3Ryb2tlKCkge1xuICAgIGxldCBkcmF3ID0gYFxcXFxwYXRoIFske3RoaXMuX3BhdGhBdHRyKGZhbHNlLCB0cnVlKX1dJHt0aGlzLnBhdGh9OyVcXG5gO1xuICAgIHRoaXMuVGVYICs9IGRyYXc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZmlsbCgpIHtcbiAgICBsZXQgZHJhdyA9IGBcXFxccGF0aCBbJHt0aGlzLl9wYXRoQXR0cih0cnVlLCBmYWxzZSl9XSR7dGhpcy5wYXRofTslXFxuYDtcbiAgICB0aGlzLlRlWCArPSBkcmF3O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZpbGxBbmRTdHJva2UoKSB7XG4gICAgbGV0IGRyYXcgPSBgXFxcXHBhdGggWyR7dGhpcy5fcGF0aEF0dHIodHJ1ZSwgdHJ1ZSl9XSR7dGhpcy5wYXRofTslXFxuYDtcbiAgICB0aGlzLlRlWCArPSBkcmF3O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdG9UZVgoKSB7XG4gICAgcmV0dXJuIHRoaXMuVGVYICsgXCJcXFxcZW5ke3Rpa3pwaWN0dXJlfVwiO1xuICB9XG4gIHRvRmlsZVN0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy50b1RlWCgpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBUZXh0IGFsaWduIGdpdmVuIGFzIGEgYmluYXJ5IHJlcHJlc2VudGF0aW9uLlxuICogQnkgYGFsaWduICYgMGIxMTAwYCBvbmUgb2J0YWlucyB0aGUgdmVydGljYWwgYWxpZ24gKFQgLyBDIC8gQikuXG4gKiBTaW1pbGFybHkgZm9yIGBhbGlnbiAmIDBiMDAxMWAgb25lIG9idGFpbnMgdGhlIGhvcml6b250YWwgYWxpZ24gKEwgLyBDIC8gUikuXG4gKi9cbmV4cG9ydCBlbnVtIFRleHRBbGlnbiB7XG4gIEMgPSAwYjAwMDAsXG4gIFQgPSAwYjEwMDAsXG4gIEwgPSAwYjAwMTAsXG4gIFIgPSAwYjAwMDEsXG4gIEIgPSAwYjAxMDAsXG4gIFRMID0gMGIxMDEwLFxuICBUUiA9IDBiMTAwMSxcbiAgQkwgPSAwYjAxMTAsXG4gIEJSID0gMGIwMTAxLFxufVxuXG4vKipcbiAqIEEgdHlwZSBmb3IgZGlmZmVyZW50IHJlbmRlcmluZyBiYWNrZW5kcy5cbiAqIEJ5IGRlZmF1bHQgYWxsIGNvb3JkaW5hdGVzIHNob3VsZCBiZSBwcm92aWRlZFxuICogd2l0aCB0aGUgb3JpZ2luIGluIHRoZSB0b3AgbGVmdCBjb3JuZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyZXIyRCB7XG4gIGdldCBsaW5lV2lkdGgoKTogbnVtYmVyO1xuICBzZXQgbGluZVdpZHRoKGxpbmVXaWR0aDogbnVtYmVyKTtcblxuICBnZXQgZm9udFNpemUoKTogbnVtYmVyO1xuICBzZXQgZm9udFNpemUoZm9udFNpemU6IG51bWJlcik7XG5cbiAgZ2V0IGZpbGxTdHlsZSgpOiBzdHJpbmc7XG4gIHNldCBmaWxsU3R5bGUoZmlsbFN0eWxlOiBzdHJpbmcpO1xuXG4gIGdldCBzdHJva2VTdHlsZSgpOiBzdHJpbmc7XG4gIHNldCBzdHJva2VTdHlsZShzdHJva2VTdHlsZTogc3RyaW5nKTtcblxuICAvKipcbiAgICogQHBhcmFtIGFsaWduIFRoZSBhbGlnbm1lbnQgb2YgdGhlIHRleHQuIERlZmF1bHRzIHRvIGBDID0gMGAuXG4gICAqL1xuICB0ZXh0Tm9kZSh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBhbGlnbj86IFRleHRBbGlnbik6IHRoaXM7XG5cbiAgLyoqIEJlZ2luIGEgbmV3IFBhdGguIFRoaXMgY2xlYXJzIGFsbCBwb2ludHMgZnJvbSB0aGUgY3VycmVudCBwYXRoLiAqL1xuICBiZWdpblBhdGgoKTogdGhpcztcblxuICAvKiogTW92ZSB0aGUgcGF0aCB0byBhIGxvY2F0aW9uIHdpdGhvdXQgZHJhd2luZyBhIGxpbmUuICovXG4gIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXM7XG5cbiAgLyoqIERyYXcgYSBsaW5lIGZyb20gdGhlIGN1cnJlbnQgdG8gdGhlIHRhcmdldCBsb2NhdGlvbi4gKi9cbiAgbGluZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcztcblxuICAvKiogRHJhdyBhIHF1YWRyYXRpYyBjdXJ2ZSBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uLiAqL1xuICBxdWFkcmF0aWNUbyhjcFg6IG51bWJlciwgY3BZOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcztcblxuICAvKiogRHJhdyBhIGN1YmljIGN1cnZlIChiZXppZXIgY3VydmUpIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24uICovXG4gIGN1YmljVG8oXG4gICAgY3AxWDogbnVtYmVyLFxuICAgIGNwMVk6IG51bWJlcixcbiAgICBjcDJYOiBudW1iZXIsXG4gICAgY3AyWTogbnVtYmVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdGhpcztcblxuICAvKiogQ2xvc2UgdGhlIGN1cnJlbnQgcGF0aC4gKi9cbiAgY2xvc2VQYXRoKCk6IHRoaXM7XG5cbiAgLyoqXG4gICAqIERyYXcgYSBhcmMgb2YgYSBjaXJjbGUgY2VudGVyZWQgYXQgKHgseSkuXG4gICAqIERyYXdpbmcgYSBmdWxsIGNpcmNsZSBpcyBub3QgcG9zc2libGUuXG4gICAqIEBwYXJhbSB4IGNlbnRlciB4XG4gICAqIEBwYXJhbSB5IGNlbnRlciB5XG4gICAqIEBwYXJhbSByYWRpdXMgcmFkaXVzXG4gICAqIEBwYXJhbSBzdGFydEFuZ2xlIFRoZSBzdGFydCBhbmdsZSBpbiByYWRpYW5zXG4gICAqIEBwYXJhbSBlbmRBbmdsZSBUaGUgZW5kIGFuZ2xlIGluIHJhZGlhbnNcbiAgICogQHBhcmFtIGN3IFdoZXRoZXIgdGhlIGFyYyBzaG91bGQgcnVuIGNsb2Nrd2lzZS4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAqL1xuICBhcmMoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICByYWRpdXM6IG51bWJlcixcbiAgICBzdGFydEFuZ2xlOiBudW1iZXIsXG4gICAgZW5kQW5nbGU6IG51bWJlcixcbiAgICBjdz86IGJvb2xlYW5cbiAgKTogdGhpcztcblxuICAvKiogU3Ryb2tlIHRoZSBjdXJyZW50IHBhdGggKi9cbiAgc3Ryb2tlKCk6IHRoaXM7XG4gIC8qKiBGaWxsIHRoZSBjdXJyZW50IHBhdGggKi9cbiAgZmlsbCgpOiB0aGlzO1xuICAvKiogU3Ryb2tlIGFuZCBGaWxsIHRoZSBjdXJyZW50IHBhdGggKi9cbiAgZmlsbEFuZFN0cm9rZSgpOiB0aGlzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lYXN1cmVUZXh0IHtcbiAgbWVhc3VyZVRleHQodGV4dDogc3RyaW5nKToge1xuICAgIHRvcDogbnVtYmVyO1xuICAgIGJvdDogbnVtYmVyO1xuICAgIGxlZnQ6IG51bWJlcjtcbiAgICByaWdodDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgeyBkZWZhdWx0IGFzIENhbnZhcyB9IGZyb20gXCIuL0NhbnZhc1wiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTVkcgfSBmcm9tIFwiLi9TVkdcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVGlrWiB9IGZyb20gXCIuL1Rpa1pcIjtcbiIsICIvKipcbiAqIFRvb2xzIHRvIHR1cm4gR2VuZXJhdG9yIGZ1bmN0aW9ucyBpbnRvIHN5bmMgb3IgYXN5bmMgZnVuY3Rpb25zLlxuICovXG5cbmV4cG9ydCBjbGFzcyBBc3luY01hbmFnZXI8Sz4ge1xuICBwcml2YXRlIG1hcCA9IG5ldyBNYXA8SywgQXN5bmNPcHRpb25zW10+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIGdldE5ldyhjb250ZXh0OiBLLCB0aW1lQnVkZ2V0PzogbnVtYmVyKTogT3B0aW9uc0ZhY3Rvcnkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGU6ICgpID0+IHtcbiAgICAgICAgbGV0IG0gPSB0aGlzLm1hcDtcbiAgICAgICAgbGV0IGFjdGl2ZTogQXN5bmNPcHRpb25zW107XG5cbiAgICAgICAgaWYgKG0uaGFzKGNvbnRleHQpKSB7XG4gICAgICAgICAgYWN0aXZlID0gbS5nZXQoY29udGV4dCkgYXMgQXN5bmNPcHRpb25zW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWN0aXZlID0gW107XG4gICAgICAgICAgbS5zZXQoY29udGV4dCwgYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbyA9IG5ldyBBc3luY09wdGlvbnModGltZUJ1ZGdldCk7XG4gICAgICAgIGFjdGl2ZS5wdXNoKG8pO1xuICAgICAgICByZXR1cm4gbztcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGFib3J0QWxsKGNvbnRleHQ6IEspIHtcbiAgICBpZiAoIXRoaXMubWFwLmhhcyhjb250ZXh0KSkgcmV0dXJuO1xuICAgIGxldCB2ID0gdGhpcy5tYXAuZ2V0KGNvbnRleHQpIGFzIEFzeW5jT3B0aW9uc1tdO1xuICAgIGZvciAobGV0IG8gb2Ygdikgby5hYm9ydGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcC5kZWxldGUoY29udGV4dCk7XG4gIH1cbn1cblxudHlwZSBPcHRpb25zRmFjdG9yeSA9IHsgY3JlYXRlOiAoKSA9PiBPcHRpb25zIH07XG5cbnR5cGUgT3B0aW9ucyA9IHtcbiAgYmVnaW4/KCk6IGFueTtcbiAgZG9uZT8oKTogYW55O1xuICBzaG91bGRZaWVsZCgpOiBib29sZWFuO1xuICB5aWVsZCgpOiBQcm9taXNlPHZvaWQgfCBudW1iZXI+O1xufTtcblxuZXhwb3J0IGNsYXNzIEFzeW5jT3B0aW9ucyBpbXBsZW1lbnRzIE9wdGlvbnMge1xuICBwcml2YXRlIEk6IG51bWJlciA9IC0xO1xuICBwcml2YXRlIGk6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgdDogbnVtYmVyID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIHByaXZhdGUgdDA6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBkOiBudW1iZXI7XG4gIGFib3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih0aW1lQnVkZ2V0ID0gMTYpIHtcbiAgICB0aGlzLmQgPSB0aW1lQnVkZ2V0O1xuICB9XG5cbiAgYmVnaW4oKSB7XG4gICAgdGhpcy50MCA9IHRoaXMudCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG5cbiAgZG9uZSgpIHtcbiAgICBpZiAodGhpcy5hYm9ydGVkKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKFwiQSB0YXNrIHdhcyBhYm9ydGVkIVwiKTtcbiAgICAgIHRocm93IFwiYWJvcnRlZFwiO1xuICAgIH1cbiAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgIGxldCBUID0gcGVyZm9ybWFuY2Uubm93KCkgLSAodGhpcy50MCB8fCBwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgaWYgKFQgPiAxNTAwKSBjb25zb2xlLmRlYnVnKFwiTG9uZyBUYXNrIFRvb2s6IFwiICsgTWF0aC5yb3VuZChUKSArIFwibXNcIik7XG4gIH1cblxuICBzaG91bGRZaWVsZCgpOiBib29sZWFuIHtcbiAgICBsZXQgaSA9IHRoaXMuaSsrO1xuICAgIGlmIChpIDwgdGhpcy5JKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCh0aGlzLkkgPSAtMSkpIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMudCA+PSB0aGlzLmQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyB5aWVsZCgpOiBQcm9taXNlPHZvaWQ+O1xuICBhc3luYyB5aWVsZCgpOiBQcm9taXNlPHZvaWQgfCBudW1iZXI+IHtcbiAgICBpZiAodGhpcy50KSB7XG4gICAgICBsZXQgZGVsdGEgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMudDtcblxuICAgICAgLy8gR2VvbS4gcnVubmluZyBhdmVyYWdlIGZvciBpdGVyYXRpb25zXG4gICAgICB0aGlzLkkgPSBNYXRoLm1heCgxLCB0aGlzLmkgKiBNYXRoLm1pbih0aGlzLmQgLyAoZGVsdGEgKyAxKSwgNCkpO1xuICAgIH1cbiAgICBhd2FpdCB3YWl0KDApO1xuICAgIGlmICh0aGlzLmFib3J0ZWQpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXCJBIHRhc2sgd2FzIGFib3J0ZWQhXCIpO1xuICAgICAgdGhyb3cgXCJhYm9ydGVkXCI7XG4gICAgfVxuXG4gICAgdGhpcy5pID0gMDtcbiAgICB0aGlzLnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxBc3luYzxcbiAgVCxcbiAgUixcbiAgRiBleHRlbmRzICh0aGlzOiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgUiwgYW55PlxuPih0aDogVCwgZjogRiwgYXJnczogUGFyYW1ldGVyczxGPiwgYXN5bmNPcHRpb25zPzogT3B0aW9uc0ZhY3RvcnkpOiBQcm9taXNlPFI+IHtcbiAgYXN5bmNPcHRpb25zID8/PSBEZWZhdWx0QXN5bmNPcHRpb25zO1xuICBsZXQgYXN5bmNJbnN0YW5jZTogT3B0aW9ucyA9IGFzeW5jT3B0aW9ucy5jcmVhdGUoKTtcblxuICBhc3luY0luc3RhbmNlLmJlZ2luPy4oKTtcblxuICAvLyBUaGUgdHlwZXMgc2hvdWxkIGJlIHNhZmVcbiAgbGV0IGdlbiA9IGYuYXBwbHkodGgsIGFyZ3MpO1xuICBsZXQgbiA9IGdlbi5uZXh0KCk7XG4gIHdoaWxlICghbi5kb25lKSB7XG4gICAgaWYgKGFzeW5jSW5zdGFuY2Uuc2hvdWxkWWllbGQoKSkgYXdhaXQgYXN5bmNJbnN0YW5jZS55aWVsZCgpO1xuICAgIG4gPSBnZW4ubmV4dCgpO1xuICB9XG5cbiAgYXN5bmNJbnN0YW5jZS5kb25lPy4oKTtcbiAgcmV0dXJuIG4udmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxsU3luYzxcbiAgVCxcbiAgUixcbiAgRiBleHRlbmRzICh0aGlzOiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgUiwgYW55PlxuPih0aDogVCwgZjogRiwgYXJnczogUGFyYW1ldGVyczxGPik6IFIge1xuICAvLyBUaGUgdHlwZXMgc2hvdWxkIGJlIHNhZmVcbiAgbGV0IGdlbiA9IGYuYXBwbHkodGgsIGFyZ3MpO1xuICBsZXQgbiA9IGdlbi5uZXh0KCk7XG4gIHdoaWxlICghbi5kb25lKSBuID0gZ2VuLm5leHQoKTtcbiAgcmV0dXJuIG4udmFsdWU7XG59XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0QXN5bmNPcHRpb25zOiBPcHRpb25zRmFjdG9yeSA9IHtcbiAgY3JlYXRlOiAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3VsZFlpZWxkKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuICAgICAgYXN5bmMgeWllbGQoKSB7fSxcbiAgICB9O1xuICB9LFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHdhaXQobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxudHlwZSBBc3luY1dyYXA8XG4gIEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+XG4+ID0gRiBleHRlbmRzICh0aGlzOiBpbmZlciBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBib3RoIHRoaXMgYW5kIHJldHVyblxuICA/ICh0aGlzOiBULCAuLi5hcmdzOiBbLi4uUGFyYW1ldGVyczxGPiwgT3B0aW9uc0ZhY3Rvcnk/XSkgPT4gUHJvbWlzZTxSPlxuICA6IEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBvbmx5IHJldHVyblxuICA/ICguLi5hcmdzOiBbLi4uUGFyYW1ldGVyczxGPiwgT3B0aW9uc0ZhY3Rvcnk/XSkgPT4gUHJvbWlzZTxSPlxuICA6IEYgZXh0ZW5kcyAodGhpczogaW5mZXIgVCwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55PiAvLyBJbmZlciBvbmx5IHRoaXNcbiAgPyAodGhpczogVCwgLi4uYXJnczogWy4uLlBhcmFtZXRlcnM8Rj4sIE9wdGlvbnNGYWN0b3J5P10pID0+IFByb21pc2U8dW5rbm93bj5cbiAgOiAoLi4uYXJnczogWy4uLlBhcmFtZXRlcnM8Rj4sIE9wdGlvbnNGYWN0b3J5P10pID0+IFByb21pc2U8dW5rbm93bj47XG50eXBlIFN5bmNXcmFwPFxuICBGIGV4dGVuZHMgKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55PlxuPiA9IEYgZXh0ZW5kcyAodGhpczogaW5mZXIgVCwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGluZmVyIFIsIGFueT4gLy8gSW5mZXIgYm90aCB0aGlzIGFuZCByZXR1cm5cbiAgPyAodGhpczogVCwgLi4uYXJnczogUGFyYW1ldGVyczxGPikgPT4gUlxuICA6IEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBvbmx5IHJldHVyblxuICA/ICguLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiBSXG4gIDogRiBleHRlbmRzICh0aGlzOiBpbmZlciBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+IC8vIEluZmVyIG9ubHkgdGhpc1xuICA/ICh0aGlzOiBULCAuLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiB1bmtub3duXG4gIDogKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rj4pID0+IHVua25vd247XG5cbmZ1bmN0aW9uIGV4dHJhY3RPcHRpb25zKGFyZ3M6IGFueVtdKTogW09wdGlvbnNGYWN0b3J5IHwgdW5kZWZpbmVkLCBhbnlbXV0ge1xuICBsZXQgbGFzdCA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgbGV0IGFvOiBPcHRpb25zRmFjdG9yeSB8IHVuZGVmaW5lZDtcblxuICAvLyBTaW1wbGUgKG5vdCBwZXJmZWN0KSBjaGVjayBpZiBsYXN0IGFyZ3VlbnQgaXMgb3B0aW9uc1xuICBpZiAoXCJjcmVhdGVcIiBpbiBsYXN0KSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDAsIGFyZ3MubGVuZ3RoIC0gMSk7XG4gICAgYW8gPSBsYXN0O1xuICB9XG4gIHJldHVybiBbYW8sIGFyZ3NdO1xufVxuXG4vKipcbiAqIFRvb2xpbmcgdG8gd3JhcCBhIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIHdyYXAge1xuICBleHBvcnQgZnVuY3Rpb24gYXN5bmM8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+PihcbiAgICBmOiBGXG4gICk6IEFzeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBsZXQgW29wdGlvbnMsIGZuQXJnc10gPSBleHRyYWN0T3B0aW9ucyhhcmdzKTtcbiAgICAgIHJldHVybiBjYWxsQXN5bmModGhpcywgZiwgZm5BcmdzIGFzIGFueSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzIGFzIGFueTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBzeW5jPEYgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55Pj4oXG4gICAgZjogRlxuICApOiBTeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gY2FsbFN5bmModGhpcywgZiwgYXJncyBhcyBhbnkpO1xuICAgIH07XG4gICAgcmV0dXJuIHJlcyBhcyBhbnk7XG4gIH1cbn1cblxuLyoqXG4gKiBUb29saW5nIHRvIGZvcndhcmQgYSBmdW5jdGlvbiB0byBhbm90aGVyIGZ1bmN0aW9uIGRlZmluZWQgb24gdGhlIHRoaXMgb2JqZWN0LlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGZvcndhcmQge1xuICBleHBvcnQgZnVuY3Rpb24gYXN5bmM8XG4gICAgRiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+ID0gbmV2ZXJcbiAgPihrZXk6IHN0cmluZyk6IEFzeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBsZXQgW29wdGlvbnMsIGZuQXJnc10gPSBleHRyYWN0T3B0aW9ucyhhcmdzKTtcbiAgICAgIHJldHVybiBjYWxsQXN5bmModGhpcywgdGhpc1trZXldLCBmbkFyZ3MgYXMgYW55LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIHJldHVybiByZXMgYXMgYW55O1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHN5bmM8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+PihcbiAgICBrZXk6IHN0cmluZ1xuICApOiBTeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gY2FsbFN5bmModGhpcywgdGhpc1trZXldLCBhcmdzIGFzIGFueSk7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzIGFzIGFueTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFzeW5jT3B0aW9ucywgRGVmYXVsdEFzeW5jT3B0aW9ucywgZm9yd2FyZCwgd3JhcCB9IGZyb20gXCIuLi9Bc3luY1wiO1xuXG5leHBvcnQgZW51bSBNYXRoVHlwZSB7XG4gIEluZmluaXR5ID0gXCJpbmZpbml0eVwiLFxuICBDb21wbGV4ID0gXCJjb21wbGV4XCIsXG4gIE1vZWJpdXMgPSBcIm1vZWJpdXNcIixcbn1cblxuaW50ZXJmYWNlIFRlWGFibGUge1xuICB0b1RlWCgpOiBTdHJpbmc7XG59XG5cbi8qKlxuICogSW5maW5pdHlcbiAqL1xuZXhwb3J0IGNvbnN0IG9vID0ge1xuICBtYXRodHlwZTogTWF0aFR5cGUuSW5maW5pdHksXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgb28gPSB0eXBlb2Ygb287XG5cbmV4cG9ydCBjbGFzcyBSYW5nZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzdGFydDogbnVtYmVyLFxuICAgIHB1YmxpYyBlbmQ6IG51bWJlcixcbiAgICBwdWJsaWMgc3RlcDogbnVtYmVyID0gMVxuICApIHt9XG5cbiAgKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGxldCB7IHN0YXJ0OiB2LCBzdGVwLCBlbmQgfSA9IHRoaXM7XG4gICAgd2hpbGUgKHYgPCBlbmQpIHtcbiAgICAgIHlpZWxkIHY7XG4gICAgICB2ICs9IHN0ZXA7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdG8gY29udmVydCBkaWZmZXJlbnQgYXJndW1lbnRzIHRvIGluc3RhbmNlcyBvZiB0aGUgQ29tcGxleCBjbGFzcy5cbiAqIEBwYXJhbSByZWFsXG4gKiBAcGFyYW0gaW1hZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3BseChyZWFsOiBudW1iZXIsIGltYWc/OiBudW1iZXIpOiBDb21wbGV4O1xuLyoqXG4gKiBGdW5jdGlvbiB0byBjb252ZXJ0IGRpZmZlcmVudCBhcmd1bWVudHMgdG8gaW5zdGFuY2VzIG9mIHRoZSBDb21wbGV4IGNsYXNzLlxuICogQHBhcmFtIGNvbXBsZXggQXJyYXkgb2YgZm9ybSBbcmVhbCwgaW1hZ11cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNwbHgoY29tcGxleDogW251bWJlciwgbnVtYmVyXSk6IENvbXBsZXg7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNvbnZlcnQgZGlmZmVyZW50IGFyZ3VtZW50cyB0byBpbnN0YW5jZXMgb2YgdGhlIENvbXBsZXggY2xhc3MuXG4gKiBAcGFyYW0gY29tcGxleFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3BseChjb21wbGV4OiBDb21wbGV4KTogQ29tcGxleDtcbmV4cG9ydCBmdW5jdGlvbiBjcGx4KFxuICBhOiBudW1iZXIgfCBbbnVtYmVyLCBudW1iZXJdIHwgQ29tcGxleCxcbiAgYj86IG51bWJlclxuKTogQ29tcGxleCB7XG4gIHJldHVybiB0eXBlb2YgYSA9PT0gXCJudW1iZXJcIlxuICAgID8gbmV3IENvbXBsZXgoYSwgYilcbiAgICA6IEFycmF5LmlzQXJyYXkoYSlcbiAgICA/IG5ldyBDb21wbGV4KGFbMF0sIGFbMV0pXG4gICAgOiBhO1xufVxuXG5leHBvcnQgY2xhc3MgQ29tcGxleCBpbXBsZW1lbnRzIFRlWGFibGUge1xuICBtYXRodHlwZSA9IE1hdGhUeXBlLkNvbXBsZXg7XG4gIHJlYWw6IG51bWJlcjtcbiAgaW1hZzogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHJlYWw6IG51bWJlciwgaW1hZzogbnVtYmVyID0gMCkge1xuICAgIHRoaXMucmVhbCA9IHJlYWw7XG4gICAgdGhpcy5pbWFnID0gaW1hZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFic29sdXRlIHZhbHVlIHNxdWFyZWQuIFRoaXMgaXMgZmFzdGVyIHRoYW4gYGFicygpYFxuICAgKiBAcmV0dXJucyAkfHp8XjIkXG4gICAqL1xuICBhYnMyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVhbCAqIHRoaXMucmVhbCArIHRoaXMuaW1hZyAqIHRoaXMuaW1hZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFic29sdXRlIHZhbHVlLlxuICAgKiBAcmV0dXJucyAkfHp8JFxuICAgKi9cbiAgYWJzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmFiczIoKSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdmFsdWUgdG8gdGhpcy5cbiAgICogQHBhcmFtIG90aGVyXG4gICAqL1xuICBhZGQob3RoZXI6IG51bWJlciB8IENvbXBsZXgpOiBDb21wbGV4IHtcbiAgICBpZiAodHlwZW9mIG90aGVyID09PSBcIm51bWJlclwiKVxuICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCArIG90aGVyLCB0aGlzLmltYWcpO1xuICAgIGVsc2UgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCArIG90aGVyLnJlYWwsIHRoaXMuaW1hZyArIG90aGVyLmltYWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0IGEgdmFsdWUgZnJvbSB0aGlzLlxuICAgKiBAcGFyYW0gb3RoZXJcbiAgICovXG4gIHN1YihvdGhlcjogbnVtYmVyIHwgQ29tcGxleCk6IENvbXBsZXgge1xuICAgIGlmICh0eXBlb2Ygb3RoZXIgPT09IFwibnVtYmVyXCIpXG4gICAgICByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5yZWFsIC0gb3RoZXIsIHRoaXMuaW1hZyk7XG4gICAgZWxzZSByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5yZWFsIC0gb3RoZXIucmVhbCwgdGhpcy5pbWFnIC0gb3RoZXIuaW1hZyk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgYSB2YWx1ZSB3aXRoIHRoaXMuXG4gICAqIEBwYXJhbSBvdGhlclxuICAgKi9cbiAgbXVsKG90aGVyOiBudW1iZXIgfCBDb21wbGV4KTogQ29tcGxleCB7XG4gICAgaWYgKHR5cGVvZiBvdGhlciA9PT0gXCJudW1iZXJcIilcbiAgICAgIHJldHVybiBuZXcgQ29tcGxleChvdGhlciAqIHRoaXMucmVhbCwgb3RoZXIgKiB0aGlzLmltYWcpO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBuZXcgQ29tcGxleChcbiAgICAgICAgdGhpcy5yZWFsICogb3RoZXIucmVhbCAtIHRoaXMuaW1hZyAqIG90aGVyLmltYWcsXG4gICAgICAgIHRoaXMuaW1hZyAqIG90aGVyLnJlYWwgKyB0aGlzLnJlYWwgKiBvdGhlci5pbWFnXG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIERldmlkZSB0aGlzIGJ5IGFub3RoZXIgdmFsdWVcbiAgICogQHBhcmFtIG90aGVyXG4gICAqL1xuICBkaXYob3RoZXI6IG51bWJlciB8IENvbXBsZXgpOiBDb21wbGV4IHtcbiAgICBpZiAodHlwZW9mIG90aGVyID09PSBcIm51bWJlclwiKVxuICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCAvIG90aGVyLCB0aGlzLmltYWcgLyBvdGhlcik7XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5tdWwob3RoZXIuaW52KCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZlcnQgdGhpcyB2YWx1ZVxuICAgKiBAcmV0dXJucyAkel57LTF9JFxuICAgKi9cbiAgaW52KCk6IENvbXBsZXgge1xuICAgIHZhciBhMiA9IHRoaXMuYWJzMigpO1xuICAgIHJldHVybiBuZXcgQ29tcGxleCh0aGlzLnJlYWwgLyBhMiwgLXRoaXMuaW1hZyAvIGEyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFyZ3VtZW50IGlmIHRoaXMuXG4gICAqIEByZXR1cm5zICRcXHRoZXRhIFxcaW4gWzAsIDJcXHBpKSQgd2hlcmUgJHogPSB8enwgZV57aSBcXHRoZXRhfSQuXG4gICAqL1xuICBhcmcoKSB7XG4gICAgdmFyIHJlID0gdGhpcy5yZWFsO1xuICAgIHZhciBpbSA9IHRoaXMuaW1hZztcbiAgICBpZiAocmUgPT0gMCkge1xuICAgICAgaWYgKGltID4gMCkgcmV0dXJuIDAuNSAqIE1hdGguUEk7XG4gICAgICBlbHNlIGlmIChpbSA8IDApIHJldHVybiAxLjUgKiBNYXRoLlBJO1xuICAgICAgZWxzZSByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKHJlID49IDApIHtcbiAgICAgIGNvbnN0IHBoaSA9IE1hdGguYXRhbigoMS4wICogaW0pIC8gcmUpO1xuICAgICAgaWYgKHBoaSA8IDApIHJldHVybiAyICogTWF0aC5QSSArIHBoaTtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLmF0YW4oKDEuMCAqIGltKSAvIHJlKSArIE1hdGguUEk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCB0aGlzIHRvIFRlWFxuICAgKi9cbiAgdG9UZVgoKSB7XG4gICAgaWYgKHRoaXMuaW1hZyA9PSAwKSByZXR1cm4gYCR7dGhpcy5yZWFsfWA7XG4gICAgZWxzZSBpZiAodGhpcy5yZWFsID09IDApIHJldHVybiBgJHt0aGlzLmltYWd9aWA7XG4gICAgZWxzZSByZXR1cm4gYCR7dGhpcy5yZWFsfSArICR7dGhpcy5pbWFnfWlgO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2ViaXVzIGltcGxlbWVudHMgVGVYYWJsZSB7XG4gIG1hdGh0eXBlOiBNYXRoVHlwZS5Nb2ViaXVzID0gTWF0aFR5cGUuTW9lYml1cztcbiAgbTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1vZWJpb3VzIHZhbHVlIHdpdGggbWF0cml4IFtbbV97MCwwfSwgbV97MCwxfV0sIFttX3sxLDB9LCBtX3sxLDF9XV0uXG4gICAqIFRoZSB0cmFuc2Zvcm0gaXMgZ2l2ZW4gYnkgJHogXFx0byBcXGZyYWN7bV97MCwwfSB6ICsgbV97MCwxfX17bV97MSwwfSB6ICsgbV97MSwxfX0kLlxuICAgKiAhISEgVGhlIGRldGVybWluYW50IHNob3VsZCBiZSAxLiBUaGlzIGlzIG5vdCBjaGVja2VkIGFuZCBjb3VsZCBsZWFkIHRvIGVycm9ycy4gISEhXG4gICAqIEBwYXJhbSBtMDBcbiAgICogQHBhcmFtIG0wMVxuICAgKiBAcGFyYW0gbTEwXG4gICAqIEBwYXJhbSBtMTFcbiAgICovXG4gIGNvbnN0cnVjdG9yKG0wMDogbnVtYmVyLCBtMDE6IG51bWJlciwgbTEwOiBudW1iZXIsIG0xMTogbnVtYmVyKSB7XG4gICAgdGhpcy5tID0gW20wMCwgbTAxLCBtMTAsIG0xMV07XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgdHdvIE1vZWJpb3VzIG1hdHJpY2llcyB0b2dldGhlci5cbiAgICogUmVzdWx0IGlzIHRoZSB0cmFuc2Zvcm0geiAtPiB0aGlzKCBvdGhlcih6KSApLlxuICAgKiBAcGFyYW0gb3RoZXJcbiAgICogQHJldHVybnNcbiAgICovXG4gIG11bChvdGhlcjogTW9lYml1cyk6IE1vZWJpdXMge1xuICAgIGNvbnN0IG0xID0gdGhpcy5tO1xuICAgIGNvbnN0IG0yID0gb3RoZXIubTtcbiAgICByZXR1cm4gbmV3IE1vZWJpdXMoXG4gICAgICBtMVswXSAqIG0yWzBdICsgbTFbMV0gKiBtMlsyXSxcbiAgICAgIG0xWzBdICogbTJbMV0gKyBtMVsxXSAqIG0yWzNdLFxuICAgICAgbTFbMl0gKiBtMlswXSArIG0xWzNdICogbTJbMl0sXG4gICAgICBtMVsyXSAqIG0yWzFdICsgbTFbM10gKiBtMlszXVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSW52ZXJ0IHRoaXMgdHJhbnNmb3JtXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBpbnYoKTogTW9lYml1cyB7XG4gICAgY29uc3QgbSA9IHRoaXMubTtcbiAgICByZXR1cm4gbmV3IE1vZWJpdXMobVszXSwgLW1bMV0sIC1tWzJdLCBtWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gYSBjb21wbGV4IHZhbHVlIHVzaW5nIHRoZSBtb2ViaW91cyB0cmFuc2Zvcm0uXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgdHJhbnNmb3JtKGE6IG51bWJlciwgYj86IG51bWJlcik6IENvbXBsZXggfCBvbztcbiAgdHJhbnNmb3JtKGE6IENvbXBsZXggfCBvbyk6IENvbXBsZXggfCBvbztcbiAgdHJhbnNmb3JtKGE6IG51bWJlciB8IENvbXBsZXggfCBvbywgYj86IG51bWJlcik6IENvbXBsZXggfCBvbyB7XG4gICAgaWYgKHR5cGVvZiBhID09PSBcIm51bWJlclwiKSBhID0gY3BseChhLCBiKTtcbiAgICBlbHNlIGlmIChhLm1hdGh0eXBlID09PSBNYXRoVHlwZS5JbmZpbml0eSkge1xuICAgICAgaWYgKHRoaXMubVsyXSA9PSAwKSByZXR1cm4gb287XG4gICAgICByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5tWzBdIC8gdGhpcy5tWzJdKTtcbiAgICB9XG4gICAgY29uc3QgbSA9IHRoaXMubTtcbiAgICBjb25zdCBxID0gYS5tdWwobVsyXSkuYWRkKG1bM10pO1xuICAgIGlmIChxLnJlYWwgPT0gMCAmJiBxLmltYWcgPT0gMCkgcmV0dXJuIG9vO1xuICAgIHJldHVybiBhLm11bChtWzBdKS5hZGQobVsxXSkuZGl2KHEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdG8gYSBUZVggbWF0cml4LlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgdG9UZVgoKSB7XG4gICAgcmV0dXJuIGBcXFxcYmVnaW57cG1hdHJpeH0ke3RoaXMubVswXX0mJHt0aGlzLm1bMV19XFxcXFxcXFwgJHt0aGlzLm1bMl19JiR7dGhpcy5tWzNdfVxcXFxlbmR7cG1hdHJpeH1gO1xuICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgY29uZ3J1ZW5jZVN1Ymdyb3VwcyB7XG4gIGV4cG9ydCBjbGFzcyBDb25ncnVlbmNlU3ViZ3JvdXAgaW1wbGVtZW50cyBUZVhhYmxlIHtcbiAgICBpbmRpY2F0b3I6IChsZXZlbDogbnVtYmVyLCB2YWx1ZTogTW9lYml1cykgPT4gYm9vbGVhbjtcbiAgICB0ZXg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgaW5kaWNhdG9yOiAobGV2ZWw6IG51bWJlciwgdmFsdWU6IE1vZWJpdXMpID0+IGJvb2xlYW4sXG4gICAgICB0ZXg6IHN0cmluZ1xuICAgICkge1xuICAgICAgdGhpcy5pbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG4gICAgICB0aGlzLnRleCA9IHRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3NldCByZXByZXNlbnRhdGl2ZSBmb3IgYSB2YWx1ZSBpbiBhIHNldCBvZiByZXByZXNlbnRhdGl2ZXMuXG4gICAgICogQHBhcmFtIGxldmVsIFRoZSBsZXZlbCBvZiB0aGlzIHRoZSBncm91cC5cbiAgICAgKiBAcGFyYW0gcmVwcnMgVGhlIHNldCBvZiByZXByZXNlbnRhdGl2ZXNcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlXG4gICAgICogQHJldHVybnMgVGhlIGluZGV4IGluIHRoZSBzZXQgb3IgLTFcbiAgICAgKi9cbiAgICBmaW5kQ29zZXRJbmRleChsZXZlbDogbnVtYmVyLCByZXByczogTW9lYml1c1tdLCB2YWx1ZTogTW9lYml1cyk6IG51bWJlciB7XG4gICAgICBjb25zdCB4aW52ID0gdmFsdWUuaW52KCk7XG4gICAgICBjb25zdCBpbmQgPSB0aGlzLmluZGljYXRvcjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVwcnMubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmIChpbmQobGV2ZWwsIHJlcHJzW2ldLm11bCh4aW52KSkpIHJldHVybiBpO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNvc2V0IHJlcHJlc2VudGF0aXZlIGZvciBhIHZhbHVlIGluIGEgc2V0IG9mIHJlcHJlc2VudGF0aXZlcy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsIG9mIHRoaXMgdGhlIGdyb3VwLlxuICAgICAqIEBwYXJhbSByZXBycyBUaGUgc2V0IG9mIHJlcHJlc2VudGF0aXZlc1xuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWVcbiAgICAgKiBAcmV0dXJucyBUaGUgY29zZXQgcmVwcmVzZW50YXRpdmVcbiAgICAgKi9cbiAgICBmaW5kQ29zZXQoXG4gICAgICBsZXZlbDogbnVtYmVyLFxuICAgICAgbGlzdDogTW9lYml1c1tdLFxuICAgICAgdmFsdWU6IE1vZWJpdXNcbiAgICApOiBNb2ViaXVzIHwgdW5kZWZpbmVkIHtcbiAgICAgIGNvbnN0IHhpbnYgPSB2YWx1ZS5pbnYoKTtcbiAgICAgIGNvbnN0IGluZCA9IHRoaXMuaW5kaWNhdG9yO1xuICAgICAgcmV0dXJuIGxpc3QuZmluZCgodmFsdWU6IE1vZWJpdXMpID0+IHtcbiAgICAgICAgcmV0dXJuIGluZChsZXZlbCwgdmFsdWUubXVsKHhpbnYpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEZpbmQgY29zZXQgcmVwcmVzZW50YXRpdmVzLlxuICAgICAqIFRoZSBmdW5jdGlvbiB5aWVsZHMgbXVsdGlwbGUgdGltZXMuIFRoZSB5aWVsZHMgYXJlIGVpdGhlciBpZ25vcmVkIG9yIHVzZWQgdG9cbiAgICAgKiBjcmVhdGUgYSBub24tYmxvY2tpbmcgYXN5bmMgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGxldmVsIExldmVsIG9mIHRoZSBjb25ncnVlbmNlIHN1Ymdyb3VwLlxuICAgICAqIEByZXR1cm5zIEEgbGlzdCBvZiBjb3NldCByZXByZXNlbnRhdGl2ZXMuXG4gICAgICovXG4gICAgKl9jb3NldFJlcHJlc2VudGF0aXZlcyhsZXZlbDogbnVtYmVyKTogR2VuZXJhdG9yPHZvaWQsIE1vZWJpdXNbXSwgdm9pZD4ge1xuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGxldmVsKSB8fCBsZXZlbCA8PSAwKSB0aHJvdyBcIkludmFsaWQgTGV2ZWxcIjtcblxuICAgICAgY29uc3QgZ2VuZXJhdG9ycyA9IFtcbiAgICAgICAgbmV3IE1vZWJpdXMoMCwgLTEsIDEsIDApLFxuICAgICAgICBuZXcgTW9lYml1cygxLCAxLCAwLCAxKSxcbiAgICAgICAgbmV3IE1vZWJpdXMoMSwgLTEsIDAsIDEpLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGdyb3VwID0gdGhpcztcbiAgICAgIGNvbnN0IHJlcHJzID0gW25ldyBNb2ViaXVzKDEsIDAsIDAsIDEpXTtcblxuICAgICAgdmFyIGNoZWNrczogTW9lYml1c1tdID0gW107XG4gICAgICB2YXIgc2VlZHM6IE1vZWJpdXNbXSA9IFtdO1xuICAgICAgdmFyIGFkZGVkID0gW25ldyBNb2ViaXVzKDEsIDAsIDAsIDEpXTtcblxuICAgICAgd2hpbGUgKGFkZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2hlY2tzID0gc2VlZHM7XG4gICAgICAgIHNlZWRzID0gYWRkZWQ7XG4gICAgICAgIGFkZGVkID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgcyBvZiBzZWVkcykge1xuICAgICAgICAgIGZvciAobGV0IGcgb2YgZ2VuZXJhdG9ycykge1xuICAgICAgICAgICAgLy8gTWF5IHlpZWxkIGNvbnRyb2xsIHRvIG1haW4gdGhyZWFkIGluIGFzeW5jIGV4ZWN1dGlvblxuICAgICAgICAgICAgeWllbGQ7XG5cbiAgICAgICAgICAgIGxldCBuID0gcy5tdWwoZyk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGdyb3VwLmZpbmRDb3NldEluZGV4KGxldmVsLCBjaGVja3MsIG4pID09IC0xICYmXG4gICAgICAgICAgICAgIGdyb3VwLmZpbmRDb3NldEluZGV4KGxldmVsLCBhZGRlZCwgbikgPT0gLTEgJiZcbiAgICAgICAgICAgICAgZ3JvdXAuZmluZENvc2V0SW5kZXgobGV2ZWwsIHNlZWRzLCBuKSA9PSAtMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJlcHJzLnB1c2gobik7XG4gICAgICAgICAgICAgIGFkZGVkLnB1c2gobik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVwcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBjb3NldFJlcHJlc2VudGF0aXZlcy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsIG9mIHRoZSBncm91cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbGlzdCBvZiBjb3NldFJlcHJlc2VudGF0aXZlcy5cbiAgICAgKi9cbiAgICBjb3NldFJlcHJlc2VudGF0aXZlcyA9IGZvcndhcmQuc3luYzxcbiAgICAgIENvbmdydWVuY2VTdWJncm91cFtcIl9jb3NldFJlcHJlc2VudGF0aXZlc1wiXVxuICAgID4oXCJfY29zZXRSZXByZXNlbnRhdGl2ZXNcIik7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIGNvc2V0UmVwcmVzZW50YXRpdmVzLlxuICAgICAqIEZ1bmN0aW9uIG1heSB5aWVsZCBjb250cm9sIGFuZCByZXN1bWUgbmV4dCBmcmFtZVxuICAgICAqIGlmIHRoZSBjb21wdXRhdGlvbiB0YWtlcyB0b28gbG9uZy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsLlxuICAgICAqIEBwYXJhbSBhbyBUaGUgQXN5bmNPcHRpb25zIHRvIHVzZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBsaXN0IG9mIGNvc2V0IHJlcHJlc2VudGF0aXZlcy5cbiAgICAgKi9cbiAgICBjb3NldFJlcHJlc2VudGF0aXZlc0FzeW5jID0gZm9yd2FyZC5hc3luYzxcbiAgICAgIENvbmdydWVuY2VTdWJncm91cFtcIl9jb3NldFJlcHJlc2VudGF0aXZlc1wiXVxuICAgID4oXCJfY29zZXRSZXByZXNlbnRhdGl2ZXNcIik7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUZVggcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHcm91cC5cbiAgICAgKi9cbiAgICB0b1RlWCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleDtcbiAgICB9XG4gIH1cblxuICAvKiogQGludGVybmFsIGNoZWNrIFt2MV0gPSBbdjJdIChtb2QgW21vZHVsdXNdKSAqL1xuICBmdW5jdGlvbiBfbW9kX2VxKHYxOiBudW1iZXIsIHYyOiBudW1iZXIsIG1vZHVsdXM6IG51bWJlcikge1xuICAgIHJldHVybiAodjEgLSB2MikgJSBtb2R1bHVzID09PSAwO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBmdW5jdGlvbiBfZ2FtbWFfMF9pbmRpY2F0b3IobGV2ZWw6IG51bWJlciwgdmFsdWU6IE1vZWJpdXMpIHtcbiAgICByZXR1cm4gX21vZF9lcSh2YWx1ZS5tWzJdLCAwLCBsZXZlbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvbmdydWVuY2Ugc3ViZ3JvdXAgJFxcR2FtbWFfMCQgdGhhdCBzYXRpc2ZpZXMgZm9sbG93aW5nIGNvbmdydWVuY2VzLlxuICAgKlxuICAgKiAkTSBcXGVxdWl2IFxcYmVnaW57cG1hdHJpeH0gPyAmID8gXFxcXCAwICYgPyBcXGVuZHtwbWF0cml4fSQuXG4gICAqL1xuICBleHBvcnQgY29uc3QgR2FtbWFfMCA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoXG4gICAgX2dhbW1hXzBfaW5kaWNhdG9yLFxuICAgIFwiXFxcXEdhbW1hXzBcIlxuICApO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZnVuY3Rpb24gX2dhbW1hXzFfaW5kaWNhdG9yKGxldmVsOiBudW1iZXIsIHZhbHVlOiBNb2ViaXVzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIF9tb2RfZXEodmFsdWUubVsyXSwgMCwgbGV2ZWwpICYmXG4gICAgICAoX21vZF9lcSh2YWx1ZS5tWzBdLCAxLCBsZXZlbCkgfHwgX21vZF9lcSh2YWx1ZS5tWzBdLCAtMSwgbGV2ZWwpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvbmdydWVuY2Ugc3ViZ3JvdXAgJFxcR2FtbWFfMCQgdGhhdCBzYXRpc2ZpZXMgZm9sbG93aW5nIGNvbmdydWVuY2VzLlxuICAgKlxuICAgKiAkTSBcXGVxdWl2IFxcYmVnaW57cG1hdHJpeH0gMSAmID8gXFxcXCAwICYgMSBcXGVuZHtwbWF0cml4fSQuXG4gICAqL1xuICBleHBvcnQgY29uc3QgR2FtbWFfMSA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoXG4gICAgX2dhbW1hXzFfaW5kaWNhdG9yLFxuICAgIFwiXFxcXEdhbW1hXzFcIlxuICApO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZnVuY3Rpb24gX2dhbW1hX2luZGljYXRvcihsZXZlbDogbnVtYmVyLCB2YWx1ZTogTW9lYml1cykge1xuICAgIHJldHVybiAoXG4gICAgICBfbW9kX2VxKHZhbHVlLm1bMl0sIDAsIGxldmVsKSAmJlxuICAgICAgX21vZF9lcSh2YWx1ZS5tWzFdLCAwLCBsZXZlbCkgJiZcbiAgICAgIChfbW9kX2VxKHZhbHVlLm1bMF0sIDEsIGxldmVsKSB8fCBfbW9kX2VxKHZhbHVlLm1bMF0sIC0xLCBsZXZlbCkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY29uZ3J1ZW5jZSBzdWJncm91cCAkXFxHYW1tYV8wJCB0aGF0IHNhdGlzZmllcyBmb2xsb3dpbmcgY29uZ3J1ZW5jZXMuXG4gICAqXG4gICAqICRNIFxcZXF1aXYgXFxiZWdpbntwbWF0cml4fSAxICYgMCBcXFxcIDAgJiAxIFxcZW5ke3BtYXRyaXh9JC5cbiAgICovXG4gIGV4cG9ydCBjb25zdCBHYW1tYSA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoX2dhbW1hX2luZGljYXRvciwgXCJcXFxcR2FtbWFcIik7XG4gIEdhbW1hLmNvc2V0UmVwcmVzZW50YXRpdmVzID0gZnVuY3Rpb24gKGxldmVsOiBudW1iZXIpOiBNb2ViaXVzW10ge1xuICAgIGxldCBnYW1tYV8xX2Nvc2V0ID0gR2FtbWFfMS5jb3NldFJlcHJlc2VudGF0aXZlcyhsZXZlbCk7XG4gICAgbGV0IGNvc2V0OiBNb2ViaXVzW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgbGV0IHNoaWZ0ID0gbmV3IE1vZWJpdXMoMSwgaSwgMCwgMSk7XG4gICAgICBjb3NldC5wdXNoKC4uLmdhbW1hXzFfY29zZXQubWFwKChtKSA9PiBzaGlmdC5tdWwobSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29zZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbCBNb3JlIHBlcmZvcm1hbnQgcmVwcmVzZW50YXRpdmVzIGZvciAkXFxHYW1tYShOKSQuXG4gICAqXG4gICAqIFRoZSBjb3NldCByZXByZXNlbnRhdGl2ZXMgb2YgJFxcR2FtbWEoTikkIGNhbiBiZSBjb21wdXRlZCBtb3JlIGVmZmljaWVudGx5XG4gICAqIGJ5IGNvbXB1dGluZyB0aGUgcmVwcmVzZW50YXRpdmVzIHBmICRcXEdhbW1hXzEoTikkIGZpcnN0LlxuICAgKiBUaGUgZnVsbCBzZXQgb2YgcmVwcmVzZW50YXRpdmVzIGlzIGNvbXBvc2VkIG9mIG11bHRpcGxlIHNoaWZ0cyBvZiB0aGVcbiAgICogcmVwcmVzZW50YXRpdmVzIGZyb20gJFxcR2FtbWFfMShOKSQgKHNoaWZ0ZWQgYnkgMCBcXGxlcSBuIDwgTikuXG4gICAqL1xuICBHYW1tYS5fY29zZXRSZXByZXNlbnRhdGl2ZXMgPSBmdW5jdGlvbiogKGxldmVsKSB7XG4gICAgbGV0IGdhbW1hXzFfY29zZXQgPSB5aWVsZCogR2FtbWFfMS5fY29zZXRSZXByZXNlbnRhdGl2ZXMobGV2ZWwpO1xuICAgIGxldCBjb3NldDogTW9lYml1c1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbDsgaSsrKSB7XG4gICAgICB5aWVsZDtcbiAgICAgIGxldCBzaGlmdCA9IG5ldyBNb2ViaXVzKDEsIGksIDAsIDEpO1xuICAgICAgY29zZXQucHVzaCguLi5nYW1tYV8xX2Nvc2V0Lm1hcCgobSkgPT4gc2hpZnQubXVsKG0pKSk7XG4gICAgfVxuICAgIHJldHVybiBjb3NldDtcbiAgfTtcblxuICBleHBvcnQgdHlwZSBGdW5kYW1lbnRhbERvbWFpbiA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29tcGxleCBjb3JuZXIgcG9pbnRzIG9mIHRoZSBkb21haW4uXG4gICAgICogQm91bmRhcnkgaXMgZ2l2ZW4gYnkgaHlwZXJib2xpYyBsaW5lcyBiZXR3ZWVuIHRoZW0uXG4gICAgICovXG4gICAgY29ybmVyczogKENvbXBsZXggfCBvbylbXTtcbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3NldCB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBjb21wbGV4IHZhbHVlLlxuICAgICAqL1xuICAgIGZpbmRDb3NldE9mOiAodmFsdWU6IENvbXBsZXgpID0+IE1vZWJpdXMgfCB1bmRlZmluZWQ7XG4gIH07XG5cbiAgY29uc3QgZV9waV8zID0gbmV3IENvbXBsZXgoTWF0aC5jb3MoTWF0aC5QSSAvIDMpLCBNYXRoLnNpbihNYXRoLlBJIC8gMykpO1xuICAvKipcbiAgICogRnVuZGFtZW50YWwgZG9tYWluIHdpdGggdGhlIGZvbGxvd2luZyBkZWZpbml0aW9uLlxuICAgKiAkXFx7eiBcXGluIFxcbWF0aGJie0N9IDogfHp8IFxcZ2VxIDEgJiYgLTAuNSA8PSBcXFJlIHogPD0gMC41IFxcfSRcbiAgICovXG4gIGV4cG9ydCBjb25zdCBEb21haW4xOiBGdW5kYW1lbnRhbERvbWFpbiA9IHtcbiAgICBjb3JuZXJzOiBbXG4gICAgICBvbyxcbiAgICAgIGVfcGlfMyxcbiAgICAgIG5ldyBDb21wbGV4KDAuMCwgMS4wKSxcbiAgICAgIG5ldyBDb21wbGV4KC1lX3BpXzMucmVhbCwgZV9waV8zLmltYWcpLFxuICAgIF0sXG4gICAgZmluZENvc2V0T2YodmFsdWU6IENvbXBsZXgsIG1heEl0ZXI6IG51bWJlciA9IDEwMCkge1xuICAgICAgaWYgKHZhbHVlLmltYWcgPD0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgbGV0IHJlc3VsdCA9IG5ldyBNb2ViaXVzKDEsIDAsIDAsIDEpO1xuICAgICAgbGV0IGN1cnJlbnQgPSB2YWx1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhJdGVyOyBpKyspIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT0gb28pIHJldHVybiByZXN1bHQuaW52KCk7XG5cbiAgICAgICAgdmFyIG4gPSBNYXRoLmZsb29yKGN1cnJlbnQucmVhbCArIDAuNSk7XG4gICAgICAgIHJlc3VsdCA9IG5ldyBNb2ViaXVzKDEsIC1uLCAwLCAxKS5tdWwocmVzdWx0KTtcbiAgICAgICAgY3VycmVudCA9IHJlc3VsdC50cmFuc2Zvcm0odmFsdWUpIGFzIENvbXBsZXg7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQuYWJzMigpID49IDEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmludigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ID0gbmV3IE1vZWJpdXMoMCwgMSwgLTEsIDApLm11bChyZXN1bHQpO1xuICAgICAgICBjdXJyZW50ID0gcmVzdWx0LnRyYW5zZm9ybSh2YWx1ZSkgYXMgQ29tcGxleDtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiTWF4IGl0ZXJhdGlvbnMgaW4gJ2ZpbmRNb2ViaW91c1RvRnVuZCcgcmVhY2hlZFwiKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFJlbmRlcmVyMkQsIFRleHRBbGlnbiB9IGZyb20gXCIuL1wiO1xuXG5lbnVtIERyYXdPcCB7XG4gIEJFR0lOLFxuICBNT1ZFLFxuICBMSU5FLFxuICBRVUFEUkFUSUMsXG4gIENVQklDLFxuICBBUkMsXG4gIENMT1NFLFxuICBTVFJPS0UsXG4gIEZJTEwsXG4gIFRFWFROT0RFLFxuICBDSF9MSU5FV0lEVEgsXG4gIENIX0ZPTlRTSVpFLFxuICBDSF9TVFJPS0VTVFlMRSxcbiAgQ0hfRklMTFNUWUxFLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlcjJEQnVmZmVyIGltcGxlbWVudHMgUmVuZGVyZXIyRCB7XG4gIHByaXZhdGUgZGF0YTogYW55W10gPSBbXTtcblxuICBnZXQgc3Ryb2tlU3R5bGUoKTogc3RyaW5nIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgfVxuICBnZXQgZm9udFNpemUoKTogbnVtYmVyIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgfVxuICBnZXQgbGluZVdpZHRoKCk6IG51bWJlciB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gIH1cbiAgZ2V0IGZpbGxTdHlsZSgpOiBzdHJpbmcge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG4gIHNldCBzdHJva2VTdHlsZShzdHJva2VTdHlsZTogc3RyaW5nKSB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLkNIX1NUUk9LRVNUWUxFLCBzdHJva2VTdHlsZSk7XG4gIH1cbiAgc2V0IGZpbGxTdHlsZShmaWxsU3R5bGU6IHN0cmluZykge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5DSF9GSUxMU1RZTEUsIGZpbGxTdHlsZSk7XG4gIH1cbiAgc2V0IGxpbmVXaWR0aChsaW5lV2lkdGg6IG51bWJlcikge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5DSF9MSU5FV0lEVEgsIGxpbmVXaWR0aCk7XG4gIH1cbiAgc2V0IGZvbnRTaXplKGZvbnRTaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLmRhdGEucHVzaChEcmF3T3AuQ0hfRk9OVFNJWkUsIGZvbnRTaXplKTtcbiAgfVxuICBtZWFzdXJlVGV4dCh0ZXh0OiBzdHJpbmcpOiB7XG4gICAgdG9wOiBudW1iZXI7XG4gICAgYm90OiBudW1iZXI7XG4gICAgbGVmdDogbnVtYmVyO1xuICAgIHJpZ2h0OiBudW1iZXI7XG4gIH0ge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG4gIHRleHROb2RlKHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGFsaWduOiBUZXh0QWxpZ24gPSAwKSB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLlRFWFROT0RFLCB0ZXh0LCB4LCB5LCBhbGlnbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYmVnaW5QYXRoKCkge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5CRUdJTik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLk1PVkUsIHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5MSU5FLCB4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBxdWFkcmF0aWNUbyhjcFg6IG51bWJlciwgY3BZOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLlFVQURSQVRJQywgY3BYLCBjcFksIHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGN1YmljVG8oXG4gICAgY3AxWDogbnVtYmVyLFxuICAgIGNwMVk6IG51bWJlcixcbiAgICBjcDJYOiBudW1iZXIsXG4gICAgY3AyWTogbnVtYmVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdGhpcyB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLkNVQklDLCBjcDFYLCBjcDFZLCBjcDJYLCBjcDJZLCB4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjbG9zZVBhdGgoKSB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLkNMT1NFKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZWN0KHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xuICAgIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgIHRoaXMubGluZVRvKHggKyB3LCB5KTtcbiAgICB0aGlzLmxpbmVUbyh4ICsgdywgeSArIGgpO1xuICAgIHRoaXMubGluZVRvKHgsIHkgKyBoKTtcbiAgICB0aGlzLmxpbmVUbyh4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhcmMoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICByYWRpdXM6IG51bWJlcixcbiAgICBzdGFydEFuZ2xlOiBudW1iZXIsXG4gICAgZW5kQW5nbGU6IG51bWJlcixcbiAgICBjY3c/OiBib29sZWFuXG4gICkge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5BUkMsIHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNjdyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3Ryb2tlKCkge1xuICAgIHRoaXMuZGF0YS5wdXNoKERyYXdPcC5TVFJPS0UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZpbGwoKSB7XG4gICAgdGhpcy5kYXRhLnB1c2goRHJhd09wLkZJTEwpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGZpbGxBbmRTdHJva2UoKSB7XG4gICAgLyogVE9ETyAqL1xuICAgIHRoaXMuZmlsbCgpO1xuICAgIHRoaXMuc3Ryb2tlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYXBwbHlXaXRoKFxuICAgIHI6IFJlbmRlcmVyMkQsXG4gICAgb3B0cz86IHsgc2NhbGU/OiBudW1iZXI7IG9yaWdpbj86IFtudW1iZXIsIG51bWJlcl0gfVxuICApIHtcbiAgICBsZXQgcyA9IG9wdHM/LnNjYWxlIHx8IDEsXG4gICAgICBbeDAsIHkwXSA9IG9wdHM/Lm9yaWdpbiB8fCBbMCwgMF07XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBkO1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGQgPSBkYXRhW2ldIGFzIERyYXdPcDtcblxuICAgICAgc3dpdGNoIChkKSB7XG4gICAgICAgIGNhc2UgRHJhd09wLkJFR0lOOlxuICAgICAgICAgIHIuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRHJhd09wLkNIX0ZPTlRTSVpFOlxuICAgICAgICAgIHIuZm9udFNpemUgPSBkYXRhWysraV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRHJhd09wLkNIX0xJTkVXSURUSDpcbiAgICAgICAgICByLmxpbmVXaWR0aCA9IGRhdGFbKytpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEcmF3T3AuQ0hfU1RST0tFU1RZTEU6XG4gICAgICAgICAgci5zdHJva2VTdHlsZSA9IGRhdGFbKytpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEcmF3T3AuQ0hfRklMTFNUWUxFOlxuICAgICAgICAgIHIuZmlsbFN0eWxlID0gZGF0YVsrK2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIERyYXdPcC5GSUxMOlxuICAgICAgICAgIHIuZmlsbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIERyYXdPcC5MSU5FOlxuICAgICAgICAgIHIubGluZVRvKHMgKiBkYXRhWysraV0gKyB4MCwgcyAqIGRhdGFbKytpXSArIHkwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEcmF3T3AuUVVBRFJBVElDOlxuICAgICAgICAgIHIucXVhZHJhdGljVG8oXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTBcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIERyYXdPcC5DVUJJQzpcbiAgICAgICAgICByLmN1YmljVG8oXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTBcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIERyYXdPcC5BUkM6XG4gICAgICAgICAgci5hcmMoXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeDAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldICsgeTAsXG4gICAgICAgICAgICBzICogZGF0YVsrK2ldLFxuICAgICAgICAgICAgZGF0YVsrK2ldLFxuICAgICAgICAgICAgZGF0YVsrK2ldLFxuICAgICAgICAgICAgZGF0YVsrK2ldXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEcmF3T3AuTU9WRTpcbiAgICAgICAgICByLm1vdmVUbyhzICogZGF0YVsrK2ldICsgeDAsIHMgKiBkYXRhWysraV0gKyB5MCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRHJhd09wLlNUUk9LRTpcbiAgICAgICAgICByLnN0cm9rZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIERyYXdPcC5URVhUTk9ERTpcbiAgICAgICAgICByLnRleHROb2RlKFxuICAgICAgICAgICAgZGF0YVsrK2ldLFxuICAgICAgICAgICAgcyAqIGRhdGFbKytpXSArIHgwLFxuICAgICAgICAgICAgcyAqIGRhdGFbKytpXSArIHkwLFxuICAgICAgICAgICAgZGF0YVsrK2ldXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEcmF3T3AuQ0xPU0U6XG4gICAgICAgICAgci5jbG9zZVBhdGgoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgbmV2ZXJBc3NlcnRpb246IG5ldmVyID0gZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBCdWZmZXIgZnJvbSBcIi4vQnVmZmVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyMkRBdXRvU2NhbGUgZXh0ZW5kcyBCdWZmZXIge1xuICBtaW5YOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIG1pblk6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgbWF4WDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBtYXhZOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgYWRkVmlzaWJsZUJveChsZWZ0OiBudW1iZXIsIHRvcDogbnVtYmVyLCByaWdodDogbnVtYmVyLCBib3R0b206IG51bWJlcikge1xuICAgIGxldCB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfSA9IHRoaXM7XG4gICAgdGhpcy5taW5YID1cbiAgICAgIG1pblggPT09IHVuZGVmaW5lZCA/IE1hdGgubWluKGxlZnQsIHJpZ2h0KSA6IE1hdGgubWluKGxlZnQsIHJpZ2h0LCBtaW5YKTtcbiAgICB0aGlzLm1heFggPVxuICAgICAgbWF4WCA9PT0gdW5kZWZpbmVkID8gTWF0aC5tYXgobGVmdCwgcmlnaHQpIDogTWF0aC5tYXgobGVmdCwgcmlnaHQsIG1heFgpO1xuICAgIHRoaXMubWluWSA9XG4gICAgICBtaW5ZID09PSB1bmRlZmluZWQgPyBNYXRoLm1pbih0b3AsIGJvdHRvbSkgOiBNYXRoLm1pbih0b3AsIGJvdHRvbSwgbWluWSk7XG4gICAgdGhpcy5tYXhZID1cbiAgICAgIG1heFkgPT09IHVuZGVmaW5lZCA/IE1hdGgubWF4KHRvcCwgYm90dG9tKSA6IE1hdGgubWF4KHRvcCwgYm90dG9tLCBtYXhZKTtcbiAgfVxuXG4gIGFyYyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHJhZGl1czogbnVtYmVyLFxuICAgIHN0YXJ0QW5nbGU6IG51bWJlcixcbiAgICBlbmRBbmdsZTogbnVtYmVyLFxuICAgIGNjdz86IGJvb2xlYW5cbiAgKTogdGhpcyB7XG4gICAgc3VwZXIuYXJjKHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNjdyk7XG4gICAgY29uc29sZS53YXJuKFwiTk9UIElNUExFTUVOVEVEIEZPUiBTQ0FMSU5HIVwiKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xuICAgIHN1cGVyLm1vdmVUbyh4LCB5KTtcbiAgICB0aGlzLmFkZFZpc2libGVCb3goeCwgeSwgeCwgeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaW5lVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzIHtcbiAgICBzdXBlci5saW5lVG8oeCwgeSk7XG4gICAgdGhpcy5hZGRWaXNpYmxlQm94KHgsIHksIHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXBwbHlTY2FsZWQoXG4gICAgcjogUmVuZGVyZXIyRCxcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLFxuICAgIG9wdHM/OiB7IGJ1ZmZlcj86IG51bWJlciB9XG4gICk6IHZvaWQge1xuICAgIGxldCBidWZmZXIgPSBvcHRzPy5idWZmZXIgfHwgMDtcbiAgICBsZXQgeyBtaW5YID0gMCwgbWF4WCA9IDAsIG1pblkgPSAwLCBtYXhZID0gMCB9ID0gdGhpcztcbiAgICBsZXQgcyA9IE1hdGgubWluKFxuICAgICAgKHdpZHRoIC0gMiAqIGJ1ZmZlcikgLyAobWF4WCAtIG1pblgpLFxuICAgICAgKGhlaWdodCAtIDIgKiBidWZmZXIpIC8gKG1heFkgLSBtaW5ZKVxuICAgICk7XG4gICAgbGV0IG9yaWdpbjogW251bWJlciwgbnVtYmVyXSA9IFtcbiAgICAgIDAuNSAqICh3aWR0aCAtIHMgKiAobWluWCArIG1heFgpKSxcbiAgICAgIDAuNSAqIChoZWlnaHQgLSBzICogKG1pblkgKyBtYXhZKSksXG4gICAgXTtcbiAgICBzdXBlci5hcHBseVdpdGgociwgeyBzY2FsZTogcywgb3JpZ2luOiBvcmlnaW4gfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgKiBhcyBsYXllcnMgZnJvbSBcIi4vbGF5ZXJzXCI7XG5pbXBvcnQgKiBhcyByZW5kZXIgZnJvbSBcIkBsaWIvcmVuZGVyZXJcIjtcbmltcG9ydCAqIGFzIG1hdGggZnJvbSBcIkBsaWIvbW9kdWxlcy9tYXRoXCI7XG5pbXBvcnQgU2NhbGVkUmVuZGVyIGZyb20gXCJAbGliL3JlbmRlcmVyL0F1dG9TY2FsZVwiO1xuaW1wb3J0IHsgbWFudWFsU2l6aW5nIH0gZnJvbSBcIi4vbGF5ZXJzL09wdGlvbnNcIjtcblxuZnVuY3Rpb24gZG93bmxvYWQoXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgbmFtZTogc3RyaW5nLFxuICBkYXRhVHlwZTogc3RyaW5nID0gXCJ0ZXh0L3BsYWluXCJcbikge1xuICBsZXQgZGF0YSA9IGBkYXRhOiR7ZGF0YVR5cGV9O2Jhc2U2NCwke3dpbmRvdy5idG9hKGNvbnRlbnQpfWA7XG4gIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gIGxpbmsuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgbmFtZSk7XG4gIGxpbmsuaHJlZiA9IGRhdGE7XG4gIGxpbmsuY2xpY2soKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVySHlwZXJib2xhbWV0aG9kM2QoXG4gIHI6IHJlbmRlci5SZW5kZXJlcjJELFxuICBvcHRzOiB7XG4gICAgTjogbnVtYmVyO1xuICAgIFc6IG51bWJlcjtcbiAgICBKOiBudW1iZXI7XG4gICAgY29sb3I/OiB7XG4gICAgICBzaGFkZVRvcD86IHN0cmluZztcbiAgICAgIHNoYWRlRnJvbnQ/OiBzdHJpbmc7XG4gICAgICBzaGFkZVNpZGU/OiBzdHJpbmc7XG4gICAgfTtcbiAgfVxuKSB7XG4gIGxldCB7IE4sIEosIFcgfSA9IG9wdHM7XG4gIGxldCB7XG4gICAgc2hhZGVUb3AgPSBcIiMwMDAwRkYzM1wiLFxuICAgIHNoYWRlRnJvbnQgPSBcIiNmZmNjMDAzM1wiLFxuICAgIHNoYWRlU2lkZSA9IFwiIzQ0NDQ0NFwiLFxuICB9ID0gb3B0cy5jb2xvciB8fCB7fTtcblxuICBsZXQgbE5KID0gTWF0aC5sb2coTiAvIFcpIC8gSjtcbiAgbGV0IGN1dHMgPSBbLi4ubmV3IG1hdGguUmFuZ2UoMCwgSiArIDEpXS5tYXAoKGkpID0+IFcgKiBNYXRoLmV4cChpICogbE5KKSk7XG5cbiAgbGV0IHpGYWMgPSAxIC8gNDtcbiAgbGV0IHByb2ogPSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT5cbiAgICBbeCAtIHogKiB6RmFjLCBOIC0gKHkgLSAwLjggKiB6ICogekZhYyldIGFzIFtudW1iZXIsIG51bWJlcl07XG5cbiAgZnVuY3Rpb24gZHJhd0JveFNwaWtlKGN1dHM6IG51bWJlcltdLCBbaSwgaiwga106IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSkge1xuICAgIC8vIHogZmFjZVxuICAgIGxldCBhbHBoYUhleCA9IFwiZmZcIjtcblxuICAgIHIuZmlsbFN0eWxlID0gc2hhZGVGcm9udCArIGFscGhhSGV4O1xuICAgIHIuYmVnaW5QYXRoKCk7XG4gICAgci5tb3ZlVG8oLi4ucHJvaihjdXRzW2ldLCBjdXRzW2pdLCBjdXRzW2tdKSlcbiAgICAgIC5saW5lVG8oLi4ucHJvaihjdXRzW2kgLSAxXSwgY3V0c1tqXSwgY3V0c1trXSkpXG4gICAgICAubGluZVRvKC4uLnByb2ooY3V0c1tpIC0gMV0sIGN1dHNbaiAtIDFdLCBjdXRzW2tdKSlcbiAgICAgIC5saW5lVG8oLi4ucHJvaihjdXRzW2ldLCBjdXRzW2ogLSAxXSwgY3V0c1trXSkpXG4gICAgICAuY2xvc2VQYXRoKClcbiAgICAgIC5maWxsKClcbiAgICAgIC5zdHJva2UoKTtcblxuICAgIHIuZmlsbFN0eWxlID0gc2hhZGVUb3AgKyBhbHBoYUhleDtcbiAgICByLmJlZ2luUGF0aCgpO1xuICAgIHIubW92ZVRvKC4uLnByb2ooY3V0c1tpXSwgY3V0c1tqXSwgY3V0c1trXSkpXG4gICAgICAubGluZVRvKC4uLnByb2ooY3V0c1tpIC0gMV0sIGN1dHNbal0sIGN1dHNba10pKVxuICAgICAgLmxpbmVUbyguLi5wcm9qKGN1dHNbaSAtIDFdLCBjdXRzW2pdLCBjdXRzW2sgLSAxXSkpXG4gICAgICAubGluZVRvKC4uLnByb2ooY3V0c1tpXSwgY3V0c1tqXSwgY3V0c1trIC0gMV0pKVxuICAgICAgLmNsb3NlUGF0aCgpXG4gICAgICAuZmlsbCgpXG4gICAgICAuc3Ryb2tlKCk7XG4gICAgci5maWxsU3R5bGUgPSBzaGFkZVNpZGUgKyBhbHBoYUhleDtcbiAgICByLmJlZ2luUGF0aCgpO1xuICAgIHIubW92ZVRvKC4uLnByb2ooY3V0c1tpXSwgY3V0c1tqXSwgY3V0c1trXSkpXG4gICAgICAubGluZVRvKC4uLnByb2ooY3V0c1tpXSwgY3V0c1tqXSwgY3V0c1trIC0gMV0pKVxuICAgICAgLmxpbmVUbyguLi5wcm9qKGN1dHNbaV0sIGN1dHNbaiAtIDFdLCBjdXRzW2sgLSAxXSkpXG4gICAgICAubGluZVRvKC4uLnByb2ooY3V0c1tpXSwgY3V0c1tqIC0gMV0sIGN1dHNba10pKVxuICAgICAgLmNsb3NlUGF0aCgpXG4gICAgICAuZmlsbCgpXG4gICAgICAuc3Ryb2tlKCk7XG4gIH1cblxuICByLmxpbmVXaWR0aCA9IDEuNTtcbiAgci5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xuICByLmJlZ2luUGF0aCgpO1xuICByLm1vdmVUbyguLi5wcm9qKFcsIFcsIFcpKS5saW5lVG8oLi4ucHJvaihOICsgKE4gLSBXKSAqIDAuMSwgVywgVykpO1xuICByLm1vdmVUbyguLi5wcm9qKFcsIFcsIFcpKS5saW5lVG8oLi4ucHJvaihXLCBOICsgKE4gLSBXKSAqIDAuMSwgVykpO1xuICByLm1vdmVUbyguLi5wcm9qKFcsIFcsIFcpKS5saW5lVG8oLi4ucHJvaihXLCBXLCBOICsgKE4gLSBXKSAqIDAuMSkpO1xuICByLnN0cm9rZSgpO1xuXG4gIC8qci5iZWdpblBhdGgoKS5tb3ZlVG8oLi4ucHJvaihjdXRzWzBdLCBXLCBXKSk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgY3V0cy5sZW5ndGg7IGkrKylcbiAgICByLmxpbmVUbyguLi5wcm9qKGN1dHNbaV0sIGN1dHNbY3V0cy5sZW5ndGggLSBpXSwgVykpO1xuICByLnN0cm9rZSgpOyovXG5cbiAgci5saW5lV2lkdGggPSAwLjc1O1xuICBmb3IgKGxldCBpeCA9IDE7IGl4IDwgY3V0cy5sZW5ndGg7IGl4KyspXG4gICAgZm9yIChsZXQgaXkgPSAxOyBpeSA8IGN1dHMubGVuZ3RoIC0gaXggKyAxOyBpeSsrKVxuICAgICAgZHJhd0JveFNwaWtlKGN1dHMsIFtpeCwgaXksIGN1dHMubGVuZ3RoICsgMSAtIGl4IC0gaXldKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVySHlwZXJib2xhbWV0aG9kKFxuICByOiByZW5kZXIuUmVuZGVyZXIyRCxcbiAgb3B0czoge1xuICAgIE46IG51bWJlcjtcbiAgICBXOiBudW1iZXI7XG4gICAgSjogbnVtYmVyO1xuICAgIGNvbG9yPzoge1xuICAgICAgZmlsbD86IHN0cmluZztcbiAgICAgIGVycm9yPzogc3RyaW5nO1xuICAgICAgZ3JpZExpbmU/OiBzdHJpbmc7XG4gICAgICBoeXBMaW5lPzogc3RyaW5nO1xuICAgIH07XG4gIH1cbikge1xuICBsZXQgeyBOLCBKLCBXIH0gPSBvcHRzO1xuICBsZXQge1xuICAgIGZpbGwgPSBcIiMwMDAwRkYzM1wiLFxuICAgIGVycm9yOiBlcnJvckZpbGwgPSBcIiNmZmNjMDAzM1wiLFxuICAgIGdyaWRMaW5lOiBncmlkRmlsbCA9IFwiIzQ0NDQ0NFwiLFxuICAgIGh5cExpbmU6IGh5cEZpbGwgPSBcIiMwMDAwMDBcIixcbiAgfSA9IG9wdHMuY29sb3IgfHwge307XG5cbiAgbGV0IGxOSiA9IE1hdGgubG9nKE4gLyBXKSAvIEo7XG4gIGxldCBjdXRzID0gWy4uLm5ldyBtYXRoLlJhbmdlKDAsIEogKyAxKV0ubWFwKChpKSA9PiBXICogTWF0aC5leHAoaSAqIGxOSikpO1xuXG4gIC8vIGZpbGwgYmVsb3dcbiAgci5maWxsU3R5bGUgPSBmaWxsO1xuICByLnN0cm9rZVN0eWxlID0gZ3JpZEZpbGw7XG4gIHIubGluZVdpZHRoID0gMS41O1xuICByLmJlZ2luUGF0aCgpO1xuICByLm1vdmVUbyhjdXRzWzBdLCBOIC0gY3V0c1swXSkubGluZVRvKGN1dHNbMF0sIE4gLSBjdXRzW0pdKTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBjdXRzLmxlbmd0aDsgaSsrKVxuICAgIHIubGluZVRvKGN1dHNbaSAtIDFdLCBOIC0gY3V0c1tKIC0gaV0pLmxpbmVUbyhjdXRzW2ldLCBOIC0gY3V0c1tKIC0gaV0pO1xuICByLmxpbmVUbyhjdXRzW0pdLCBOIC0gY3V0c1swXSkuY2xvc2VQYXRoKCk7XG4gIC8vci5zdHJva2UoKTtcbiAgci5maWxsKCk7XG5cbiAgLy8gZmlsbCBlcnJvcjtcbiAgci5iZWdpblBhdGgoKTtcbiAgci5maWxsU3R5bGUgPSBlcnJvckZpbGw7XG4gIHIubGluZVdpZHRoID0gMS41O1xuICByLm1vdmVUbyhjdXRzWzBdLCBOIC0gY3V0c1tKXSk7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgY3V0cy5sZW5ndGg7IGkrKylcbiAgICByLmxpbmVUbyhjdXRzW2kgLSAxXSwgTiAtIGN1dHNbSiAtIGkgKyAxXSkubGluZVRvKFxuICAgICAgY3V0c1tpXSxcbiAgICAgIE4gLSBjdXRzW0ogLSBpICsgMV1cbiAgICApO1xuICBmb3IgKHZhciBpID0gSjsgaSA+IDA7IGktLSlcbiAgICByLmxpbmVUbyhjdXRzW2ldLCBOIC0gY3V0c1tKIC0gaV0pLmxpbmVUbyhjdXRzW2kgLSAxXSwgTiAtIGN1dHNbSiAtIGldKTtcbiAgci5saW5lVG8oY3V0c1swXSwgTiAtIGN1dHNbSl0pO1xuICByLmZpbGwoKTtcblxuICAvKiBMaW5lcyAoZXZlcnkgbGluZSBvbmx5IHNpbmdsZSBzdHJva2VkIGFuZCB3aXRoIGNvcm5lcnMpICovXG4gIGxldCBwOiBbbnVtYmVyLCBudW1iZXJdO1xuICByLmxpbmVXaWR0aCA9IDE7XG4gIC8vIGxvbmdlc3QgYm94ZXMgKHxffCBzaGFwZWQpXG4gIHIuYmVnaW5QYXRoKCk7XG4gIHAgPSBbY3V0c1sxXSwgTiAtIGN1dHNbSl1dO1xuICByLm1vdmVUbyhXLCBOIC0gVylcbiAgICAubGluZVRvKFcsIHBbMV0pXG4gICAgLmxpbmVUbyhwWzBdLCBwWzFdKVxuICAgIC5saW5lVG8ocFswXSwgTiAtIFcpO1xuICBwID0gW2N1dHNbSl0sIE4gLSBjdXRzWzFdXTtcbiAgci5tb3ZlVG8oVywgTiAtIFcpXG4gICAgLmxpbmVUbyhwWzBdLCBOIC0gVylcbiAgICAubGluZVRvKHBbMF0sIHBbMV0pXG4gICAgLmxpbmVUbyhXLCBwWzFdKTtcbiAgLy8gb3RoZXIgYm94ZXMgKHxfIHNoYXBlZClcbiAgbGV0IG1heExpbmUgPSBKICsgMSxcbiAgICBtaW5MaW5lID0gMjtcbiAgZm9yICh2YXIgaSA9IG1pbkxpbmU7IGkgPD0gbWF4TGluZSAtIG1pbkxpbmU7IGkrKykge1xuICAgIHAgPSBbY3V0c1tpXSwgTiAtIGN1dHNbbWF4TGluZSAtIGldXTtcbiAgICByLm1vdmVUbyhXLCBwWzFdKVxuICAgICAgLmxpbmVUbyhwWzBdLCBwWzFdKVxuICAgICAgLmxpbmVUbyhwWzBdLCBOIC0gVyk7XG4gIH1cbiAgci5zdHJva2UoKTtcblxuICAvLyBIeXBlcmJvbGFcbiAgci5iZWdpblBhdGgoKTtcbiAgbGV0IHN0ZXBzID0gMTAwO1xuICByLmxpbmVXaWR0aCA9IDI7XG4gIHIuc3Ryb2tlU3R5bGUgPSBoeXBGaWxsO1xuICByLm1vdmVUbyhXLCBOIC0gVyk7XG4gIGZvciAobGV0IGkgb2YgWy4uLm5ldyBtYXRoLlJhbmdlKDAsIHN0ZXBzICsgMSldKSB7XG4gICAgbGV0IHYgPSBNYXRoLnBvdyhOIC8gVywgaSAvIHN0ZXBzKTtcbiAgICByLmxpbmVUbyhXICogdiwgTiAtIE4gLyB2KTtcbiAgfVxuICByLmNsb3NlUGF0aCgpO1xuICByLnN0cm9rZSgpO1xufVxuXG5mdW5jdGlvbiBkcmF3KHI6IHJlbmRlci5SZW5kZXJlcjJEKSB7XG4gIHIuZmlsbFN0eWxlID0gXCIjRkYwMDAwNTVcIjtcbiAgci5tb3ZlVG8oNTAsIDUwKTtcbiAgci5hcmMoNTAsIDUwLCAyMCwgMCwgTWF0aC5QSSwgZmFsc2UpO1xuXG4gIHIubW92ZVRvKDE1MCwgNTApO1xuICByLmFyYygxNTAsIDUwLCAyMCwgMCwgKDMgKiBNYXRoLlBJKSAvIDIsIGZhbHNlKTtcblxuICByLm1vdmVUbygyNTAsIDUwKTtcbiAgci5hcmMoMjUwLCA1MCwgMjAsIC1NYXRoLlBJLCAoMyAqIE1hdGguUEkpIC8gMiwgZmFsc2UpO1xuXG4gIHIubW92ZVRvKDM1MCwgNTApO1xuICByLmFyYygzNTAsIDUwLCAyMCwgLU1hdGguUEksICgzICogTWF0aC5QSSkgLyAyLCB0cnVlKTtcblxuICByLm1vdmVUbyg1MCwgMTUwKTtcbiAgci5hcmMoNTAsIDE1MCwgMjAsIE1hdGguUEksIDMgKiBNYXRoLlBJLCB0cnVlKTtcbiAgci5maWxsQW5kU3Ryb2tlKCk7XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXG4gIFwiaHlwZXJib2xhLWFwcFwiLFxuICBsYXllcnMuTGF5ZXJlZENvbXBvbmVudCh7XG4gICAgY29ubmVjdGVkKGNvbmZpZykge1xuICAgICAgbGV0IHN0YXRlID0ge1xuICAgICAgICBOOiAxMDAsXG4gICAgICAgIFc6IDEwLFxuICAgICAgICBKOiAxMCxcbiAgICAgICAgZGltOiBcIjNEXCIsXG4gICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgc2hhZGVUb3A6IFwiI2JiYmJiYlwiLFxuICAgICAgICAgIHNoYWRlRnJvbnQ6IFwiIzU1NTU1NVwiLFxuICAgICAgICAgIHNoYWRlU2lkZTogXCIjMTExMTExXCIsXG4gICAgICAgICAgaHlwTGluZTogXCIjMDAwMDAwXCIsXG4gICAgICAgICAgZ3JpZExpbmU6IFwiIzAwMDAwMFwiLFxuICAgICAgICAgIGZpbGw6IFwiIzMzMzMzM1wiLFxuICAgICAgICAgIGVycm9yOiBcIiM5OTk5OTlcIixcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbmZpZy5hZGRMYXllcihcbiAgICAgICAgXCJkcmF3XCIsXG4gICAgICAgIGxheWVycy5DYW52YXMoe1xuICAgICAgICAgIHVwZGF0ZShjb25maWcsIGN0eCkge1xuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjb25maWcud2lkdGgsIGNvbmZpZy5oZWlnaHQpO1xuICAgICAgICAgICAgbGV0IHNjYWxlID0gbmV3IFNjYWxlZFJlbmRlcigpO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmRpbSA9PSBcIjJEXCIpIHJlbmRlckh5cGVyYm9sYW1ldGhvZChzY2FsZSwgc3RhdGUpO1xuICAgICAgICAgICAgZWxzZSByZW5kZXJIeXBlcmJvbGFtZXRob2QzZChzY2FsZSwgc3RhdGUpO1xuXG4gICAgICAgICAgICBzY2FsZS5hcHBseVNjYWxlZChcbiAgICAgICAgICAgICAgbmV3IHJlbmRlci5DYW52YXMoY3R4KSxcbiAgICAgICAgICAgICAgY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgICBjb25maWcuaGVpZ2h0LFxuICAgICAgICAgICAgICB7IGJ1ZmZlcjogMTAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgbGV0IG9wdGlvbnMgPSBjb25maWcuYWRkTGF5ZXIoXCJvcHRpb25zXCIsIGxheWVycy5PcHRpb25zKCkpO1xuXG4gICAgICBvcHRpb25zLmFkZChcIm51bWJlclwiLCB7XG4gICAgICAgIGxhYmVsOiBcIkN1dHNcIixcbiAgICAgICAgb25DaGFuZ2U6ICh4KSA9PiB7XG4gICAgICAgICAgc3RhdGUuSiA9IHg7XG4gICAgICAgICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiBzdGF0ZS5KLFxuICAgICAgfSk7XG5cbiAgICAgIG9wdGlvbnMuYWRkKFwicmFkaW9cIiwge1xuICAgICAgICBsYWJlbDogXCJEaW1lbnNpb25cIixcbiAgICAgICAgdmFsdWVzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcIjJEXCIsIGxhYmVsOiBcIjJEXCIgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiM0RcIiwgbGFiZWw6IFwiM0RcIiB9LFxuICAgICAgICBdLFxuICAgICAgICBkZWZhdWx0OiBzdGF0ZS5kaW0sXG4gICAgICAgIG9uQ2hhbmdlOiAodmFsdWUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5kaW0gPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIG9wdGlvbnMuYWRkKFwiY29sb3JcIiwge1xuICAgICAgICBsYWJlbDogXCIzRC10b3BcIixcbiAgICAgICAgb25DaGFuZ2U6IChjKSA9PiB7XG4gICAgICAgICAgc3RhdGUuY29sb3Iuc2hhZGVUb3AgPSBjO1xuICAgICAgICAgIGNvbmZpZy51cGRhdGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogc3RhdGUuY29sb3Iuc2hhZGVUb3AsXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuYWRkKFwiY29sb3JcIiwge1xuICAgICAgICBsYWJlbDogXCIzRC1mcm9udFwiLFxuICAgICAgICBvbkNoYW5nZTogKGMpID0+IHtcbiAgICAgICAgICBzdGF0ZS5jb2xvci5zaGFkZUZyb250ID0gYztcbiAgICAgICAgICBjb25maWcudXBkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6IHN0YXRlLmNvbG9yLnNoYWRlRnJvbnQsXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuYWRkKFwiY29sb3JcIiwge1xuICAgICAgICBsYWJlbDogXCIzRC1zaWRlXCIsXG4gICAgICAgIG9uQ2hhbmdlOiAoYykgPT4ge1xuICAgICAgICAgIHN0YXRlLmNvbG9yLnNoYWRlU2lkZSA9IGM7XG4gICAgICAgICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiBzdGF0ZS5jb2xvci5zaGFkZVNpZGUsXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuYWRkKFwiY29sb3JcIiwge1xuICAgICAgICBsYWJlbDogXCIyRC1sb3dlclwiLFxuICAgICAgICBvbkNoYW5nZTogKGMpID0+IHtcbiAgICAgICAgICBzdGF0ZS5jb2xvci5maWxsID0gYztcbiAgICAgICAgICBjb25maWcudXBkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6IHN0YXRlLmNvbG9yLmZpbGwsXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuYWRkKFwiY29sb3JcIiwge1xuICAgICAgICBsYWJlbDogXCIyRC11cHBlclwiLFxuICAgICAgICBvbkNoYW5nZTogKGMpID0+IHtcbiAgICAgICAgICBzdGF0ZS5jb2xvci5lcnJvciA9IGM7XG4gICAgICAgICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiBzdGF0ZS5jb2xvci5lcnJvcixcbiAgICAgIH0pO1xuXG4gICAgICBvcHRpb25zLmFkZChtYW51YWxTaXppbmcsIGNvbmZpZyk7XG4gICAgICBvcHRpb25zLmFkZChcIm11bHRpQnV0dG9uXCIsIHtcbiAgICAgICAgbGFiZWw6IFwiRXhwb3J0IGFzXCIsXG4gICAgICAgIHZhbHVlczogW1xuICAgICAgICAgIHsgbmFtZTogXCJTVkdcIiwgbGFiZWw6IFwiU1ZHXCIgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiVGlrWlwiLCBsYWJlbDogXCJUaWtaXCIgfSxcbiAgICAgICAgXSxcbiAgICAgICAgb25DbGljayhuYW1lKSB7XG4gICAgICAgICAgbGV0IHI6IHJlbmRlci5TVkcgfCByZW5kZXIuVGlrWjtcbiAgICAgICAgICBsZXQgZmlsZU5hbWU6IHN0cmluZyA9IFwiSHlwZXJib2xhXCI7XG4gICAgICAgICAgbGV0IGRhdGFUeXBlOiBzdHJpbmc7XG4gICAgICAgICAgaWYgKG5hbWUgPT0gXCJTVkdcIikge1xuICAgICAgICAgICAgciA9IG5ldyByZW5kZXIuU1ZHKGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCk7XG4gICAgICAgICAgICBmaWxlTmFtZSArPSBcIi5zdmdcIjtcbiAgICAgICAgICAgIGRhdGFUeXBlID0gXCJpbWFnZS9zdmcreG1sXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09IFwiVGlrWlwiKSB7XG4gICAgICAgICAgICByID0gbmV3IHJlbmRlci5UaWtaKGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCk7XG4gICAgICAgICAgICBmaWxlTmFtZSArPSBcIi50aWt6XCI7XG4gICAgICAgICAgICBkYXRhVHlwZSA9IFwidGV4dC9wbGFpblwiO1xuICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGZvcm1hdFwiKTtcblxuICAgICAgICAgIGxldCBzY2FsZSA9IG5ldyBTY2FsZWRSZW5kZXIoKTtcbiAgICAgICAgICBpZiAoc3RhdGUuZGltID09IFwiMkRcIikgcmVuZGVySHlwZXJib2xhbWV0aG9kKHNjYWxlLCBzdGF0ZSk7XG4gICAgICAgICAgZWxzZSByZW5kZXJIeXBlcmJvbGFtZXRob2QzZChzY2FsZSwgc3RhdGUpO1xuICAgICAgICAgIHNjYWxlLmFwcGx5U2NhbGVkKHIsIGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCwgeyBidWZmZXI6IDEwIH0pO1xuXG4gICAgICAgICAgZG93bmxvYWQoci50b0ZpbGVTdHJpbmcoKSwgZmlsZU5hbWUsIGRhdGFUeXBlKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pXG4pO1xuIl0sCiAgIm1hcHBpbmdz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
