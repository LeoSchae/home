(()=>{var M=Math.pow;var R=(i,e,t)=>new Promise((n,r)=>{var s=l=>{try{u(t.next(l))}catch(o){r(o)}},a=l=>{try{u(t.throw(l))}catch(o){r(o)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);u((t=t.apply(i,e)).next())});function A(i,e,t,n){return R(this,null,function*(){var u,l;n!=null||(n=se);let r=n.create();(u=r.begin)==null||u.call(r);let s=e.apply(i,t),a=s.next();for(;!a.done;)r.shouldYield()&&(yield r.yield()),a=s.next();return(l=r.done)==null||l.call(r),a.value})}function G(i,e,t){let n=e.apply(i,t),r=n.next();for(;!r.done;)r=n.next();return r.value}var se={create:()=>({shouldYield(){return!1},yield(){return R(this,null,function*(){})}})};function Y(i){let e=i[i.length-1],t;return"create"in e&&(i=Array.prototype.slice.call(i,0,i.length-1),t=e),[t,i]}var K;(function(t){function i(n){return function(...s){let[a,u]=Y(s);return A(this,n,u,a)}}t.async=i;function e(n){return function(...s){return G(this,n,s)}}t.sync=e})(K||(K={}));var L;(function(t){function i(n){return function(...s){let[a,u]=Y(s);return A(this,this[n],u,a)}}t.async=i;function e(n){return function(...s){return G(this,this[n],s)}}t.sync=e})(L||(L={}));var k;(function(n){n.Infinity="infinity",n.Complex="complex",n.Moebius="moebius"})(k||(k={}));var E={mathtype:k.Infinity},ae=class{constructor(e,t,n=1){this.start=e;this.end=t;this.step=n}*[Symbol.iterator](){let{start:e,step:t,end:n}=this;for(;e<n;)yield e,e+=t}};function oe(i,e){return typeof i=="number"?new g(i,e):Array.isArray(i)?new g(i[0],i[1]):i}var g=class{constructor(e,t=0){this.mathtype=k.Complex;this.real=e,this.imag=t}abs2(){return this.real*this.real+this.imag*this.imag}abs(){return Math.sqrt(this.abs2())}add(e){return typeof e=="number"?new g(this.real+e,this.imag):new g(this.real+e.real,this.imag+e.imag)}sub(e){return typeof e=="number"?new g(this.real-e,this.imag):new g(this.real-e.real,this.imag-e.imag)}mul(e){return typeof e=="number"?new g(e*this.real,e*this.imag):new g(this.real*e.real-this.imag*e.imag,this.imag*e.real+this.real*e.imag)}div(e){return typeof e=="number"?new g(this.real/e,this.imag/e):this.mul(e.inv())}inv(){var e=this.abs2();return new g(this.real/e,-this.imag/e)}arg(){var e=this.real,t=this.imag;if(e==0)return t>0?.5*Math.PI:t<0?1.5*Math.PI:0;if(e>=0){let n=Math.atan(1*t/e);return n<0?2*Math.PI+n:n}return Math.atan(1*t/e)+Math.PI}toTeX(){return this.imag==0?`${this.real}`:this.real==0?`${this.imag}i`:`${this.real} + ${this.imag}i`}},v=class{constructor(e,t,n,r){this.mathtype=k.Moebius;this.m=[e,t,n,r]}mul(e){let t=this.m,n=e.m;return new v(t[0]*n[0]+t[1]*n[2],t[0]*n[1]+t[1]*n[3],t[2]*n[0]+t[3]*n[2],t[2]*n[1]+t[3]*n[3])}inv(){let e=this.m;return new v(e[3],-e[1],-e[2],e[0])}transform(e,t){if(typeof e=="number")e=oe(e,t);else if(e.mathtype===k.Infinity)return this.m[2]==0?E:new g(this.m[0]/this.m[2]);let n=this.m,r=e.mul(n[2]).add(n[3]);return r.real==0&&r.imag==0?E:e.mul(n[0]).add(n[1]).div(r)}toTeX(){return`\\begin{pmatrix}${this.m[0]}&${this.m[1]}\\\\ ${this.m[2]}&${this.m[3]}\\end{pmatrix}`}},W;(function(f){class i{constructor(m,d){this.cosetRepresentatives=L.sync("_cosetRepresentatives");this.cosetRepresentativesAsync=L.async("_cosetRepresentatives");this.indicator=m,this.tex=d}findCosetIndex(m,d,p){let c=p.inv(),b=this.indicator;for(var y=0;y<d.length;y++)if(b(m,d[y].mul(c)))return y;return-1}findCoset(m,d,p){let c=p.inv(),b=this.indicator;return d.find(y=>b(m,y.mul(c)))}*_cosetRepresentatives(m){if(!Number.isInteger(m)||m<=0)throw"Invalid Level";let d=[new v(0,-1,1,0),new v(1,1,0,1),new v(1,-1,0,1)],p=this,c=[new v(1,0,0,1)];for(var b=[],y=[],x=[new v(1,0,0,1)];x.length>0;){b=y,y=x,x=[];for(let S of y)for(let $ of d){yield;let T=S.mul($);p.findCosetIndex(m,b,T)==-1&&p.findCosetIndex(m,x,T)==-1&&p.findCosetIndex(m,y,T)==-1&&(c.push(T),x.push(T))}}return c}toTeX(){return this.tex}}f.CongruenceSubgroup=i;function e(h,m,d){return(h-m)%d==0}function t(h,m){return e(m.m[2],0,h)}f.Gamma_0=new i(t,"\\Gamma_0");function r(h,m){return e(m.m[2],0,h)&&(e(m.m[0],1,h)||e(m.m[0],-1,h))}f.Gamma_1=new i(r,"\\Gamma_1");function a(h,m){return e(m.m[2],0,h)&&e(m.m[1],0,h)&&(e(m.m[0],1,h)||e(m.m[0],-1,h))}f.Gamma=new i(a,"\\Gamma"),f.Gamma.cosetRepresentatives=function(h){let m=f.Gamma_1.cosetRepresentatives(h),d=[];for(let p=0;p<h;p++){let c=new v(1,p,0,1);d.push(...m.map(b=>c.mul(b)))}return d},f.Gamma._cosetRepresentatives=function*(h){let m=yield*f.Gamma_1._cosetRepresentatives(h),d=[];for(let p=0;p<h;p++){yield;let c=new v(1,p,0,1);d.push(...m.map(b=>c.mul(b)))}return d};let l=new g(Math.cos(Math.PI/3),Math.sin(Math.PI/3));f.Domain1={corners:[E,l,new g(0,1),new g(-l.real,l.imag)],findCosetOf(h,m=100){if(h.imag<=0)return;let d=new v(1,0,0,1),p=h;for(var c=0;c<m;c++){if(p==E)return d.inv();var b=Math.floor(p.real+.5);if(d=new v(1,-b,0,1).mul(d),p=d.transform(h),p.abs2()>=1)return d.inv();d=new v(0,1,-1,0).mul(d),p=d.transform(h)}console.log("Max iterations in 'findMoebiousToFund' reached")}}})(W||(W={}));var Z=2*Math.PI,q=.5/Math.PI,_=class{constructor(e,t,n){this._lineWidth=1;this._fontSize=13;this._fillColor="#000000";this._strokeColor="#000000";this.fontAscent=-1;this.fontDescent=-1;this._ctx=e,this.width=t===void 0?e.canvas.width:t,this.height=n===void 0?e.canvas.height:n,this.fontSize=13}get lineWidth(){return this._lineWidth}set lineWidth(e){this._ctx.lineWidth=e,this._lineWidth=e}get fontSize(){return this._fontSize}set fontSize(e){this._ctx.textBaseline="alphabetic",this._ctx.font=e+"px Times New Roman",this._fontSize=e;let t=this._ctx.measureText("1ATOgjp");this.fontAscent=t.fontBoundingBoxAscent||t.actualBoundingBoxAscent,this.fontDescent=t.fontBoundingBoxDescent||t.actualBoundingBoxDescent}get fillStyle(){return this._fillColor}set fillStyle(e){this._ctx.fillStyle=e,this._fillColor=e}get strokeStyle(){return this._strokeColor}set strokeStyle(e){this._ctx.strokeStyle=e,this._strokeColor=e}measureText(e){this._ctx.textAlign="center";let t=this._ctx.measureText(e),n=(this.fontAscent+this.fontDescent)/2;return{top:n*1.3,bot:n*1,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight}}textNode(e,t,n,r){let s="middle",a="center";switch(r&12){case w.T:s="top";break;case w.B:s="bottom";break}switch(r&3){case w.L:a="left";break;case w.R:a="right";break}return this._ctx.textBaseline=s,this._ctx.textAlign=a,this._ctx.fillText(e,t,n),this}beginPath(){return this._ctx.beginPath(),this}moveTo(e,t){return this._ctx.moveTo(e,t),this}lineTo(e,t){return this._ctx.lineTo(e,t),this}quadraticTo(e,t,n,r){return this._ctx.quadraticCurveTo(e,t,n,r),this}cubicTo(e,t,n,r,s,a){return this._ctx.bezierCurveTo(e,t,n,r,s,a),this}closePath(){return this._ctx.closePath(),this}rect(e,t,n,r){return this._ctx.rect(e,t,n,r),this}arc(e,t,n,r,s,a){return this._ctx.arc(e,t,n,r-Z*Math.floor(q*r),s-Z*Math.floor(q*s),!a),this}stroke(){return this._ctx.stroke(),this}fill(){return this._ctx.fill(),this}fillAndStroke(){return this.fill(),this.stroke(),this}};var J=class{constructor(e,t,...n){this.name=e;this.children=n,this.attributes=t||{}}attrString(){return Object.entries(this.attributes).map(([e,t])=>`${e}="${t}"`).join(" ")}chString(){return this.children.map(e=>e.toString()).join("")}append(e){this.children.push(e)}toString(){let e=this.name;return e===""?this.chString():`<${e} ${this.attrString()}>${this.chString()}</${e}>`}};function V(i,e,...t){return typeof i=="function"?i(e,...t):new J(i,e,...t)}V.Fragment="";var Ee=180/Math.PI,Pe=2*Math.PI,$e=.5/Math.PI;var w;(function(o){o[o.C=0]="C",o[o.T=8]="T",o[o.L=2]="L",o[o.R=1]="R",o[o.B=4]="B",o[o.TL=10]="TL",o[o.TR=9]="TR",o[o.BL=6]="BL",o[o.BR=5]="BR"})(w||(w={}));var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",U=[..."\u{1D538}\u{1D539}\u2102\u{1D53B}\u{1D53C}\u{1D53D}\u{1D53E}\u210D\u{1D540}\u{1D541}\u{1D542}\u{1D543}\u{1D544}\u2115\u{1D546}\u2119\u211A\u211D\u{1D54A}\u{1D54B}\u{1D54C}\u{1D54D}\u{1D54E}\u{1D54F}\u{1D550}\u2124\u{1D552}\u{1D553}\u{1D554}\u{1D555}\u{1D556}\u{1D557}\u{1D558}\u{1D559}\u{1D55A}\u{1D55B}\u{1D55C}\u{1D55D}\u{1D55E}\u{1D55F}\u{1D560}\u{1D561}\u{1D562}\u{1D563}\u{1D564}\u{1D565}\u{1D566}\u{1D567}\u{1D568}\u{1D569}\u{1D56A}\u{1D56B}\u{1D7D8}\u{1D7D9}\u{1D7DA}\u{1D7DB}\u{1D7DC}\u{1D7DD}\u{1D7DE}\u{1D7DF}\u{1D7E0}\u{1D7E1}"],Q=[..."\u{1D56C}\u{1D56D}\u{1D56E}\u{1D56F}\u{1D570}\u{1D571}\u{1D572}\u{1D573}\u{1D574}\u{1D575}\u{1D576}\u{1D577}\u{1D578}\u{1D579}\u{1D57A}\u{1D57B}\u{1D57C}\u{1D57D}\u{1D57E}\u{1D57F}\u{1D580}\u{1D581}\u{1D582}\u{1D583}\u{1D584}\u{1D585}\u{1D586}\u{1D587}\u{1D588}\u{1D589}\u{1D58A}\u{1D58B}\u{1D58C}\u{1D58D}\u{1D58E}\u{1D58F}\u{1D590}\u{1D591}\u{1D592}\u{1D593}\u{1D594}\u{1D595}\u{1D596}\u{1D597}\u{1D598}\u{1D599}\u{1D59A}\u{1D59B}\u{1D59C}\u{1D59D}\u{1D59E}\u{1D59F}"],I={Alpha:"\u0391",alpha:"\u03B1",Beta:"\u0392",beta:"\u03B2",Gamma:"\u0393",gamma:"\u03B3",Delta:"\u0394",delta:"\u03B4",Epsilon:"\u0395",epsilon:"\u03B5",Zeta:"\u0396",zeta:"\u03B6",Eta:"\u0397",eta:"\u03B7",Theta:"\u0398",theta:"\u03B8",Iota:"\u0399",iota:"\u03B9",Kappa:"\u039A",kappa:"\u03BA",Lambda:"\u039B",lambda:"\u03BB",Mu:"\u039C",mu:"\u03BC",Nu:"\u039D",nu:"\u03BD",Xi:"\u039E",xi:"\u03BE",Omicron:"\u039F",omicron:"\u03BF",Pi:"\u03A0",pi:"\u03C0",Rho:"\u03A1",rho:"\u03C1",Sigma:"\u03A3",sigma:"\u03C3",Tau:"\u03A4",tau:"\u03C4",Upsilon:"\u03A5",upsilon:"\u03C5",Phi:"\u03A6",phi:"\u03C6",Chi:"\u03A7",chi:"\u03C7",Psi:"\u03A8",psi:"\u03C8",Omega:"\u03A9",omega:"\u03C9",mathBB:function(i){if(i.length==1){let e=P.indexOf(i);return U[e]}else{let e="";for(let t=0;t<i.length;t++)e=e+U[P.indexOf(i.charAt(t))];return e}},mathFrak:function(i){if(i.length==1){let e=P.indexOf(i);return Q[e]}else{let e="";for(let t=0;t<i.length;t++)e=e+Q[P.indexOf(i.charAt(t))];return e}}};var N=class{constructor(e,t){this.origin=e;this.scale=t}project(e){return Array.isArray(e)&&(e=new g(e[0],e[1])),[e.real*this.scale+this.origin[0],-e.imag*this.scale+this.origin[1]]}invert(e){return new g((e[0]-this.origin[0])/this.scale,-(e[1]-this.origin[1])/this.scale)}addTranslation(e){this.origin=[this.origin[0]+e[0],this.origin[1]+e[1]]}addZoom(e,t){let[n,r]=this.origin;this.origin=[n*e+t[0]*(1-e),r*e+t[1]*(1-e)],this.scale*=e}};function j(i,e,t,n,r,{arrowSize:s=9}={}){let a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);r=[r[0]/a,r[1]/a];let u=[r[0]===0?-1/0:(0-n[0])/r[0],r[0]===0?1/0:(e-n[0])/r[0],r[1]===0?-1/0:(0-n[1])/r[1],r[1]===0?1/0:(t-n[1])/r[1]].sort((h,m)=>h-m),l=[n[0]+u[1]*r[0],n[1]+u[1]*r[1]],o=[n[0]+(u[2]-1)*r[0],n[1]+(u[2]-1)*r[1]];i.beginPath(),i.moveTo(l[0],l[1]),i.lineTo(o[0]-2*r[0],o[1]-2*r[1]),i.stroke();let f=s;return i.beginPath(),i.moveTo(o[0],o[1]),i.lineTo(o[0]-f*r[0]+.5*f*r[1],o[1]-f*r[1]-.5*f*r[0]),i.lineTo(o[0]-f*r[0]-.5*f*r[1],o[1]-f*r[1]+.5*f*r[0]),i.lineTo(o[0],o[1]),i.fill(),[l[0],l[1],o[0],o[1]]}function ee(i,e,{noX:t=!1,noY:n=!1,arrowSize:r=7,fontSize:s=13,labelX:a=I.mathBB("R"),labelY:u="i"+I.mathBB("R")}={}){let{origin:l,scale:o}=e,{width:f,height:h}=i;i.fontSize=s;let m=function(y,x=0){let{ps:S,ox:$,oy:T}=this;return[y*S+$,-x*S+T]}.bind({ox:l[0],oy:l[1],ps:o}),d=m(1),p=m(0,1),c=[d[0]-l[0],d[1]-l[1]],b=[p[0]-l[0],p[1]-l[1]];if(!t){let[,,y,x]=j(i,f,h,l,c,{arrowSize:r});a&&i.textNode(a,y-.2*s,x+.2*s+r/2,w.TR)}if(!n){let[,,y,x]=j(i,f,h,l,b,{arrowSize:r});!n&&u&&i.textNode(u,y-.2*s-r/2,x+.2*s,w.TR)}}function te(i,e,{origin:t,scale:n},r,{gap:s=5}={}){var a=i.width||0,u=i.height||0;if(e=="x"){let l=t[0],o=t[1];for(let f=0;f<r.length;f++){let{at:h,sprite:m}=r[f],d=h*n+l;if(d+m.right>=0&&d-m.left<=a){let p=o,c=d-.5,b=d+.5,y=o+3;i.beginPath().moveTo(c,p).lineTo(b,p).lineTo(b,y).lineTo(c,y).closePath(),i.fill(),m.draw(i,d,o+m.top+s)}}}}function C(i,e,t){let{center:n=!1}=t||{},{top:r,bot:s,left:a,right:u}=i.measureText(e),l=0;return n&&(l=(u-a)/2,a+=l,u-=l),{text:e,dx:l,top:r,bot:s,left:a,right:u,draw:function(f,h,m){f.textNode(this.text,h-this.dx,m,0)}}}function ne(i,e){let t=.05*(i.top+i.bot+e.top+e.bot),n=.5*(i.left-i.right),r=.5*(e.left-e.right),s=-i.bot-t,a=e.top+t,u=Math.max(.5*(i.left+i.right),.5*(e.left+e.right));return{data:[n,s,r,a,u],top:-s+i.top,bot:a+e.bot,left:u,right:u,draw:function(o,f,h){let[m,d,p,c,b]=this.data;i.draw(o,f+m,h+d),e.draw(o,f+p,h+c),o.beginPath(),o.moveTo(f-b,h),o.lineTo(f+b,h),o.stroke()}}}var F=class{constructor(e,t,n){this.onDrag=e;this.onZoom=t;this.onHover=n;this.state=new Array;this.down=e=>{if(e.pointerType=="mouse"&&e.button!=0)return;let{pointerId:t,offsetX:n,offsetY:r}=e,s=this.state.find(({id:a})=>a===t);s===void 0&&(s={id:t,x:n,y:r},this.state.push(s)),this.state.length<=1?this.onHover([n,r]):this.onHover(null),e.currentTarget.setPointerCapture(t)};this.move=e=>{let{pointerId:t,offsetX:n,offsetY:r}=e;if(this.state.length===0){this.onHover([n,r]);return}let s=this.state.findIndex(({id:u})=>u===t);if(s===-1)return;let a=this.state[s];if(this.state.length===1)this.onHover([n,r]),this.onDrag([n-a.x,r-a.y]);else if(this.state.length===2){let u=a,l=this.state[1-s],o=M(u.x-l.x,2)+M(u.y-l.y,2),f=M(n-l.x,2)+M(r-l.y,2),h=[.5*(n-u.x),.5*(r-u.y)];this.onHover(null),this.onDrag(h),this.onZoom(f/o,[.5*(n+l.x),.5*(r+l.y)])}a.x=n,a.y=r};this.up=e=>{if(e.pointerType=="mouse"&&e.button!=0)return;let{pointerId:t,offsetX:n,offsetY:r}=e,s=this.state.findIndex(({id:a})=>a===t);this.state.splice(s,1),e.currentTarget.releasePointerCapture(t)};this.cancel=e=>{if(e.pointerType=="mouse"&&e.button!=0)return;let{pointerId:t,offsetX:n,offsetY:r}=e,s=this.state.findIndex(({id:a})=>a===t);this.state.splice(s,1),e.currentTarget.releasePointerCapture(t)};this.leave=e=>{if(e.pointerType=="mouse"&&this.state.length===0&&this.onHover(null),e.pointerType=="mouse"&&e.button!=0||e.currentTarget.hasPointerCapture(e.pointerId))return;let{pointerId:t,offsetX:n,offsetY:r}=e,s=this.state.findIndex(({id:a})=>a===t);this.state.splice(s,1),e.currentTarget.releasePointerCapture(t)};this.wheel=e=>{e.preventDefault(),this.onZoom(Math.exp(-e.deltaY*(e.deltaMode==1?.03333:.001)),[e.offsetX,e.offsetY])}}registerListeners(e){e.addEventListener("pointerup",this.up),e.addEventListener("pointerdown",this.down),e.addEventListener("pointermove",this.move),e.addEventListener("pointercancel",this.cancel),e.addEventListener("pointerleave",this.leave),e.addEventListener("wheel",this.wheel)}removeListeres(e){e.removeEventListener("pointerup",this.up),e.removeEventListener("pointerdown",this.down),e.removeEventListener("pointermove",this.move),e.removeEventListener("pointercancel",this.cancel),e.removeEventListener("wheel",this.wheel)}};function O(i,e=[],t={},n={}){let r=document.createElement(i);for(let[a,u]of Object.entries(t))r.setAttribute(a,typeof u=="string"?u:u+"");for(let[a,u]of Object.entries(n))r[a]=u;if(Array.isArray(e))for(var s of e)typeof s=="string"&&(s=document.createTextNode(s)),r.append(s);else r.innerHTML=e.__html;return r}function H(i,e){for(var t of e)Array.isArray(t)?H(i,t):i.append(t instanceof Node?t:""+t)}function B(i,e,...t){if(i===B.Fragment){let a=document.createDocumentFragment();return H(a,t),a}let n=document.createElement(i);e=e||{},"__html"in e&&(n.innerHTML=""+e.__html,delete e.__html);for(var[r,s]of Object.entries(e))typeof s=="function"?n[r]=s:n.setAttribute(r,""+s);return H(n,t),n}B.Fragment="";var ue=`:host{position:relative;top:0;left:0;display:block;width:100%;height:100%;overflow:hidden;padding:0;margin:0}._container_1kdby_13{display:block;position:absolute;width:100%;height:100%;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._container_1kdby_13>div,._container_1kdby_13>canvas{position:absolute;top:0;left:0;width:100%;height:100%}
`,me={container:"_container_1kdby_13"},D={css:ue,class:me};function X(i){return{update(e,t){let n=t.getContext("2d"),r=window.devicePixelRatio;(Math.floor(e.width*r)!==t.width||Math.floor(e.height*r)!==t.height)&&(t.width=Math.floor(e.width*r),t.height=Math.floor(e.height*r)),n.setTransform(r,0,0,r,0,0),i.update(e,n)},resized(e){e.update(this)},connected(e){return{nodes:O("canvas",[],{class:"canvas-layer"})}}}}var re=class extends HTMLElement{constructor(){super(...arguments);this.shadow=this.attachShadow({mode:"open"});this.cleanup=[]}connectedCallback(){var o,f;let e=this.shadow;e.innerHTML="";let t=O("style",[D.css]),n=O("div",[],{class:D.class.container}),r=new ResizeObserver(()=>{var m,d,p,c;(d=(m=this.layerHandler).resized)==null||d.call(m,l);for(var h of s.values())(c=(p=h.layer)==null?void 0:p.resized)==null||c.call(p,l,h.nodes)});r.observe(n),e.append(t,n);let s=new Map,a=0,u=()=>{var d,p;let h=a===2;a=0;for(var m of s.values())(h||m.update)&&((p=(d=m.layer)==null?void 0:d.update)==null||p.call(d,l,m.nodes)),m.update=!1},l={get width(){return n.clientWidth},get height(){return n.clientHeight},containerElement:n,hostElement:this,update:function(h){if(a!==2){if(a===0&&requestAnimationFrame(u),h===void 0){a=2;return}if(typeof h=="string"){a=1;let d=s.get(h);d&&(d.update=!0);return}for(var m of s.values())h===m.layer&&(m.update=!0)}},addStyles:function(h){t.append(h)},addLayer:function(h,m){if(m instanceof Node){n.appendChild(m);return}let d,p;typeof m=="function"?(p=m(l),d=void 0):(p=m.connected(l),d=m);let c=p.nodes;c&&(Array.isArray(c)?n.append(...c):n.append(c)),s.set(h,{nodes:c,layer:d,update:!1}),l.update(h);let b=p.handle;return b||(b={}),b.update=()=>{this.update(h)},b},attachToShaddow(...h){e.append(...h)}};(f=(o=this.layerHandler).connected)==null||f.call(o,l),this.cleanup.push(()=>{var m,d,p,c;r.unobserve(n);for(var h of s.values())(d=(m=h.layer)==null?void 0:m.disconnected)==null||d.call(m,l);(c=(p=this.layerHandler).disconnected)==null||c.call(p,l)})}disconnectedCallback(){for(var e of this.cleanup)e();this.cleanup=[],this.shadow.innerHTML=""}};function ie(i){return class extends re{constructor(){super(...arguments);this.layerHandler=i}}}window.customElements.define("farey-fractions",ie({connected(i){let e=this,t=new N([100,100],100);function n(){let s=t.project(new g(0)),a=t.project(new g(1)),u=Math.abs(s[0]-a[0]),l=!1,{width:o,height:f}=i;s[1]<f/6?(t.addTranslation([0,-s[1]+f/6]),l=!0):s[1]>5*f/6&&(t.addTranslation([0,-s[1]+5*f/6]),l=!0),a[0]<.5*o&&(t.addTranslation([-a[0]+.5*o,0]),l=!0),s[0]>o*.5&&(t.addTranslation([-s[0]+.5*o,0]),l=!0),u<.25*o&&(t.addZoom(.25*o/u,[o/2,f/2]),l=!0),l&&i.update()}new F(s=>{t.addTranslation(s),i.update()},(s,a)=>{let u=t.project(new g(0)),l=t.project(new g(1)),o=Math.abs(u[0]-l[0]);s<=.25*i.width/o&&(s=.25*i.width/o),t.addZoom(s,a),i.update()},()=>{}).registerListeners(i.containerElement),i.addLayer("draw",X({update(s,a){n();let u=new _(a);a.clearRect(0,0,s.width,s.height),a.lineWidth=1.25,ee(u,t);let l=10;u.fontSize=l;let o=he(t.scale,l),f=Math.max(-t.origin[0]/t.scale,1e-11),h=Math.min((u.width-t.origin[0])/t.scale,.99999999999),[m,d,p,c]=de(o,f),b=pe(u,[m,d,p,c],o,h);b.push({sprite:C(u,"1",{center:!0}),at:1});for(let x of b);te(u,"x",t,b);let y=C(u,"Fractions with denominator up to "+o);u.beginPath(),u.rect(0,u.height,y.left+y.right+20,-Math.round(y.bot+y.top+10)),u.fillStyle="#FFFFFF",u.fill(),u.stroke(),u.fillStyle="#000000",y.draw(u,y.left+10,u.height-y.bot-5)}}))}}));function he(i,e){let t=0,n=1,r=0;for(;;)if(i/((t+n)*(t+n-1))<.75*(1+Math.log10(t+n))*e){if(r==0)return t;t=t+r,n=1,r=0}else r=n,n=n*2}function de(i,e){let t=Math.floor(e);e=e-t;let n=0,r=1,s=1,a=1;for(;;){let u=s-e*a,l;u!=0&&(l=Math.floor((e*r-n)/u)),(l===void 0||r+l*a>i)&&(l=Math.floor((i-r)/a)),n=n+l*s,r=r+l*a,u=r*e-n;let o;if(u!=0&&(o=Math.floor((s-e*a)/u)),(o===void 0||r*o+a>i)&&(o=Math.floor((i-a)/r)),s=n*o+s,a=r*o+a,l==0&&o==0)break}return[n,r,s,a]}function pe(i,e,t,n){let r=[],[s,a,u,l]=e;for(;u<n*l;){let o=Math.floor((t+a)/l);[s,a,u,l]=[u,l,o*u-s,o*l-a],r.push({sprite:ne(C(i,""+s),C(i,""+a)),at:s/a})}return r}})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibGlicmFyeS9zcmMvbW9kdWxlcy9Bc3luYy50cyIsICJsaWJyYXJ5L3NyYy9tb2R1bGVzL21hdGgvaW5kZXgudHMiLCAibGlicmFyeS9zcmMvcmVuZGVyZXIvQ2FudmFzLnRzIiwgImxpYnJhcnkvc3JjL1Vuc2FmZVhNTC50cyIsICJsaWJyYXJ5L3NyYy9yZW5kZXJlci9TVkcudHN4IiwgImxpYnJhcnkvc3JjL3JlbmRlcmVyL2luZGV4LnRzIiwgImxpYnJhcnkvc3JjL2NhbnZhcy9UZVgudHMiLCAibGlicmFyeS9zcmMvY2FudmFzL2F4aXMudHMiLCAibGlicmFyeS9zcmMvY2FudmFzL3Nwcml0ZXMudHMiLCAibGlicmFyeS9zcmMvbW9kdWxlcy9JbnRlcmFjdC50cyIsICJsaWJyYXJ5L3NyYy9Eb21FbGVtZW50LnRzIiwgImxpYnJhcnkvc3JjL2NvbXBvbmVudC9sYXllcnMvQ2FudmFzLnRzIiwgImxpYnJhcnkvc3JjL2NvbXBvbmVudC9sYXllcnMvaW5kZXgudHMiLCAibGlicmFyeS9zcmMvY29tcG9uZW50L0ZhcmV5RnJhY3Rpb25zLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIFRvb2xzIHRvIHR1cm4gR2VuZXJhdG9yIGZ1bmN0aW9ucyBpbnRvIHN5bmMgb3IgYXN5bmMgZnVuY3Rpb25zLlxuICovXG5cbmV4cG9ydCBjbGFzcyBBc3luY01hbmFnZXI8Sz4ge1xuICBwcml2YXRlIG1hcCA9IG5ldyBNYXA8SywgQXN5bmNPcHRpb25zW10+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIGdldE5ldyhjb250ZXh0OiBLLCB0aW1lQnVkZ2V0PzogbnVtYmVyKTogT3B0aW9uc0ZhY3Rvcnkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGU6ICgpID0+IHtcbiAgICAgICAgbGV0IG0gPSB0aGlzLm1hcDtcbiAgICAgICAgbGV0IGFjdGl2ZTogQXN5bmNPcHRpb25zW107XG5cbiAgICAgICAgaWYgKG0uaGFzKGNvbnRleHQpKSB7XG4gICAgICAgICAgYWN0aXZlID0gbS5nZXQoY29udGV4dCkgYXMgQXN5bmNPcHRpb25zW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWN0aXZlID0gW107XG4gICAgICAgICAgbS5zZXQoY29udGV4dCwgYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbyA9IG5ldyBBc3luY09wdGlvbnModGltZUJ1ZGdldCk7XG4gICAgICAgIGFjdGl2ZS5wdXNoKG8pO1xuICAgICAgICByZXR1cm4gbztcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGFib3J0QWxsKGNvbnRleHQ6IEspIHtcbiAgICBpZiAoIXRoaXMubWFwLmhhcyhjb250ZXh0KSkgcmV0dXJuO1xuICAgIGxldCB2ID0gdGhpcy5tYXAuZ2V0KGNvbnRleHQpIGFzIEFzeW5jT3B0aW9uc1tdO1xuICAgIGZvciAobGV0IG8gb2Ygdikgby5hYm9ydGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcC5kZWxldGUoY29udGV4dCk7XG4gIH1cbn1cblxudHlwZSBPcHRpb25zRmFjdG9yeSA9IHsgY3JlYXRlOiAoKSA9PiBPcHRpb25zIH07XG5cbnR5cGUgT3B0aW9ucyA9IHtcbiAgYmVnaW4/KCk6IGFueTtcbiAgZG9uZT8oKTogYW55O1xuICBzaG91bGRZaWVsZCgpOiBib29sZWFuO1xuICB5aWVsZCgpOiBQcm9taXNlPHZvaWQgfCBudW1iZXI+O1xufTtcblxuZXhwb3J0IGNsYXNzIEFzeW5jT3B0aW9ucyBpbXBsZW1lbnRzIE9wdGlvbnMge1xuICBwcml2YXRlIEk6IG51bWJlciA9IC0xO1xuICBwcml2YXRlIGk6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgdDogbnVtYmVyID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIHByaXZhdGUgdDA6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBkOiBudW1iZXI7XG4gIGFib3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih0aW1lQnVkZ2V0ID0gMTYpIHtcbiAgICB0aGlzLmQgPSB0aW1lQnVkZ2V0O1xuICB9XG5cbiAgYmVnaW4oKSB7XG4gICAgdGhpcy50MCA9IHRoaXMudCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG5cbiAgZG9uZSgpIHtcbiAgICBpZiAodGhpcy5hYm9ydGVkKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKFwiQSB0YXNrIHdhcyBhYm9ydGVkIVwiKTtcbiAgICAgIHRocm93IFwiYWJvcnRlZFwiO1xuICAgIH1cbiAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgIGxldCBUID0gcGVyZm9ybWFuY2Uubm93KCkgLSAodGhpcy50MCB8fCBwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgaWYgKFQgPiAxNTAwKSBjb25zb2xlLmRlYnVnKFwiTG9uZyBUYXNrIFRvb2s6IFwiICsgTWF0aC5yb3VuZChUKSArIFwibXNcIik7XG4gIH1cblxuICBzaG91bGRZaWVsZCgpOiBib29sZWFuIHtcbiAgICBsZXQgaSA9IHRoaXMuaSsrO1xuICAgIGlmIChpIDwgdGhpcy5JKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCh0aGlzLkkgPSAtMSkpIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMudCA+PSB0aGlzLmQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyB5aWVsZCgpOiBQcm9taXNlPHZvaWQ+O1xuICBhc3luYyB5aWVsZCgpOiBQcm9taXNlPHZvaWQgfCBudW1iZXI+IHtcbiAgICBpZiAodGhpcy50KSB7XG4gICAgICBsZXQgZGVsdGEgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMudDtcblxuICAgICAgLy8gR2VvbS4gcnVubmluZyBhdmVyYWdlIGZvciBpdGVyYXRpb25zXG4gICAgICB0aGlzLkkgPSBNYXRoLm1heCgxLCB0aGlzLmkgKiBNYXRoLm1pbih0aGlzLmQgLyAoZGVsdGEgKyAxKSwgNCkpO1xuICAgIH1cbiAgICBhd2FpdCB3YWl0KDApO1xuICAgIGlmICh0aGlzLmFib3J0ZWQpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXCJBIHRhc2sgd2FzIGFib3J0ZWQhXCIpO1xuICAgICAgdGhyb3cgXCJhYm9ydGVkXCI7XG4gICAgfVxuXG4gICAgdGhpcy5pID0gMDtcbiAgICB0aGlzLnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxBc3luYzxcbiAgVCxcbiAgUixcbiAgRiBleHRlbmRzICh0aGlzOiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgUiwgYW55PlxuPih0aDogVCwgZjogRiwgYXJnczogUGFyYW1ldGVyczxGPiwgYXN5bmNPcHRpb25zPzogT3B0aW9uc0ZhY3RvcnkpOiBQcm9taXNlPFI+IHtcbiAgYXN5bmNPcHRpb25zID8/PSBEZWZhdWx0QXN5bmNPcHRpb25zO1xuICBsZXQgYXN5bmNJbnN0YW5jZTogT3B0aW9ucyA9IGFzeW5jT3B0aW9ucy5jcmVhdGUoKTtcblxuICBhc3luY0luc3RhbmNlLmJlZ2luPy4oKTtcblxuICAvLyBUaGUgdHlwZXMgc2hvdWxkIGJlIHNhZmVcbiAgbGV0IGdlbiA9IGYuYXBwbHkodGgsIGFyZ3MpO1xuICBsZXQgbiA9IGdlbi5uZXh0KCk7XG4gIHdoaWxlICghbi5kb25lKSB7XG4gICAgaWYgKGFzeW5jSW5zdGFuY2Uuc2hvdWxkWWllbGQoKSkgYXdhaXQgYXN5bmNJbnN0YW5jZS55aWVsZCgpO1xuICAgIG4gPSBnZW4ubmV4dCgpO1xuICB9XG5cbiAgYXN5bmNJbnN0YW5jZS5kb25lPy4oKTtcbiAgcmV0dXJuIG4udmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxsU3luYzxcbiAgVCxcbiAgUixcbiAgRiBleHRlbmRzICh0aGlzOiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgUiwgYW55PlxuPih0aDogVCwgZjogRiwgYXJnczogUGFyYW1ldGVyczxGPik6IFIge1xuICAvLyBUaGUgdHlwZXMgc2hvdWxkIGJlIHNhZmVcbiAgbGV0IGdlbiA9IGYuYXBwbHkodGgsIGFyZ3MpO1xuICBsZXQgbiA9IGdlbi5uZXh0KCk7XG4gIHdoaWxlICghbi5kb25lKSBuID0gZ2VuLm5leHQoKTtcbiAgcmV0dXJuIG4udmFsdWU7XG59XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0QXN5bmNPcHRpb25zOiBPcHRpb25zRmFjdG9yeSA9IHtcbiAgY3JlYXRlOiAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3VsZFlpZWxkKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuICAgICAgYXN5bmMgeWllbGQoKSB7fSxcbiAgICB9O1xuICB9LFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHdhaXQobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxudHlwZSBBc3luY1dyYXA8XG4gIEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+XG4+ID0gRiBleHRlbmRzICh0aGlzOiBpbmZlciBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBib3RoIHRoaXMgYW5kIHJldHVyblxuICA/ICh0aGlzOiBULCAuLi5hcmdzOiBbLi4uUGFyYW1ldGVyczxGPiwgT3B0aW9uc0ZhY3Rvcnk/XSkgPT4gUHJvbWlzZTxSPlxuICA6IEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBvbmx5IHJldHVyblxuICA/ICguLi5hcmdzOiBbLi4uUGFyYW1ldGVyczxGPiwgT3B0aW9uc0ZhY3Rvcnk/XSkgPT4gUHJvbWlzZTxSPlxuICA6IEYgZXh0ZW5kcyAodGhpczogaW5mZXIgVCwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55PiAvLyBJbmZlciBvbmx5IHRoaXNcbiAgPyAodGhpczogVCwgLi4uYXJnczogWy4uLlBhcmFtZXRlcnM8Rj4sIE9wdGlvbnNGYWN0b3J5P10pID0+IFByb21pc2U8dW5rbm93bj5cbiAgOiAoLi4uYXJnczogWy4uLlBhcmFtZXRlcnM8Rj4sIE9wdGlvbnNGYWN0b3J5P10pID0+IFByb21pc2U8dW5rbm93bj47XG50eXBlIFN5bmNXcmFwPFxuICBGIGV4dGVuZHMgKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55PlxuPiA9IEYgZXh0ZW5kcyAodGhpczogaW5mZXIgVCwgLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGluZmVyIFIsIGFueT4gLy8gSW5mZXIgYm90aCB0aGlzIGFuZCByZXR1cm5cbiAgPyAodGhpczogVCwgLi4uYXJnczogUGFyYW1ldGVyczxGPikgPT4gUlxuICA6IEYgZXh0ZW5kcyAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgaW5mZXIgUiwgYW55PiAvLyBJbmZlciBvbmx5IHJldHVyblxuICA/ICguLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiBSXG4gIDogRiBleHRlbmRzICh0aGlzOiBpbmZlciBULCAuLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+IC8vIEluZmVyIG9ubHkgdGhpc1xuICA/ICh0aGlzOiBULCAuLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiB1bmtub3duXG4gIDogKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rj4pID0+IHVua25vd247XG5cbmZ1bmN0aW9uIGV4dHJhY3RPcHRpb25zKGFyZ3M6IGFueVtdKTogW09wdGlvbnNGYWN0b3J5IHwgdW5kZWZpbmVkLCBhbnlbXV0ge1xuICBsZXQgbGFzdCA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgbGV0IGFvOiBPcHRpb25zRmFjdG9yeSB8IHVuZGVmaW5lZDtcblxuICAvLyBTaW1wbGUgKG5vdCBwZXJmZWN0KSBjaGVjayBpZiBsYXN0IGFyZ3VlbnQgaXMgb3B0aW9uc1xuICBpZiAoXCJjcmVhdGVcIiBpbiBsYXN0KSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDAsIGFyZ3MubGVuZ3RoIC0gMSk7XG4gICAgYW8gPSBsYXN0O1xuICB9XG4gIHJldHVybiBbYW8sIGFyZ3NdO1xufVxuXG4vKipcbiAqIFRvb2xpbmcgdG8gd3JhcCBhIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIHdyYXAge1xuICBleHBvcnQgZnVuY3Rpb24gYXN5bmM8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+PihcbiAgICBmOiBGXG4gICk6IEFzeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBsZXQgW29wdGlvbnMsIGZuQXJnc10gPSBleHRyYWN0T3B0aW9ucyhhcmdzKTtcbiAgICAgIHJldHVybiBjYWxsQXN5bmModGhpcywgZiwgZm5BcmdzIGFzIGFueSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzIGFzIGFueTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBzeW5jPEYgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IEdlbmVyYXRvcjxhbnksIGFueSwgYW55Pj4oXG4gICAgZjogRlxuICApOiBTeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gY2FsbFN5bmModGhpcywgZiwgYXJncyBhcyBhbnkpO1xuICAgIH07XG4gICAgcmV0dXJuIHJlcyBhcyBhbnk7XG4gIH1cbn1cblxuLyoqXG4gKiBUb29saW5nIHRvIGZvcndhcmQgYSBmdW5jdGlvbiB0byBhbm90aGVyIGZ1bmN0aW9uIGRlZmluZWQgb24gdGhlIHRoaXMgb2JqZWN0LlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGZvcndhcmQge1xuICBleHBvcnQgZnVuY3Rpb24gYXN5bmM8XG4gICAgRiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+ID0gbmV2ZXJcbiAgPihrZXk6IHN0cmluZyk6IEFzeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBsZXQgW29wdGlvbnMsIGZuQXJnc10gPSBleHRyYWN0T3B0aW9ucyhhcmdzKTtcbiAgICAgIHJldHVybiBjYWxsQXN5bmModGhpcywgdGhpc1trZXldLCBmbkFyZ3MgYXMgYW55LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIHJldHVybiByZXMgYXMgYW55O1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHN5bmM8RiBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gR2VuZXJhdG9yPGFueSwgYW55LCBhbnk+PihcbiAgICBrZXk6IHN0cmluZ1xuICApOiBTeW5jV3JhcDxGPiB7XG4gICAgbGV0IHJlcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gY2FsbFN5bmModGhpcywgdGhpc1trZXldLCBhcmdzIGFzIGFueSk7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzIGFzIGFueTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFzeW5jT3B0aW9ucywgRGVmYXVsdEFzeW5jT3B0aW9ucywgZm9yd2FyZCwgd3JhcCB9IGZyb20gXCIuLi9Bc3luY1wiO1xuXG5leHBvcnQgZW51bSBNYXRoVHlwZSB7XG4gIEluZmluaXR5ID0gXCJpbmZpbml0eVwiLFxuICBDb21wbGV4ID0gXCJjb21wbGV4XCIsXG4gIE1vZWJpdXMgPSBcIm1vZWJpdXNcIixcbn1cblxuaW50ZXJmYWNlIFRlWGFibGUge1xuICB0b1RlWCgpOiBTdHJpbmc7XG59XG5cbi8qKlxuICogSW5maW5pdHlcbiAqL1xuZXhwb3J0IGNvbnN0IG9vID0ge1xuICBtYXRodHlwZTogTWF0aFR5cGUuSW5maW5pdHksXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgb28gPSB0eXBlb2Ygb287XG5cbmV4cG9ydCBjbGFzcyBSYW5nZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzdGFydDogbnVtYmVyLFxuICAgIHB1YmxpYyBlbmQ6IG51bWJlcixcbiAgICBwdWJsaWMgc3RlcDogbnVtYmVyID0gMVxuICApIHt9XG5cbiAgKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGxldCB7IHN0YXJ0OiB2LCBzdGVwLCBlbmQgfSA9IHRoaXM7XG4gICAgd2hpbGUgKHYgPCBlbmQpIHtcbiAgICAgIHlpZWxkIHY7XG4gICAgICB2ICs9IHN0ZXA7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdG8gY29udmVydCBkaWZmZXJlbnQgYXJndW1lbnRzIHRvIGluc3RhbmNlcyBvZiB0aGUgQ29tcGxleCBjbGFzcy5cbiAqIEBwYXJhbSByZWFsXG4gKiBAcGFyYW0gaW1hZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3BseChyZWFsOiBudW1iZXIsIGltYWc/OiBudW1iZXIpOiBDb21wbGV4O1xuLyoqXG4gKiBGdW5jdGlvbiB0byBjb252ZXJ0IGRpZmZlcmVudCBhcmd1bWVudHMgdG8gaW5zdGFuY2VzIG9mIHRoZSBDb21wbGV4IGNsYXNzLlxuICogQHBhcmFtIGNvbXBsZXggQXJyYXkgb2YgZm9ybSBbcmVhbCwgaW1hZ11cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNwbHgoY29tcGxleDogW251bWJlciwgbnVtYmVyXSk6IENvbXBsZXg7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNvbnZlcnQgZGlmZmVyZW50IGFyZ3VtZW50cyB0byBpbnN0YW5jZXMgb2YgdGhlIENvbXBsZXggY2xhc3MuXG4gKiBAcGFyYW0gY29tcGxleFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3BseChjb21wbGV4OiBDb21wbGV4KTogQ29tcGxleDtcbmV4cG9ydCBmdW5jdGlvbiBjcGx4KFxuICBhOiBudW1iZXIgfCBbbnVtYmVyLCBudW1iZXJdIHwgQ29tcGxleCxcbiAgYj86IG51bWJlclxuKTogQ29tcGxleCB7XG4gIHJldHVybiB0eXBlb2YgYSA9PT0gXCJudW1iZXJcIlxuICAgID8gbmV3IENvbXBsZXgoYSwgYilcbiAgICA6IEFycmF5LmlzQXJyYXkoYSlcbiAgICA/IG5ldyBDb21wbGV4KGFbMF0sIGFbMV0pXG4gICAgOiBhO1xufVxuXG5leHBvcnQgY2xhc3MgQ29tcGxleCBpbXBsZW1lbnRzIFRlWGFibGUge1xuICBtYXRodHlwZSA9IE1hdGhUeXBlLkNvbXBsZXg7XG4gIHJlYWw6IG51bWJlcjtcbiAgaW1hZzogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHJlYWw6IG51bWJlciwgaW1hZzogbnVtYmVyID0gMCkge1xuICAgIHRoaXMucmVhbCA9IHJlYWw7XG4gICAgdGhpcy5pbWFnID0gaW1hZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFic29sdXRlIHZhbHVlIHNxdWFyZWQuIFRoaXMgaXMgZmFzdGVyIHRoYW4gYGFicygpYFxuICAgKiBAcmV0dXJucyAkfHp8XjIkXG4gICAqL1xuICBhYnMyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVhbCAqIHRoaXMucmVhbCArIHRoaXMuaW1hZyAqIHRoaXMuaW1hZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFic29sdXRlIHZhbHVlLlxuICAgKiBAcmV0dXJucyAkfHp8JFxuICAgKi9cbiAgYWJzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmFiczIoKSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdmFsdWUgdG8gdGhpcy5cbiAgICogQHBhcmFtIG90aGVyXG4gICAqL1xuICBhZGQob3RoZXI6IG51bWJlciB8IENvbXBsZXgpOiBDb21wbGV4IHtcbiAgICBpZiAodHlwZW9mIG90aGVyID09PSBcIm51bWJlclwiKVxuICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCArIG90aGVyLCB0aGlzLmltYWcpO1xuICAgIGVsc2UgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCArIG90aGVyLnJlYWwsIHRoaXMuaW1hZyArIG90aGVyLmltYWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0IGEgdmFsdWUgZnJvbSB0aGlzLlxuICAgKiBAcGFyYW0gb3RoZXJcbiAgICovXG4gIHN1YihvdGhlcjogbnVtYmVyIHwgQ29tcGxleCk6IENvbXBsZXgge1xuICAgIGlmICh0eXBlb2Ygb3RoZXIgPT09IFwibnVtYmVyXCIpXG4gICAgICByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5yZWFsIC0gb3RoZXIsIHRoaXMuaW1hZyk7XG4gICAgZWxzZSByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5yZWFsIC0gb3RoZXIucmVhbCwgdGhpcy5pbWFnIC0gb3RoZXIuaW1hZyk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgYSB2YWx1ZSB3aXRoIHRoaXMuXG4gICAqIEBwYXJhbSBvdGhlclxuICAgKi9cbiAgbXVsKG90aGVyOiBudW1iZXIgfCBDb21wbGV4KTogQ29tcGxleCB7XG4gICAgaWYgKHR5cGVvZiBvdGhlciA9PT0gXCJudW1iZXJcIilcbiAgICAgIHJldHVybiBuZXcgQ29tcGxleChvdGhlciAqIHRoaXMucmVhbCwgb3RoZXIgKiB0aGlzLmltYWcpO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBuZXcgQ29tcGxleChcbiAgICAgICAgdGhpcy5yZWFsICogb3RoZXIucmVhbCAtIHRoaXMuaW1hZyAqIG90aGVyLmltYWcsXG4gICAgICAgIHRoaXMuaW1hZyAqIG90aGVyLnJlYWwgKyB0aGlzLnJlYWwgKiBvdGhlci5pbWFnXG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIERldmlkZSB0aGlzIGJ5IGFub3RoZXIgdmFsdWVcbiAgICogQHBhcmFtIG90aGVyXG4gICAqL1xuICBkaXYob3RoZXI6IG51bWJlciB8IENvbXBsZXgpOiBDb21wbGV4IHtcbiAgICBpZiAodHlwZW9mIG90aGVyID09PSBcIm51bWJlclwiKVxuICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KHRoaXMucmVhbCAvIG90aGVyLCB0aGlzLmltYWcgLyBvdGhlcik7XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5tdWwob3RoZXIuaW52KCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZlcnQgdGhpcyB2YWx1ZVxuICAgKiBAcmV0dXJucyAkel57LTF9JFxuICAgKi9cbiAgaW52KCk6IENvbXBsZXgge1xuICAgIHZhciBhMiA9IHRoaXMuYWJzMigpO1xuICAgIHJldHVybiBuZXcgQ29tcGxleCh0aGlzLnJlYWwgLyBhMiwgLXRoaXMuaW1hZyAvIGEyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFyZ3VtZW50IGlmIHRoaXMuXG4gICAqIEByZXR1cm5zICRcXHRoZXRhIFxcaW4gWzAsIDJcXHBpKSQgd2hlcmUgJHogPSB8enwgZV57aSBcXHRoZXRhfSQuXG4gICAqL1xuICBhcmcoKSB7XG4gICAgdmFyIHJlID0gdGhpcy5yZWFsO1xuICAgIHZhciBpbSA9IHRoaXMuaW1hZztcbiAgICBpZiAocmUgPT0gMCkge1xuICAgICAgaWYgKGltID4gMCkgcmV0dXJuIDAuNSAqIE1hdGguUEk7XG4gICAgICBlbHNlIGlmIChpbSA8IDApIHJldHVybiAxLjUgKiBNYXRoLlBJO1xuICAgICAgZWxzZSByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKHJlID49IDApIHtcbiAgICAgIGNvbnN0IHBoaSA9IE1hdGguYXRhbigoMS4wICogaW0pIC8gcmUpO1xuICAgICAgaWYgKHBoaSA8IDApIHJldHVybiAyICogTWF0aC5QSSArIHBoaTtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLmF0YW4oKDEuMCAqIGltKSAvIHJlKSArIE1hdGguUEk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCB0aGlzIHRvIFRlWFxuICAgKi9cbiAgdG9UZVgoKSB7XG4gICAgaWYgKHRoaXMuaW1hZyA9PSAwKSByZXR1cm4gYCR7dGhpcy5yZWFsfWA7XG4gICAgZWxzZSBpZiAodGhpcy5yZWFsID09IDApIHJldHVybiBgJHt0aGlzLmltYWd9aWA7XG4gICAgZWxzZSByZXR1cm4gYCR7dGhpcy5yZWFsfSArICR7dGhpcy5pbWFnfWlgO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2ViaXVzIGltcGxlbWVudHMgVGVYYWJsZSB7XG4gIG1hdGh0eXBlOiBNYXRoVHlwZS5Nb2ViaXVzID0gTWF0aFR5cGUuTW9lYml1cztcbiAgbTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1vZWJpb3VzIHZhbHVlIHdpdGggbWF0cml4IFtbbV97MCwwfSwgbV97MCwxfV0sIFttX3sxLDB9LCBtX3sxLDF9XV0uXG4gICAqIFRoZSB0cmFuc2Zvcm0gaXMgZ2l2ZW4gYnkgJHogXFx0byBcXGZyYWN7bV97MCwwfSB6ICsgbV97MCwxfX17bV97MSwwfSB6ICsgbV97MSwxfX0kLlxuICAgKiAhISEgVGhlIGRldGVybWluYW50IHNob3VsZCBiZSAxLiBUaGlzIGlzIG5vdCBjaGVja2VkIGFuZCBjb3VsZCBsZWFkIHRvIGVycm9ycy4gISEhXG4gICAqIEBwYXJhbSBtMDBcbiAgICogQHBhcmFtIG0wMVxuICAgKiBAcGFyYW0gbTEwXG4gICAqIEBwYXJhbSBtMTFcbiAgICovXG4gIGNvbnN0cnVjdG9yKG0wMDogbnVtYmVyLCBtMDE6IG51bWJlciwgbTEwOiBudW1iZXIsIG0xMTogbnVtYmVyKSB7XG4gICAgdGhpcy5tID0gW20wMCwgbTAxLCBtMTAsIG0xMV07XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgdHdvIE1vZWJpb3VzIG1hdHJpY2llcyB0b2dldGhlci5cbiAgICogUmVzdWx0IGlzIHRoZSB0cmFuc2Zvcm0geiAtPiB0aGlzKCBvdGhlcih6KSApLlxuICAgKiBAcGFyYW0gb3RoZXJcbiAgICogQHJldHVybnNcbiAgICovXG4gIG11bChvdGhlcjogTW9lYml1cyk6IE1vZWJpdXMge1xuICAgIGNvbnN0IG0xID0gdGhpcy5tO1xuICAgIGNvbnN0IG0yID0gb3RoZXIubTtcbiAgICByZXR1cm4gbmV3IE1vZWJpdXMoXG4gICAgICBtMVswXSAqIG0yWzBdICsgbTFbMV0gKiBtMlsyXSxcbiAgICAgIG0xWzBdICogbTJbMV0gKyBtMVsxXSAqIG0yWzNdLFxuICAgICAgbTFbMl0gKiBtMlswXSArIG0xWzNdICogbTJbMl0sXG4gICAgICBtMVsyXSAqIG0yWzFdICsgbTFbM10gKiBtMlszXVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSW52ZXJ0IHRoaXMgdHJhbnNmb3JtXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBpbnYoKTogTW9lYml1cyB7XG4gICAgY29uc3QgbSA9IHRoaXMubTtcbiAgICByZXR1cm4gbmV3IE1vZWJpdXMobVszXSwgLW1bMV0sIC1tWzJdLCBtWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gYSBjb21wbGV4IHZhbHVlIHVzaW5nIHRoZSBtb2ViaW91cyB0cmFuc2Zvcm0uXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgdHJhbnNmb3JtKGE6IG51bWJlciwgYj86IG51bWJlcik6IENvbXBsZXggfCBvbztcbiAgdHJhbnNmb3JtKGE6IENvbXBsZXggfCBvbyk6IENvbXBsZXggfCBvbztcbiAgdHJhbnNmb3JtKGE6IG51bWJlciB8IENvbXBsZXggfCBvbywgYj86IG51bWJlcik6IENvbXBsZXggfCBvbyB7XG4gICAgaWYgKHR5cGVvZiBhID09PSBcIm51bWJlclwiKSBhID0gY3BseChhLCBiKTtcbiAgICBlbHNlIGlmIChhLm1hdGh0eXBlID09PSBNYXRoVHlwZS5JbmZpbml0eSkge1xuICAgICAgaWYgKHRoaXMubVsyXSA9PSAwKSByZXR1cm4gb287XG4gICAgICByZXR1cm4gbmV3IENvbXBsZXgodGhpcy5tWzBdIC8gdGhpcy5tWzJdKTtcbiAgICB9XG4gICAgY29uc3QgbSA9IHRoaXMubTtcbiAgICBjb25zdCBxID0gYS5tdWwobVsyXSkuYWRkKG1bM10pO1xuICAgIGlmIChxLnJlYWwgPT0gMCAmJiBxLmltYWcgPT0gMCkgcmV0dXJuIG9vO1xuICAgIHJldHVybiBhLm11bChtWzBdKS5hZGQobVsxXSkuZGl2KHEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdG8gYSBUZVggbWF0cml4LlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgdG9UZVgoKSB7XG4gICAgcmV0dXJuIGBcXFxcYmVnaW57cG1hdHJpeH0ke3RoaXMubVswXX0mJHt0aGlzLm1bMV19XFxcXFxcXFwgJHt0aGlzLm1bMl19JiR7dGhpcy5tWzNdfVxcXFxlbmR7cG1hdHJpeH1gO1xuICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgY29uZ3J1ZW5jZVN1Ymdyb3VwcyB7XG4gIGV4cG9ydCBjbGFzcyBDb25ncnVlbmNlU3ViZ3JvdXAgaW1wbGVtZW50cyBUZVhhYmxlIHtcbiAgICBpbmRpY2F0b3I6IChsZXZlbDogbnVtYmVyLCB2YWx1ZTogTW9lYml1cykgPT4gYm9vbGVhbjtcbiAgICB0ZXg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgaW5kaWNhdG9yOiAobGV2ZWw6IG51bWJlciwgdmFsdWU6IE1vZWJpdXMpID0+IGJvb2xlYW4sXG4gICAgICB0ZXg6IHN0cmluZ1xuICAgICkge1xuICAgICAgdGhpcy5pbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG4gICAgICB0aGlzLnRleCA9IHRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3NldCByZXByZXNlbnRhdGl2ZSBmb3IgYSB2YWx1ZSBpbiBhIHNldCBvZiByZXByZXNlbnRhdGl2ZXMuXG4gICAgICogQHBhcmFtIGxldmVsIFRoZSBsZXZlbCBvZiB0aGlzIHRoZSBncm91cC5cbiAgICAgKiBAcGFyYW0gcmVwcnMgVGhlIHNldCBvZiByZXByZXNlbnRhdGl2ZXNcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlXG4gICAgICogQHJldHVybnMgVGhlIGluZGV4IGluIHRoZSBzZXQgb3IgLTFcbiAgICAgKi9cbiAgICBmaW5kQ29zZXRJbmRleChsZXZlbDogbnVtYmVyLCByZXByczogTW9lYml1c1tdLCB2YWx1ZTogTW9lYml1cyk6IG51bWJlciB7XG4gICAgICBjb25zdCB4aW52ID0gdmFsdWUuaW52KCk7XG4gICAgICBjb25zdCBpbmQgPSB0aGlzLmluZGljYXRvcjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVwcnMubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmIChpbmQobGV2ZWwsIHJlcHJzW2ldLm11bCh4aW52KSkpIHJldHVybiBpO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNvc2V0IHJlcHJlc2VudGF0aXZlIGZvciBhIHZhbHVlIGluIGEgc2V0IG9mIHJlcHJlc2VudGF0aXZlcy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsIG9mIHRoaXMgdGhlIGdyb3VwLlxuICAgICAqIEBwYXJhbSByZXBycyBUaGUgc2V0IG9mIHJlcHJlc2VudGF0aXZlc1xuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWVcbiAgICAgKiBAcmV0dXJucyBUaGUgY29zZXQgcmVwcmVzZW50YXRpdmVcbiAgICAgKi9cbiAgICBmaW5kQ29zZXQoXG4gICAgICBsZXZlbDogbnVtYmVyLFxuICAgICAgbGlzdDogTW9lYml1c1tdLFxuICAgICAgdmFsdWU6IE1vZWJpdXNcbiAgICApOiBNb2ViaXVzIHwgdW5kZWZpbmVkIHtcbiAgICAgIGNvbnN0IHhpbnYgPSB2YWx1ZS5pbnYoKTtcbiAgICAgIGNvbnN0IGluZCA9IHRoaXMuaW5kaWNhdG9yO1xuICAgICAgcmV0dXJuIGxpc3QuZmluZCgodmFsdWU6IE1vZWJpdXMpID0+IHtcbiAgICAgICAgcmV0dXJuIGluZChsZXZlbCwgdmFsdWUubXVsKHhpbnYpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEZpbmQgY29zZXQgcmVwcmVzZW50YXRpdmVzLlxuICAgICAqIFRoZSBmdW5jdGlvbiB5aWVsZHMgbXVsdGlwbGUgdGltZXMuIFRoZSB5aWVsZHMgYXJlIGVpdGhlciBpZ25vcmVkIG9yIHVzZWQgdG9cbiAgICAgKiBjcmVhdGUgYSBub24tYmxvY2tpbmcgYXN5bmMgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGxldmVsIExldmVsIG9mIHRoZSBjb25ncnVlbmNlIHN1Ymdyb3VwLlxuICAgICAqIEByZXR1cm5zIEEgbGlzdCBvZiBjb3NldCByZXByZXNlbnRhdGl2ZXMuXG4gICAgICovXG4gICAgKl9jb3NldFJlcHJlc2VudGF0aXZlcyhsZXZlbDogbnVtYmVyKTogR2VuZXJhdG9yPHZvaWQsIE1vZWJpdXNbXSwgdm9pZD4ge1xuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGxldmVsKSB8fCBsZXZlbCA8PSAwKSB0aHJvdyBcIkludmFsaWQgTGV2ZWxcIjtcblxuICAgICAgY29uc3QgZ2VuZXJhdG9ycyA9IFtcbiAgICAgICAgbmV3IE1vZWJpdXMoMCwgLTEsIDEsIDApLFxuICAgICAgICBuZXcgTW9lYml1cygxLCAxLCAwLCAxKSxcbiAgICAgICAgbmV3IE1vZWJpdXMoMSwgLTEsIDAsIDEpLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGdyb3VwID0gdGhpcztcbiAgICAgIGNvbnN0IHJlcHJzID0gW25ldyBNb2ViaXVzKDEsIDAsIDAsIDEpXTtcblxuICAgICAgdmFyIGNoZWNrczogTW9lYml1c1tdID0gW107XG4gICAgICB2YXIgc2VlZHM6IE1vZWJpdXNbXSA9IFtdO1xuICAgICAgdmFyIGFkZGVkID0gW25ldyBNb2ViaXVzKDEsIDAsIDAsIDEpXTtcblxuICAgICAgd2hpbGUgKGFkZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2hlY2tzID0gc2VlZHM7XG4gICAgICAgIHNlZWRzID0gYWRkZWQ7XG4gICAgICAgIGFkZGVkID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgcyBvZiBzZWVkcykge1xuICAgICAgICAgIGZvciAobGV0IGcgb2YgZ2VuZXJhdG9ycykge1xuICAgICAgICAgICAgLy8gTWF5IHlpZWxkIGNvbnRyb2xsIHRvIG1haW4gdGhyZWFkIGluIGFzeW5jIGV4ZWN1dGlvblxuICAgICAgICAgICAgeWllbGQ7XG5cbiAgICAgICAgICAgIGxldCBuID0gcy5tdWwoZyk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGdyb3VwLmZpbmRDb3NldEluZGV4KGxldmVsLCBjaGVja3MsIG4pID09IC0xICYmXG4gICAgICAgICAgICAgIGdyb3VwLmZpbmRDb3NldEluZGV4KGxldmVsLCBhZGRlZCwgbikgPT0gLTEgJiZcbiAgICAgICAgICAgICAgZ3JvdXAuZmluZENvc2V0SW5kZXgobGV2ZWwsIHNlZWRzLCBuKSA9PSAtMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJlcHJzLnB1c2gobik7XG4gICAgICAgICAgICAgIGFkZGVkLnB1c2gobik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVwcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBjb3NldFJlcHJlc2VudGF0aXZlcy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsIG9mIHRoZSBncm91cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbGlzdCBvZiBjb3NldFJlcHJlc2VudGF0aXZlcy5cbiAgICAgKi9cbiAgICBjb3NldFJlcHJlc2VudGF0aXZlcyA9IGZvcndhcmQuc3luYzxcbiAgICAgIENvbmdydWVuY2VTdWJncm91cFtcIl9jb3NldFJlcHJlc2VudGF0aXZlc1wiXVxuICAgID4oXCJfY29zZXRSZXByZXNlbnRhdGl2ZXNcIik7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIGNvc2V0UmVwcmVzZW50YXRpdmVzLlxuICAgICAqIEZ1bmN0aW9uIG1heSB5aWVsZCBjb250cm9sIGFuZCByZXN1bWUgbmV4dCBmcmFtZVxuICAgICAqIGlmIHRoZSBjb21wdXRhdGlvbiB0YWtlcyB0b28gbG9uZy5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgVGhlIGxldmVsLlxuICAgICAqIEBwYXJhbSBhbyBUaGUgQXN5bmNPcHRpb25zIHRvIHVzZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBsaXN0IG9mIGNvc2V0IHJlcHJlc2VudGF0aXZlcy5cbiAgICAgKi9cbiAgICBjb3NldFJlcHJlc2VudGF0aXZlc0FzeW5jID0gZm9yd2FyZC5hc3luYzxcbiAgICAgIENvbmdydWVuY2VTdWJncm91cFtcIl9jb3NldFJlcHJlc2VudGF0aXZlc1wiXVxuICAgID4oXCJfY29zZXRSZXByZXNlbnRhdGl2ZXNcIik7XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUZVggcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHcm91cC5cbiAgICAgKi9cbiAgICB0b1RlWCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleDtcbiAgICB9XG4gIH1cblxuICAvKiogQGludGVybmFsIGNoZWNrIFt2MV0gPSBbdjJdIChtb2QgW21vZHVsdXNdKSAqL1xuICBmdW5jdGlvbiBfbW9kX2VxKHYxOiBudW1iZXIsIHYyOiBudW1iZXIsIG1vZHVsdXM6IG51bWJlcikge1xuICAgIHJldHVybiAodjEgLSB2MikgJSBtb2R1bHVzID09PSAwO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBmdW5jdGlvbiBfZ2FtbWFfMF9pbmRpY2F0b3IobGV2ZWw6IG51bWJlciwgdmFsdWU6IE1vZWJpdXMpIHtcbiAgICByZXR1cm4gX21vZF9lcSh2YWx1ZS5tWzJdLCAwLCBsZXZlbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvbmdydWVuY2Ugc3ViZ3JvdXAgJFxcR2FtbWFfMCQgdGhhdCBzYXRpc2ZpZXMgZm9sbG93aW5nIGNvbmdydWVuY2VzLlxuICAgKlxuICAgKiAkTSBcXGVxdWl2IFxcYmVnaW57cG1hdHJpeH0gPyAmID8gXFxcXCAwICYgPyBcXGVuZHtwbWF0cml4fSQuXG4gICAqL1xuICBleHBvcnQgY29uc3QgR2FtbWFfMCA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoXG4gICAgX2dhbW1hXzBfaW5kaWNhdG9yLFxuICAgIFwiXFxcXEdhbW1hXzBcIlxuICApO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZnVuY3Rpb24gX2dhbW1hXzFfaW5kaWNhdG9yKGxldmVsOiBudW1iZXIsIHZhbHVlOiBNb2ViaXVzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIF9tb2RfZXEodmFsdWUubVsyXSwgMCwgbGV2ZWwpICYmXG4gICAgICAoX21vZF9lcSh2YWx1ZS5tWzBdLCAxLCBsZXZlbCkgfHwgX21vZF9lcSh2YWx1ZS5tWzBdLCAtMSwgbGV2ZWwpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvbmdydWVuY2Ugc3ViZ3JvdXAgJFxcR2FtbWFfMCQgdGhhdCBzYXRpc2ZpZXMgZm9sbG93aW5nIGNvbmdydWVuY2VzLlxuICAgKlxuICAgKiAkTSBcXGVxdWl2IFxcYmVnaW57cG1hdHJpeH0gMSAmID8gXFxcXCAwICYgMSBcXGVuZHtwbWF0cml4fSQuXG4gICAqL1xuICBleHBvcnQgY29uc3QgR2FtbWFfMSA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoXG4gICAgX2dhbW1hXzFfaW5kaWNhdG9yLFxuICAgIFwiXFxcXEdhbW1hXzFcIlxuICApO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZnVuY3Rpb24gX2dhbW1hX2luZGljYXRvcihsZXZlbDogbnVtYmVyLCB2YWx1ZTogTW9lYml1cykge1xuICAgIHJldHVybiAoXG4gICAgICBfbW9kX2VxKHZhbHVlLm1bMl0sIDAsIGxldmVsKSAmJlxuICAgICAgX21vZF9lcSh2YWx1ZS5tWzFdLCAwLCBsZXZlbCkgJiZcbiAgICAgIChfbW9kX2VxKHZhbHVlLm1bMF0sIDEsIGxldmVsKSB8fCBfbW9kX2VxKHZhbHVlLm1bMF0sIC0xLCBsZXZlbCkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY29uZ3J1ZW5jZSBzdWJncm91cCAkXFxHYW1tYV8wJCB0aGF0IHNhdGlzZmllcyBmb2xsb3dpbmcgY29uZ3J1ZW5jZXMuXG4gICAqXG4gICAqICRNIFxcZXF1aXYgXFxiZWdpbntwbWF0cml4fSAxICYgMCBcXFxcIDAgJiAxIFxcZW5ke3BtYXRyaXh9JC5cbiAgICovXG4gIGV4cG9ydCBjb25zdCBHYW1tYSA9IG5ldyBDb25ncnVlbmNlU3ViZ3JvdXAoX2dhbW1hX2luZGljYXRvciwgXCJcXFxcR2FtbWFcIik7XG4gIEdhbW1hLmNvc2V0UmVwcmVzZW50YXRpdmVzID0gZnVuY3Rpb24gKGxldmVsOiBudW1iZXIpOiBNb2ViaXVzW10ge1xuICAgIGxldCBnYW1tYV8xX2Nvc2V0ID0gR2FtbWFfMS5jb3NldFJlcHJlc2VudGF0aXZlcyhsZXZlbCk7XG4gICAgbGV0IGNvc2V0OiBNb2ViaXVzW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgbGV0IHNoaWZ0ID0gbmV3IE1vZWJpdXMoMSwgaSwgMCwgMSk7XG4gICAgICBjb3NldC5wdXNoKC4uLmdhbW1hXzFfY29zZXQubWFwKChtKSA9PiBzaGlmdC5tdWwobSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29zZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbCBNb3JlIHBlcmZvcm1hbnQgcmVwcmVzZW50YXRpdmVzIGZvciAkXFxHYW1tYShOKSQuXG4gICAqXG4gICAqIFRoZSBjb3NldCByZXByZXNlbnRhdGl2ZXMgb2YgJFxcR2FtbWEoTikkIGNhbiBiZSBjb21wdXRlZCBtb3JlIGVmZmljaWVudGx5XG4gICAqIGJ5IGNvbXB1dGluZyB0aGUgcmVwcmVzZW50YXRpdmVzIHBmICRcXEdhbW1hXzEoTikkIGZpcnN0LlxuICAgKiBUaGUgZnVsbCBzZXQgb2YgcmVwcmVzZW50YXRpdmVzIGlzIGNvbXBvc2VkIG9mIG11bHRpcGxlIHNoaWZ0cyBvZiB0aGVcbiAgICogcmVwcmVzZW50YXRpdmVzIGZyb20gJFxcR2FtbWFfMShOKSQgKHNoaWZ0ZWQgYnkgMCBcXGxlcSBuIDwgTikuXG4gICAqL1xuICBHYW1tYS5fY29zZXRSZXByZXNlbnRhdGl2ZXMgPSBmdW5jdGlvbiogKGxldmVsKSB7XG4gICAgbGV0IGdhbW1hXzFfY29zZXQgPSB5aWVsZCogR2FtbWFfMS5fY29zZXRSZXByZXNlbnRhdGl2ZXMobGV2ZWwpO1xuICAgIGxldCBjb3NldDogTW9lYml1c1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbDsgaSsrKSB7XG4gICAgICB5aWVsZDtcbiAgICAgIGxldCBzaGlmdCA9IG5ldyBNb2ViaXVzKDEsIGksIDAsIDEpO1xuICAgICAgY29zZXQucHVzaCguLi5nYW1tYV8xX2Nvc2V0Lm1hcCgobSkgPT4gc2hpZnQubXVsKG0pKSk7XG4gICAgfVxuICAgIHJldHVybiBjb3NldDtcbiAgfTtcblxuICBleHBvcnQgdHlwZSBGdW5kYW1lbnRhbERvbWFpbiA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29tcGxleCBjb3JuZXIgcG9pbnRzIG9mIHRoZSBkb21haW4uXG4gICAgICogQm91bmRhcnkgaXMgZ2l2ZW4gYnkgaHlwZXJib2xpYyBsaW5lcyBiZXR3ZWVuIHRoZW0uXG4gICAgICovXG4gICAgY29ybmVyczogKENvbXBsZXggfCBvbylbXTtcbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3NldCB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBjb21wbGV4IHZhbHVlLlxuICAgICAqL1xuICAgIGZpbmRDb3NldE9mOiAodmFsdWU6IENvbXBsZXgpID0+IE1vZWJpdXMgfCB1bmRlZmluZWQ7XG4gIH07XG5cbiAgY29uc3QgZV9waV8zID0gbmV3IENvbXBsZXgoTWF0aC5jb3MoTWF0aC5QSSAvIDMpLCBNYXRoLnNpbihNYXRoLlBJIC8gMykpO1xuICAvKipcbiAgICogRnVuZGFtZW50YWwgZG9tYWluIHdpdGggdGhlIGZvbGxvd2luZyBkZWZpbml0aW9uLlxuICAgKiAkXFx7eiBcXGluIFxcbWF0aGJie0N9IDogfHp8IFxcZ2VxIDEgJiYgLTAuNSA8PSBcXFJlIHogPD0gMC41IFxcfSRcbiAgICovXG4gIGV4cG9ydCBjb25zdCBEb21haW4xOiBGdW5kYW1lbnRhbERvbWFpbiA9IHtcbiAgICBjb3JuZXJzOiBbXG4gICAgICBvbyxcbiAgICAgIGVfcGlfMyxcbiAgICAgIG5ldyBDb21wbGV4KDAuMCwgMS4wKSxcbiAgICAgIG5ldyBDb21wbGV4KC1lX3BpXzMucmVhbCwgZV9waV8zLmltYWcpLFxuICAgIF0sXG4gICAgZmluZENvc2V0T2YodmFsdWU6IENvbXBsZXgsIG1heEl0ZXI6IG51bWJlciA9IDEwMCkge1xuICAgICAgaWYgKHZhbHVlLmltYWcgPD0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgbGV0IHJlc3VsdCA9IG5ldyBNb2ViaXVzKDEsIDAsIDAsIDEpO1xuICAgICAgbGV0IGN1cnJlbnQgPSB2YWx1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhJdGVyOyBpKyspIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT0gb28pIHJldHVybiByZXN1bHQuaW52KCk7XG5cbiAgICAgICAgdmFyIG4gPSBNYXRoLmZsb29yKGN1cnJlbnQucmVhbCArIDAuNSk7XG4gICAgICAgIHJlc3VsdCA9IG5ldyBNb2ViaXVzKDEsIC1uLCAwLCAxKS5tdWwocmVzdWx0KTtcbiAgICAgICAgY3VycmVudCA9IHJlc3VsdC50cmFuc2Zvcm0odmFsdWUpIGFzIENvbXBsZXg7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQuYWJzMigpID49IDEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmludigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ID0gbmV3IE1vZWJpdXMoMCwgMSwgLTEsIDApLm11bChyZXN1bHQpO1xuICAgICAgICBjdXJyZW50ID0gcmVzdWx0LnRyYW5zZm9ybSh2YWx1ZSkgYXMgQ29tcGxleDtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiTWF4IGl0ZXJhdGlvbnMgaW4gJ2ZpbmRNb2ViaW91c1RvRnVuZCcgcmVhY2hlZFwiKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBSZW5kZXJlcjJELCBNZWFzdXJlVGV4dCwgVGV4dEFsaWduIH0gZnJvbSBcIi4vXCI7XG5cbmNvbnN0IFBJXzIgPSAyICogTWF0aC5QSTtcbmNvbnN0IF9QSV8yID0gMC41IC8gTWF0aC5QSTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIGltcGxlbWVudHMgUmVuZGVyZXIyRCwgTWVhc3VyZVRleHQge1xuICBwcml2YXRlIF9jdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICBwcml2YXRlIF9saW5lV2lkdGggPSAxO1xuICBwcml2YXRlIF9mb250U2l6ZSA9IDEzO1xuICBwcml2YXRlIF9maWxsQ29sb3IgPSBcIiMwMDAwMDBcIjtcbiAgcHJpdmF0ZSBfc3Ryb2tlQ29sb3IgPSBcIiMwMDAwMDBcIjtcblxuICBwcml2YXRlIGZvbnRBc2NlbnQ6IG51bWJlciA9IC0xO1xuICBwcml2YXRlIGZvbnREZXNjZW50OiBudW1iZXIgPSAtMTtcblxuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikge1xuICAgIHRoaXMuX2N0eCA9IGN0eDtcbiAgICB0aGlzLndpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IGN0eC5jYW52YXMud2lkdGggOiB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gY3R4LmNhbnZhcy5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgdGhpcy5mb250U2l6ZSA9IDEzO1xuICB9XG5cbiAgZ2V0IGxpbmVXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGluZVdpZHRoO1xuICB9XG4gIHNldCBsaW5lV2lkdGgobGluZVdpZHRoOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuICAgIHRoaXMuX2xpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgfVxuXG4gIGdldCBmb250U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZm9udFNpemU7XG4gIH1cbiAgc2V0IGZvbnRTaXplKGZvbnRTaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jdHgudGV4dEJhc2VsaW5lID0gXCJhbHBoYWJldGljXCI7XG4gICAgdGhpcy5fY3R4LmZvbnQgPSBmb250U2l6ZSArIFwicHggVGltZXMgTmV3IFJvbWFuXCI7XG4gICAgdGhpcy5fZm9udFNpemUgPSBmb250U2l6ZTtcbiAgICBjb25zdCB0bSA9IHRoaXMuX2N0eC5tZWFzdXJlVGV4dChcIjFBVE9nanBcIik7XG4gICAgdGhpcy5mb250QXNjZW50ID0gdG0uZm9udEJvdW5kaW5nQm94QXNjZW50IHx8IHRtLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50O1xuICAgIHRoaXMuZm9udERlc2NlbnQgPSB0bS5mb250Qm91bmRpbmdCb3hEZXNjZW50IHx8IHRtLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudDtcbiAgfVxuXG4gIGdldCBmaWxsU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsbENvbG9yO1xuICB9XG4gIHNldCBmaWxsU3R5bGUoZmlsbFN0eWxlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgIHRoaXMuX2ZpbGxDb2xvciA9IGZpbGxTdHlsZTtcbiAgfVxuXG4gIGdldCBzdHJva2VTdHlsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zdHJva2VDb2xvcjtcbiAgfVxuICBzZXQgc3Ryb2tlU3R5bGUoc3Ryb2tlU3R5bGU6IHN0cmluZykge1xuICAgIHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgIHRoaXMuX3N0cm9rZUNvbG9yID0gc3Ryb2tlU3R5bGU7XG4gIH1cblxuICBtZWFzdXJlVGV4dCh0ZXh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBjb25zdCB0bSA9IHRoaXMuX2N0eC5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgICBsZXQgYyA9ICh0aGlzLmZvbnRBc2NlbnQgKyB0aGlzLmZvbnREZXNjZW50KSAvIDI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogYyAqIDEuMyxcbiAgICAgIGJvdDogYyAqIDEsXG4gICAgICBsZWZ0OiB0bS5hY3R1YWxCb3VuZGluZ0JveExlZnQsXG4gICAgICByaWdodDogdG0uYWN0dWFsQm91bmRpbmdCb3hSaWdodCxcbiAgICB9O1xuICB9XG5cbiAgdGV4dE5vZGUodGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgYWxpZ246IFRleHRBbGlnbikge1xuICAgIGxldCBibDogQ2FudmFzVGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIixcbiAgICAgIGFsOiBDYW52YXNUZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIHN3aXRjaCAoYWxpZ24gJiAwYjExMDApIHtcbiAgICAgIGNhc2UgVGV4dEFsaWduLlQ6XG4gICAgICAgIGJsID0gXCJ0b3BcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRleHRBbGlnbi5COlxuICAgICAgICBibCA9IFwiYm90dG9tXCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFsaWduICYgMGIwMDExKSB7XG4gICAgICBjYXNlIFRleHRBbGlnbi5MOlxuICAgICAgICBhbCA9IFwibGVmdFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGV4dEFsaWduLlI6XG4gICAgICAgIGFsID0gXCJyaWdodFwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9IGJsO1xuICAgIHRoaXMuX2N0eC50ZXh0QWxpZ24gPSBhbDtcbiAgICB0aGlzLl9jdHguZmlsbFRleHQodGV4dCwgeCwgeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBiZWdpblBhdGgoKSB7XG4gICAgdGhpcy5fY3R4LmJlZ2luUGF0aCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY3R4Lm1vdmVUbyh4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpbmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIHRoaXMuX2N0eC5saW5lVG8oeCwgeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBxdWFkcmF0aWNUbyhjcFg6IG51bWJlciwgY3BZOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY3R4LnF1YWRyYXRpY0N1cnZlVG8oY3BYLCBjcFksIHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY3ViaWNUbyhcbiAgICBjcDFYOiBudW1iZXIsXG4gICAgY3AxWTogbnVtYmVyLFxuICAgIGNwMlg6IG51bWJlcixcbiAgICBjcDJZOiBudW1iZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApIHtcbiAgICB0aGlzLl9jdHguYmV6aWVyQ3VydmVUbyhjcDFYLCBjcDFZLCBjcDJYLCBjcDJZLCB4LCB5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNsb3NlUGF0aCgpIHtcbiAgICB0aGlzLl9jdHguY2xvc2VQYXRoKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWN0KHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xuICAgIHRoaXMuX2N0eC5yZWN0KHgsIHksIHcsIGgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXJjKFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgcmFkaXVzOiBudW1iZXIsXG4gICAgc3RhcnRBbmdsZTogbnVtYmVyLFxuICAgIGVuZEFuZ2xlOiBudW1iZXIsXG4gICAgY3c/OiBib29sZWFuXG4gICkge1xuICAgIHRoaXMuX2N0eC5hcmMoXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHJhZGl1cyxcbiAgICAgIHN0YXJ0QW5nbGUgLSBQSV8yICogTWF0aC5mbG9vcihfUElfMiAqIHN0YXJ0QW5nbGUpLFxuICAgICAgZW5kQW5nbGUgLSBQSV8yICogTWF0aC5mbG9vcihfUElfMiAqIGVuZEFuZ2xlKSxcbiAgICAgICFjd1xuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzdHJva2UoKSB7XG4gICAgdGhpcy5fY3R4LnN0cm9rZSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZmlsbCgpIHtcbiAgICB0aGlzLl9jdHguZmlsbCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZmlsbEFuZFN0cm9rZSgpIHtcbiAgICB0aGlzLmZpbGwoKTtcbiAgICB0aGlzLnN0cm9rZSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCAiZXhwb3J0IGNsYXNzIFhNTCB7XG4gIGNoaWxkcmVuOiAoWE1MIHwgc3RyaW5nKVtdO1xuICBhdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgYXR0cmlidXRlcz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIH0sXG4gICAgLi4uY2hpbGRyZW46IChYTUwgfCBzdHJpbmcpW11cbiAgKSB7XG4gICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMgfHwge307XG4gIH1cblxuICBwcml2YXRlIGF0dHJTdHJpbmcoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMuYXR0cmlidXRlcylcbiAgICAgIC5tYXAoKFtrLCB2XSkgPT4gYCR7a309XCIke3Z9XCJgKVxuICAgICAgLmpvaW4oXCIgXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjaFN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgodikgPT4gdi50b1N0cmluZygpKS5qb2luKFwiXCIpO1xuICB9XG5cbiAgYXBwZW5kKGNoaWxkOiBYTUwgfCBzdHJpbmcpIHtcbiAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICB9XG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICBsZXQgbmFtZSA9IHRoaXMubmFtZTtcbiAgICBpZiAobmFtZSA9PT0gXCJcIikgcmV0dXJuIHRoaXMuY2hTdHJpbmcoKTtcbiAgICByZXR1cm4gYDwke25hbWV9ICR7dGhpcy5hdHRyU3RyaW5nKCl9PiR7dGhpcy5jaFN0cmluZygpfTwvJHtuYW1lfT5gO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqc3goXG4gIG5hbWU6IHN0cmluZyB8ICgocHJvcHM6IGFueSwgLi4uY2hpbGRyZW46IGFueSkgPT4gWE1MKSxcbiAgcHJvcHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIH0sXG4gIC4uLmNoaWxkcmVuOiBhbnlbXVxuKTogWE1MIHtcbiAgaWYgKHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBuYW1lKHByb3BzLCAuLi5jaGlsZHJlbik7XG4gIHJldHVybiBuZXcgWE1MKG5hbWUsIHByb3BzLCAuLi5jaGlsZHJlbik7XG59XG5qc3guRnJhZ21lbnQgPSBcIlwiO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UganN4LkpTWCB7XG4gIHR5cGUgRWxlbWVudCA9IFhNTDtcbiAgdHlwZSBJbnRyaW5zaWNFbGVtZW50cyA9IHtcbiAgICBba2V5OiBMb3dlcmNhc2U8c3RyaW5nPl06IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlcjtcbiAgICB9O1xuICB9O1xufVxuIiwgIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBYTUwgfSBmcm9tIFwiLi4vVW5zYWZlWE1MXCI7XG5pbXBvcnQgeyBSZW5kZXJlcjJELCBUZXh0QWxpZ24gfSBmcm9tIFwiLlwiO1xuXG5jb25zdCBSMkQgPSAxODAuMCAvIE1hdGguUEk7XG5jb25zdCBQSTIgPSAyICogTWF0aC5QSTtcbmNvbnN0IF9QSTIgPSAwLjUgLyBNYXRoLlBJO1xuXG50eXBlIFNWR1N0eWxlID0ge1xuICBzdHJva2U6IHtcbiAgICBzdHJva2U6IHN0cmluZztcbiAgICBcInN0cm9rZS13aWR0aFwiOiBudW1iZXI7XG4gICAgXCJzdHJva2Utb3BhY2l0eVwiPzogbnVtYmVyO1xuICB9O1xuICBmaWxsOiB7XG4gICAgZmlsbDogc3RyaW5nO1xuICAgIFwiZmlsbC1vcGFjaXR5XCI/OiBudW1iZXI7XG4gIH07XG4gIGZvbnRTaXplOiBudW1iZXI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTVkcgaW1wbGVtZW50cyBSZW5kZXJlcjJEIHtcbiAgc3ZnOiBYTUw7XG5cbiAgcHJpdmF0ZSBfcGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHN0eWxlOiBTVkdTdHlsZSA9IHtcbiAgICBzdHJva2U6IHtcbiAgICAgIHN0cm9rZTogXCIjMDAwMDAwXCIsXG4gICAgICBcInN0cm9rZS13aWR0aFwiOiAxLFxuICAgIH0sXG4gICAgZmlsbDoge1xuICAgICAgZmlsbDogXCIjMDAwMDAwXCIsXG4gICAgfSxcbiAgICBmb250U2l6ZTogMTMsXG4gIH07XG5cbiAgcHJpdmF0ZSByb3VuZCh4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh4ICogMTAwMCkgLyAxMDAwO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLnN2ZyA9IChcbiAgICAgIDxzdmdcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgIHZlcnNpb249XCIxLjFcIlxuICAgICAgICB2aWV3Qm94PXtgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWB9XG4gICAgICA+PC9zdmc+XG4gICAgKTtcbiAgfVxuXG4gIGdldCBmaWxsU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZS5maWxsLmZpbGw7XG4gIH1cbiAgc2V0IGZpbGxTdHlsZShmaWxsU3R5bGU6IHN0cmluZykge1xuICAgIGxldCB7IGZpbGwgfSA9IHRoaXMuc3R5bGU7XG4gICAgLy8gT3BhY2l0eSBvbmx5IGZvciA4IGRpZ2l0IGhleFxuICAgIGlmIChmaWxsU3R5bGUubGVuZ3RoID09IDkpIHtcbiAgICAgIGxldCBvcCA9IHBhcnNlSW50KFwiMHhcIiArIGZpbGxTdHlsZS5zbGljZSg3LCA5KSkgLyAyNTUuMDtcbiAgICAgIGZpbGxTdHlsZSA9IGZpbGxTdHlsZS5zbGljZSgwLCA3KTtcblxuICAgICAgaWYgKG9wID09PSAxLjApIGRlbGV0ZSBmaWxsW1wiZmlsbC1vcGFjaXR5XCJdO1xuICAgICAgZWxzZSBmaWxsW1wiZmlsbC1vcGFjaXR5XCJdID0gTWF0aC5yb3VuZCgxMDAwICogb3ApIC8gMTAwMDtcbiAgICB9IGVsc2UgZGVsZXRlIGZpbGxbXCJmaWxsLW9wYWNpdHlcIl07XG4gICAgZmlsbC5maWxsID0gZmlsbFN0eWxlO1xuICB9XG5cbiAgZ2V0IHN0cm9rZVN0eWxlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGUuc3Ryb2tlLnN0cm9rZTtcbiAgfVxuICBzZXQgc3Ryb2tlU3R5bGUoc3Ryb2tlU3R5bGU6IHN0cmluZykge1xuICAgIGxldCB7IHN0cm9rZSB9ID0gdGhpcy5zdHlsZTtcbiAgICAvLyBwYXJzZSBvcGFjaXR5IGlmIHN0eWxlIGlzIDggZGlnaXQgaGV4XG4gICAgaWYgKHN0cm9rZVN0eWxlLmxlbmd0aCA9PSA5KSB7XG4gICAgICBsZXQgb3BhY2l0eSA9IHBhcnNlSW50KFwiMHhcIiArIHN0cm9rZVN0eWxlLnNsaWNlKDcsIDkpKSAvIDI1NS4wO1xuICAgICAgc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZS5zbGljZSgwLCA3KTtcblxuICAgICAgaWYgKG9wYWNpdHkgPT09IDEuMCkgZGVsZXRlIHN0cm9rZVtcInN0cm9rZS1vcGFjaXR5XCJdO1xuICAgICAgZWxzZSBzdHJva2VbXCJzdHJva2Utb3BhY2l0eVwiXSA9IE1hdGgucm91bmQoMTAwMCAqIG9wYWNpdHkpIC8gMTAwMDtcbiAgICB9IGVsc2UgZGVsZXRlIHN0cm9rZVtcInN0cm9rZS1vcGFjaXR5XCJdO1xuICAgIHN0cm9rZS5zdHJva2UgPSBzdHJva2VTdHlsZTtcbiAgfVxuXG4gIGdldCBsaW5lV2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGUuc3Ryb2tlW1wic3Ryb2tlLXdpZHRoXCJdO1xuICB9XG4gIHNldCBsaW5lV2lkdGgobGluZVdpZHRoOiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlLnN0cm9rZVtcInN0cm9rZS13aWR0aFwiXSA9IGxpbmVXaWR0aDtcbiAgfVxuXG4gIGdldCBmb250U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZS5mb250U2l6ZTtcbiAgfVxuICBzZXQgZm9udFNpemUoZm9udFNpemU6IG51bWJlcikge1xuICAgIHRoaXMuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZTtcbiAgfVxuXG4gIHRleHROb2RlKHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGFsaWduOiBUZXh0QWxpZ24gPSAwKSB7XG4gICAgbGV0IGJsOiBcInRleHQtYWZ0ZXItZWRnZVwiIHwgXCJoYW5naW5nXCIgfCBcIm1pZGRsZVwiID0gXCJtaWRkbGVcIixcbiAgICAgIGFsOiBcInN0YXJ0XCIgfCBcImVuZFwiIHwgXCJtaWRkbGVcIiA9IFwibWlkZGxlXCI7XG4gICAgc3dpdGNoIChhbGlnbiAmIDBiMTEwMCkge1xuICAgICAgY2FzZSBUZXh0QWxpZ24uVDpcbiAgICAgICAgYmwgPSBcImhhbmdpbmdcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRleHRBbGlnbi5COlxuICAgICAgICBibCA9IFwidGV4dC1hZnRlci1lZGdlXCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFsaWduICYgMGIwMDExKSB7XG4gICAgICBjYXNlIFRleHRBbGlnbi5MOlxuICAgICAgICBhbCA9IFwic3RhcnRcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRleHRBbGlnbi5SOlxuICAgICAgICBhbCA9IFwiZW5kXCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG5cbiAgICB0aGlzLnN2Zy5hcHBlbmQoXG4gICAgICA8dGV4dFxuICAgICAgICB4PXtyb3VuZGVkKHgpfVxuICAgICAgICB5PXtyb3VuZGVkKHkpfVxuICAgICAgICBmb250LXNpemU9e3RoaXMuc3R5bGUuZm9udFNpemV9XG4gICAgICAgIGZvbnQtZmFtaWx5PVwiVGltZXMgTmV3IFJvbWFuXCJcbiAgICAgICAgZG9taW5hbnQtYmFzZWxpbmU9e2JsfVxuICAgICAgICB0ZXh0LWFuY2hvcj17YWx9XG4gICAgICA+XG4gICAgICAgIHt0ZXh0fVxuICAgICAgPC90ZXh0PlxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBiZWdpblBhdGgoKSB7XG4gICAgdGhpcy5fcGF0aCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBtb3ZlVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG4gICAgdGhpcy5fcGF0aCA9ICh0aGlzLl9wYXRoIHx8IFwiXCIpICsgYE0ke3JvdW5kZWQoeCl9ICR7cm91bmRlZCh5KX1gO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGxpbmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5fcGF0aCkgcmV0dXJuIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLl9wYXRoICs9IGBMJHtyb3VuZGVkKHgpfSAke3JvdW5kZWQoeSl9YDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBxdWFkcmF0aWNUbyhjcFg6IG51bWJlciwgY3BZOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XG4gICAgaWYgKCF0aGlzLl9wYXRoKSByZXR1cm4gdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgbGV0IHJvdW5kZWQgPSB0aGlzLnJvdW5kO1xuICAgIHRoaXMuX3BhdGggKz0gYFEke3JvdW5kZWQoY3BYKX0gJHtyb3VuZGVkKGNwWSl9ICR7cm91bmRlZCh4KX0gJHtyb3VuZGVkKFxuICAgICAgeVxuICAgICl9YDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjdWJpY1RvKFxuICAgIGNwMVg6IG51bWJlcixcbiAgICBjcDFZOiBudW1iZXIsXG4gICAgY3AyWDogbnVtYmVyLFxuICAgIGNwMlk6IG51bWJlcixcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICk6IHRoaXMge1xuICAgIGlmICghdGhpcy5fcGF0aCkgcmV0dXJuIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgIGxldCByb3VuZGVkID0gdGhpcy5yb3VuZDtcbiAgICB0aGlzLl9wYXRoICs9IGBDJHtyb3VuZGVkKGNwMVgpfSAke3JvdW5kZWQoY3AxWSl9ICR7cm91bmRlZChcbiAgICAgIGNwMlhcbiAgICApfSAke3JvdW5kZWQoY3AyWSl9ICR7cm91bmRlZCh4KX0gJHtyb3VuZGVkKHkpfWA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvc2VQYXRoKCkge1xuICAgIHRoaXMuX3BhdGggPSAodGhpcy5fcGF0aCB8fCBcIlwiKSArIFwiWlwiO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKSB7XG4gICAgdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgdGhpcy5saW5lVG8oeCArIHcsIHkpO1xuICAgIHRoaXMubGluZVRvKHggKyB3LCB5ICsgaCk7XG4gICAgdGhpcy5saW5lVG8oeCwgeSArIGgpO1xuICAgIHRoaXMubGluZVRvKHgsIHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFyYyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHJhZGl1czogbnVtYmVyLFxuICAgIHN0YXJ0QW5nbGU6IG51bWJlcixcbiAgICBlbmRBbmdsZTogbnVtYmVyLFxuICAgIGN3PzogYm9vbGVhblxuICApIHtcbiAgICBsZXQgZGVsdGEgPSAoZW5kQW5nbGUgLSBzdGFydEFuZ2xlKSAqIF9QSTI7XG4gICAgZGVsdGEgPSBkZWx0YSAtIE1hdGguZmxvb3IoZGVsdGEpO1xuICAgIGlmIChkZWx0YSA+PSAwLjQ5OSAmJiBkZWx0YSA8PSAwLjUxMSkge1xuICAgICAgLy8gSGFsZiBhcmNzIGFyZSBhbWJpZ291cyBpbiBzdmcgZmlsZXMuXG4gICAgICAvLyBTcGxpdCB0aGUgYXJjIGludG8gdHdvIGhhbGYgY2lyY2xlcy5cbiAgICAgIGxldCBtaWRBbmdsZSA9IHN0YXJ0QW5nbGUgKyAoY3cgPyArMC41ICogZGVsdGEgOiAtMC41ICogZGVsdGEpO1xuICAgICAgdGhpcy5hcmMoeCwgeSwgcmFkaXVzLCBzdGFydEFuZ2xlLCBtaWRBbmdsZSwgY3cpO1xuICAgICAgdGhpcy5hcmMoeCwgeSwgcmFkaXVzLCBtaWRBbmdsZSwgZW5kQW5nbGUsIGN3KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGxldCBzeCA9IHggKyByYWRpdXMgKiBNYXRoLmNvcyhzdGFydEFuZ2xlKSxcbiAgICAgIHN5ID0geSArIHJhZGl1cyAqIE1hdGguc2luKHN0YXJ0QW5nbGUpO1xuICAgIGxldCBleCA9IHggKyByYWRpdXMgKiBNYXRoLmNvcyhlbmRBbmdsZSksXG4gICAgICBleSA9IHkgKyByYWRpdXMgKiBNYXRoLnNpbihlbmRBbmdsZSk7XG5cbiAgICBsZXQgc2hvcnQgPSBkZWx0YSA8PSAwLjUgPT0gY3c7XG5cbiAgICBsZXQgcm91bmRlZCA9IHRoaXMucm91bmQ7XG4gICAgdGhpcy5saW5lVG8oc3gsIHN5KTtcblxuICAgIHRoaXMuX3BhdGggKz0gYEEgJHtyb3VuZGVkKHJhZGl1cyl9ICR7cm91bmRlZChyYWRpdXMpfSAwICR7c2hvcnQgPyAwIDogMX0gJHtcbiAgICAgIGN3ID8gMSA6IDBcbiAgICB9ICR7cm91bmRlZChleCl9ICR7cm91bmRlZChleSl9YDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzdHJva2UoKSB7XG4gICAgaWYgKHRoaXMuX3BhdGgpXG4gICAgICB0aGlzLnN2Zy5hcHBlbmQoXG4gICAgICAgIDxwYXRoIGQ9e3RoaXMuX3BhdGh9IGZpbGw9XCJub25lXCIgey4uLnRoaXMuc3R5bGUuc3Ryb2tlfSAvPlxuICAgICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBmaWxsKCkge1xuICAgIGlmICh0aGlzLl9wYXRoKVxuICAgICAgdGhpcy5zdmcuYXBwZW5kKDxwYXRoIGQ9e3RoaXMuX3BhdGh9IHsuLi50aGlzLnN0eWxlLmZpbGx9IC8+KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBmaWxsQW5kU3Ryb2tlKCkge1xuICAgIGlmICh0aGlzLl9wYXRoKVxuICAgICAgdGhpcy5zdmcuYXBwZW5kKFxuICAgICAgICA8cGF0aCBkPXt0aGlzLl9wYXRofSB7Li4udGhpcy5zdHlsZS5maWxsfSB7Li4udGhpcy5zdHlsZS5zdHJva2V9IC8+XG4gICAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRvWE1MKCkge1xuICAgIHJldHVybiBgPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwibm9cIj8+XFxuJHt0aGlzLnN2Zy50b1N0cmluZygpfWA7XG4gIH1cbiAgdG9GaWxlU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRvWE1MKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIFRleHQgYWxpZ24gZ2l2ZW4gYXMgYSBiaW5hcnkgcmVwcmVzZW50YXRpb24uXG4gKiBCeSBgYWxpZ24gJiAwYjExMDBgIG9uZSBvYnRhaW5zIHRoZSB2ZXJ0aWNhbCBhbGlnbiAoVCAvIEMgLyBCKS5cbiAqIFNpbWlsYXJseSBmb3IgYGFsaWduICYgMGIwMDExYCBvbmUgb2J0YWlucyB0aGUgaG9yaXpvbnRhbCBhbGlnbiAoTCAvIEMgLyBSKS5cbiAqL1xuZXhwb3J0IGVudW0gVGV4dEFsaWduIHtcbiAgQyA9IDBiMDAwMCxcbiAgVCA9IDBiMTAwMCxcbiAgTCA9IDBiMDAxMCxcbiAgUiA9IDBiMDAwMSxcbiAgQiA9IDBiMDEwMCxcbiAgVEwgPSAwYjEwMTAsXG4gIFRSID0gMGIxMDAxLFxuICBCTCA9IDBiMDExMCxcbiAgQlIgPSAwYjAxMDEsXG59XG5cbi8qKlxuICogQSB0eXBlIGZvciBkaWZmZXJlbnQgcmVuZGVyaW5nIGJhY2tlbmRzLlxuICogQnkgZGVmYXVsdCBhbGwgY29vcmRpbmF0ZXMgc2hvdWxkIGJlIHByb3ZpZGVkXG4gKiB3aXRoIHRoZSBvcmlnaW4gaW4gdGhlIHRvcCBsZWZ0IGNvcm5lci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJlcjJEIHtcbiAgZ2V0IGxpbmVXaWR0aCgpOiBudW1iZXI7XG4gIHNldCBsaW5lV2lkdGgobGluZVdpZHRoOiBudW1iZXIpO1xuXG4gIGdldCBmb250U2l6ZSgpOiBudW1iZXI7XG4gIHNldCBmb250U2l6ZShmb250U2l6ZTogbnVtYmVyKTtcblxuICBnZXQgZmlsbFN0eWxlKCk6IHN0cmluZztcbiAgc2V0IGZpbGxTdHlsZShmaWxsU3R5bGU6IHN0cmluZyk7XG5cbiAgZ2V0IHN0cm9rZVN0eWxlKCk6IHN0cmluZztcbiAgc2V0IHN0cm9rZVN0eWxlKHN0cm9rZVN0eWxlOiBzdHJpbmcpO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gYWxpZ24gVGhlIGFsaWdubWVudCBvZiB0aGUgdGV4dC4gRGVmYXVsdHMgdG8gYEMgPSAwYC5cbiAgICovXG4gIHRleHROb2RlKHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIGFsaWduPzogVGV4dEFsaWduKTogdGhpcztcblxuICAvKiogQmVnaW4gYSBuZXcgUGF0aC4gVGhpcyBjbGVhcnMgYWxsIHBvaW50cyBmcm9tIHRoZSBjdXJyZW50IHBhdGguICovXG4gIGJlZ2luUGF0aCgpOiB0aGlzO1xuXG4gIC8qKiBNb3ZlIHRoZSBwYXRoIHRvIGEgbG9jYXRpb24gd2l0aG91dCBkcmF3aW5nIGEgbGluZS4gKi9cbiAgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcztcblxuICAvKiogRHJhdyBhIGxpbmUgZnJvbSB0aGUgY3VycmVudCB0byB0aGUgdGFyZ2V0IGxvY2F0aW9uLiAqL1xuICBsaW5lVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzO1xuXG4gIC8qKiBEcmF3IGEgcXVhZHJhdGljIGN1cnZlIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24uICovXG4gIHF1YWRyYXRpY1RvKGNwWDogbnVtYmVyLCBjcFk6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzO1xuXG4gIC8qKiBEcmF3IGEgY3ViaWMgY3VydmUgKGJlemllciBjdXJ2ZSkgZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbi4gKi9cbiAgY3ViaWNUbyhcbiAgICBjcDFYOiBudW1iZXIsXG4gICAgY3AxWTogbnVtYmVyLFxuICAgIGNwMlg6IG51bWJlcixcbiAgICBjcDJZOiBudW1iZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiB0aGlzO1xuXG4gIC8qKiBDbG9zZSB0aGUgY3VycmVudCBwYXRoLiAqL1xuICBjbG9zZVBhdGgoKTogdGhpcztcblxuICAvKipcbiAgICogRHJhdyBhIGFyYyBvZiBhIGNpcmNsZSBjZW50ZXJlZCBhdCAoeCx5KS5cbiAgICogRHJhd2luZyBhIGZ1bGwgY2lyY2xlIGlzIG5vdCBwb3NzaWJsZS5cbiAgICogQHBhcmFtIHggY2VudGVyIHhcbiAgICogQHBhcmFtIHkgY2VudGVyIHlcbiAgICogQHBhcmFtIHJhZGl1cyByYWRpdXNcbiAgICogQHBhcmFtIHN0YXJ0QW5nbGUgVGhlIHN0YXJ0IGFuZ2xlIGluIHJhZGlhbnNcbiAgICogQHBhcmFtIGVuZEFuZ2xlIFRoZSBlbmQgYW5nbGUgaW4gcmFkaWFuc1xuICAgKiBAcGFyYW0gY3cgV2hldGhlciB0aGUgYXJjIHNob3VsZCBydW4gY2xvY2t3aXNlLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICovXG4gIGFyYyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHJhZGl1czogbnVtYmVyLFxuICAgIHN0YXJ0QW5nbGU6IG51bWJlcixcbiAgICBlbmRBbmdsZTogbnVtYmVyLFxuICAgIGN3PzogYm9vbGVhblxuICApOiB0aGlzO1xuXG4gIC8qKiBTdHJva2UgdGhlIGN1cnJlbnQgcGF0aCAqL1xuICBzdHJva2UoKTogdGhpcztcbiAgLyoqIEZpbGwgdGhlIGN1cnJlbnQgcGF0aCAqL1xuICBmaWxsKCk6IHRoaXM7XG4gIC8qKiBTdHJva2UgYW5kIEZpbGwgdGhlIGN1cnJlbnQgcGF0aCAqL1xuICBmaWxsQW5kU3Ryb2tlKCk6IHRoaXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVhc3VyZVRleHQge1xuICBtZWFzdXJlVGV4dCh0ZXh0OiBzdHJpbmcpOiB7XG4gICAgdG9wOiBudW1iZXI7XG4gICAgYm90OiBudW1iZXI7XG4gICAgbGVmdDogbnVtYmVyO1xuICAgIHJpZ2h0OiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ2FudmFzIH0gZnJvbSBcIi4vQ2FudmFzXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNWRyB9IGZyb20gXCIuL1NWR1wiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBUaWtaIH0gZnJvbSBcIi4vVGlrWlwiO1xuIiwgImNvbnN0IENIQVJTID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLFxuICBCQl9DSEFSUyA9IFtcbiAgICAuLi5cIlx1RDgzNVx1REQzOFx1RDgzNVx1REQzOVx1MjEwMlx1RDgzNVx1REQzQlx1RDgzNVx1REQzQ1x1RDgzNVx1REQzRFx1RDgzNVx1REQzRVx1MjEwRFx1RDgzNVx1REQ0MFx1RDgzNVx1REQ0MVx1RDgzNVx1REQ0Mlx1RDgzNVx1REQ0M1x1RDgzNVx1REQ0NFx1MjExNVx1RDgzNVx1REQ0Nlx1MjExOVx1MjExQVx1MjExRFx1RDgzNVx1REQ0QVx1RDgzNVx1REQ0Qlx1RDgzNVx1REQ0Q1x1RDgzNVx1REQ0RFx1RDgzNVx1REQ0RVx1RDgzNVx1REQ0Rlx1RDgzNVx1REQ1MFx1MjEyNFx1RDgzNVx1REQ1Mlx1RDgzNVx1REQ1M1x1RDgzNVx1REQ1NFx1RDgzNVx1REQ1NVx1RDgzNVx1REQ1Nlx1RDgzNVx1REQ1N1x1RDgzNVx1REQ1OFx1RDgzNVx1REQ1OVx1RDgzNVx1REQ1QVx1RDgzNVx1REQ1Qlx1RDgzNVx1REQ1Q1x1RDgzNVx1REQ1RFx1RDgzNVx1REQ1RVx1RDgzNVx1REQ1Rlx1RDgzNVx1REQ2MFx1RDgzNVx1REQ2MVx1RDgzNVx1REQ2Mlx1RDgzNVx1REQ2M1x1RDgzNVx1REQ2NFx1RDgzNVx1REQ2NVx1RDgzNVx1REQ2Nlx1RDgzNVx1REQ2N1x1RDgzNVx1REQ2OFx1RDgzNVx1REQ2OVx1RDgzNVx1REQ2QVx1RDgzNVx1REQ2Qlx1RDgzNVx1REZEOFx1RDgzNVx1REZEOVx1RDgzNVx1REZEQVx1RDgzNVx1REZEQlx1RDgzNVx1REZEQ1x1RDgzNVx1REZERFx1RDgzNVx1REZERVx1RDgzNVx1REZERlx1RDgzNVx1REZFMFx1RDgzNVx1REZFMVwiLFxuICBdLFxuICBGUkFLX0NIQVJTID0gWy4uLlwiXHVEODM1XHVERDZDXHVEODM1XHVERDZEXHVEODM1XHVERDZFXHVEODM1XHVERDZGXHVEODM1XHVERDcwXHVEODM1XHVERDcxXHVEODM1XHVERDcyXHVEODM1XHVERDczXHVEODM1XHVERDc0XHVEODM1XHVERDc1XHVEODM1XHVERDc2XHVEODM1XHVERDc3XHVEODM1XHVERDc4XHVEODM1XHVERDc5XHVEODM1XHVERDdBXHVEODM1XHVERDdCXHVEODM1XHVERDdDXHVEODM1XHVERDdEXHVEODM1XHVERDdFXHVEODM1XHVERDdGXHVEODM1XHVERDgwXHVEODM1XHVERDgxXHVEODM1XHVERDgyXHVEODM1XHVERDgzXHVEODM1XHVERDg0XHVEODM1XHVERDg1XHVEODM1XHVERDg2XHVEODM1XHVERDg3XHVEODM1XHVERDg4XHVEODM1XHVERDg5XHVEODM1XHVERDhBXHVEODM1XHVERDhCXHVEODM1XHVERDhDXHVEODM1XHVERDhEXHVEODM1XHVERDhFXHVEODM1XHVERDhGXHVEODM1XHVERDkwXHVEODM1XHVERDkxXHVEODM1XHVERDkyXHVEODM1XHVERDkzXHVEODM1XHVERDk0XHVEODM1XHVERDk1XHVEODM1XHVERDk2XHVEODM1XHVERDk3XHVEODM1XHVERDk4XHVEODM1XHVERDk5XHVEODM1XHVERDlBXHVEODM1XHVERDlCXHVEODM1XHVERDlDXHVEODM1XHVERDlEXHVEODM1XHVERDlFXHVEODM1XHVERDlGXCJdO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEFscGhhOiBcIlx1MDM5MVwiLFxuICBhbHBoYTogXCJcdTAzQjFcIixcbiAgQmV0YTogXCJcdTAzOTJcIixcbiAgYmV0YTogXCJcdTAzQjJcIixcbiAgR2FtbWE6IFwiXHUwMzkzXCIsXG4gIGdhbW1hOiBcIlx1MDNCM1wiLFxuICBEZWx0YTogXCJcdTAzOTRcIixcbiAgZGVsdGE6IFwiXHUwM0I0XCIsXG4gIEVwc2lsb246IFwiXHUwMzk1XCIsXG4gIGVwc2lsb246IFwiXHUwM0I1XCIsXG4gIFpldGE6IFwiXHUwMzk2XCIsXG4gIHpldGE6IFwiXHUwM0I2XCIsXG4gIEV0YTogXCJcdTAzOTdcIixcbiAgZXRhOiBcIlx1MDNCN1wiLFxuICBUaGV0YTogXCJcdTAzOThcIixcbiAgdGhldGE6IFwiXHUwM0I4XCIsXG4gIElvdGE6IFwiXHUwMzk5XCIsXG4gIGlvdGE6IFwiXHUwM0I5XCIsXG4gIEthcHBhOiBcIlx1MDM5QVwiLFxuICBrYXBwYTogXCJcdTAzQkFcIixcbiAgTGFtYmRhOiBcIlx1MDM5QlwiLFxuICBsYW1iZGE6IFwiXHUwM0JCXCIsXG4gIE11OiBcIlx1MDM5Q1wiLFxuICBtdTogXCJcdTAzQkNcIixcbiAgTnU6IFwiXHUwMzlEXCIsXG4gIG51OiBcIlx1MDNCRFwiLFxuICBYaTogXCJcdTAzOUVcIixcbiAgeGk6IFwiXHUwM0JFXCIsXG4gIE9taWNyb246IFwiXHUwMzlGXCIsXG4gIG9taWNyb246IFwiXHUwM0JGXCIsXG4gIFBpOiBcIlx1MDNBMFwiLFxuICBwaTogXCJcdTAzQzBcIixcbiAgUmhvOiBcIlx1MDNBMVwiLFxuICByaG86IFwiXHUwM0MxXCIsXG4gIFNpZ21hOiBcIlx1MDNBM1wiLFxuICBzaWdtYTogXCJcdTAzQzNcIixcbiAgVGF1OiBcIlx1MDNBNFwiLFxuICB0YXU6IFwiXHUwM0M0XCIsXG4gIFVwc2lsb246IFwiXHUwM0E1XCIsXG4gIHVwc2lsb246IFwiXHUwM0M1XCIsXG4gIFBoaTogXCJcdTAzQTZcIixcbiAgcGhpOiBcIlx1MDNDNlwiLFxuICBDaGk6IFwiXHUwM0E3XCIsXG4gIGNoaTogXCJcdTAzQzdcIixcbiAgUHNpOiBcIlx1MDNBOFwiLFxuICBwc2k6IFwiXHUwM0M4XCIsXG4gIE9tZWdhOiBcIlx1MDNBOVwiLFxuICBvbWVnYTogXCJcdTAzQzlcIixcbiAgbWF0aEJCOiBmdW5jdGlvbiAoY2hhcmFjdGVyOiBzdHJpbmcpIHtcbiAgICBpZiAoY2hhcmFjdGVyLmxlbmd0aCA9PSAxKSB7XG4gICAgICBsZXQgaSA9IENIQVJTLmluZGV4T2YoY2hhcmFjdGVyKTtcbiAgICAgIHJldHVybiBCQl9DSEFSU1tpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHJlcyA9IFwiXCI7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3Rlci5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXMgPSByZXMgKyBCQl9DSEFSU1tDSEFSUy5pbmRleE9mKGNoYXJhY3Rlci5jaGFyQXQoaSkpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICB9LFxuICBtYXRoRnJhazogZnVuY3Rpb24gKGNoYXJhY3Rlcjogc3RyaW5nKSB7XG4gICAgaWYgKGNoYXJhY3Rlci5sZW5ndGggPT0gMSkge1xuICAgICAgbGV0IGkgPSBDSEFSUy5pbmRleE9mKGNoYXJhY3Rlcik7XG4gICAgICByZXR1cm4gRlJBS19DSEFSU1tpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHJlcyA9IFwiXCI7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3Rlci5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXMgPSByZXMgKyBGUkFLX0NIQVJTW0NIQVJTLmluZGV4T2YoY2hhcmFjdGVyLmNoYXJBdChpKSldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gIH0sXG59O1xuIiwgImltcG9ydCB7IENvbXBsZXggfSBmcm9tIFwiLi4vbW9kdWxlcy9tYXRoXCI7XG5pbXBvcnQgKiBhcyByZW5kZXIgZnJvbSBcIi4uL3JlbmRlcmVyXCI7XG5pbXBvcnQgKiBhcyBzcHJpdGVzIGZyb20gXCIuL3Nwcml0ZXNcIjtcbmltcG9ydCBUZVggZnJvbSBcIi4vVGVYXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV4U2NUciB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBvcmlnaW46IFtudW1iZXIsIG51bWJlcl0sIHB1YmxpYyBzY2FsZTogbnVtYmVyKSB7fVxuXG4gIHByb2plY3QoejogQ29tcGxleCB8IFtudW1iZXIsIG51bWJlcl0pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh6KSkgeiA9IG5ldyBDb21wbGV4KHpbMF0sIHpbMV0pO1xuICAgIHJldHVybiBbXG4gICAgICB6LnJlYWwgKiB0aGlzLnNjYWxlICsgdGhpcy5vcmlnaW5bMF0sXG4gICAgICAtei5pbWFnICogdGhpcy5zY2FsZSArIHRoaXMub3JpZ2luWzFdLFxuICAgIF07XG4gIH1cblxuICBpbnZlcnQocDogW251bWJlciwgbnVtYmVyXSk6IENvbXBsZXgge1xuICAgIHJldHVybiBuZXcgQ29tcGxleChcbiAgICAgIChwWzBdIC0gdGhpcy5vcmlnaW5bMF0pIC8gdGhpcy5zY2FsZSxcbiAgICAgIC0ocFsxXSAtIHRoaXMub3JpZ2luWzFdKSAvIHRoaXMuc2NhbGVcbiAgICApO1xuICB9XG5cbiAgYWRkVHJhbnNsYXRpb24oZDogW251bWJlciwgbnVtYmVyXSkge1xuICAgIHRoaXMub3JpZ2luID0gW3RoaXMub3JpZ2luWzBdICsgZFswXSwgdGhpcy5vcmlnaW5bMV0gKyBkWzFdXTtcbiAgfVxuXG4gIGFkZFpvb20oZmFjOiBudW1iZXIsIGM6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgICBjb25zdCBbb3gsIG95XSA9IHRoaXMub3JpZ2luO1xuICAgIHRoaXMub3JpZ2luID0gW294ICogZmFjICsgY1swXSAqICgxIC0gZmFjKSwgb3kgKiBmYWMgKyBjWzFdICogKDEgLSBmYWMpXTtcbiAgICB0aGlzLnNjYWxlICo9IGZhYztcbiAgfVxufVxuXG4vKipcbiAqIERyYXcgYW4gYXJyb3cgd2l0aCBpbmZpbml0ZSBsZW5ndGguXG4gKiBAcGFyYW0gY3R4IFJlbmRlciBjb250ZXh0XG4gKiBAcGFyYW0gd2lkdGggU2NyZWVuIHdpZHRoXG4gKiBAcGFyYW0gaGVpZ2h0IFNjcmVlbiBoZWlnaHRcbiAqIEBwYXJhbSBwIFBvaW50IG9uIGxpbmVcbiAqIEBwYXJhbSBkIERpcmVjdGlvbiBvZiBhcnJvd1xuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgc3R1ZmZcbiAqIEByZXR1cm5zIFtzeCwgc3ksIGV4LCBleV0gVGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIG9mIHRoZSBkcmF3biBhcnJvdy5cbiAqL1xuZnVuY3Rpb24gaW5mQXJyb3coXG4gIGN0eDogcmVuZGVyLlJlbmRlcmVyMkQsXG4gIHdpZHRoOiBudW1iZXIsXG4gIGhlaWdodDogbnVtYmVyLFxuICBwOiBbbnVtYmVyLCBudW1iZXJdLFxuICBkOiBbbnVtYmVyLCBudW1iZXJdLFxuICB7IGFycm93U2l6ZSA9IDkgfSA9IHt9XG4pOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IGRhYnMgPSBNYXRoLnNxcnQoZFswXSAqIGRbMF0gKyBkWzFdICogZFsxXSk7XG4gIGQgPSBbZFswXSAvIGRhYnMsIGRbMV0gLyBkYWJzXTtcbiAgY29uc3QgdDogbnVtYmVyW10gPSBbXG4gICAgZFswXSA9PT0gMCA/IC1JbmZpbml0eSA6ICgwIC0gcFswXSkgLyBkWzBdLFxuICAgIGRbMF0gPT09IDAgPyBJbmZpbml0eSA6ICh3aWR0aCAtIHBbMF0pIC8gZFswXSxcbiAgICBkWzFdID09PSAwID8gLUluZmluaXR5IDogKDAgLSBwWzFdKSAvIGRbMV0sXG4gICAgZFsxXSA9PT0gMCA/IEluZmluaXR5IDogKGhlaWdodCAtIHBbMV0pIC8gZFsxXSxcbiAgXS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbiAgLy8gc3RhcnQgYW5kIGVuZC4gbWF5IHN0aWxsIGJlIG91dCBvZiBib3VuZHNcbiAgY29uc3QgcyA9IFtwWzBdICsgdFsxXSAqIGRbMF0sIHBbMV0gKyB0WzFdICogZFsxXV07XG4gIGNvbnN0IGUgPSBbcFswXSArICh0WzJdIC0gMSkgKiBkWzBdLCBwWzFdICsgKHRbMl0gLSAxKSAqIGRbMV1dO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyhzWzBdLCBzWzFdKTtcbiAgY3R4LmxpbmVUbyhlWzBdIC0gMiAqIGRbMF0sIGVbMV0gLSAyICogZFsxXSk7XG4gIGN0eC5zdHJva2UoKTtcblxuICBsZXQgYSA9IGFycm93U2l6ZTtcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKGVbMF0sIGVbMV0pO1xuICBjdHgubGluZVRvKFxuICAgIGVbMF0gLSBhICogZFswXSArIDAuNSAqIGEgKiBkWzFdLFxuICAgIGVbMV0gLSBhICogZFsxXSAtIDAuNSAqIGEgKiBkWzBdXG4gICk7XG4gIGN0eC5saW5lVG8oXG4gICAgZVswXSAtIGEgKiBkWzBdIC0gMC41ICogYSAqIGRbMV0sXG4gICAgZVsxXSAtIGEgKiBkWzFdICsgMC41ICogYSAqIGRbMF1cbiAgKTtcbiAgY3R4LmxpbmVUbyhlWzBdLCBlWzFdKTtcbiAgY3R4LmZpbGwoKTtcblxuICByZXR1cm4gW3NbMF0sIHNbMV0sIGVbMF0sIGVbMV1dO1xufVxuXG4vKipcbiAqIERyYXcgdGhlIGF4ZXMgb2YgdGhlIGNvbXBsZXggcGxhbmUgdW5kZXIgYSBsaW5lYXIgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSBjdHggVGhlIHJlbmRlcmluZyBjb250ZXh0XG4gKiBAcGFyYW0gd2lkdGggV2lkdGggb2YgdGhlIGNvbnRleHRcbiAqIEBwYXJhbSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byB1c2UgZm9yIHRoZSBjb29yZGluYXRlc1xuICogQHBhcmFtIHByb2plY3Rpb24ub3JpZ2luIFRoZSBvcmlnaW4gcG9zaXRpb24gb24gc2NyZWVuXG4gKiBAcGFyYW0gcHJvamVjdGlvbi5zY2FsZSBUaGUgc2NhbGUgb2YgdGhlIHBsYW5lXG4gKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciBkcmF3aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3Q2FydGhlc2lhbjJEQXhpcyhcbiAgY3R4OiByZW5kZXIuUmVuZGVyZXIyRCAmIHtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xuICB9ICYgcmVuZGVyLk1lYXN1cmVUZXh0LFxuICBwcm9qZWN0aW9uOiB7IG9yaWdpbjogW251bWJlciwgbnVtYmVyXTsgc2NhbGU6IG51bWJlciB9LFxuICB7XG4gICAgbm9YID0gZmFsc2UsXG4gICAgbm9ZID0gZmFsc2UsXG4gICAgYXJyb3dTaXplOiBhcyA9IDcsXG4gICAgZm9udFNpemU6IGZzID0gMTMsXG4gICAgbGFiZWxYID0gVGVYLm1hdGhCQihcIlJcIiksXG4gICAgbGFiZWxZID0gXCJpXCIgKyBUZVgubWF0aEJCKFwiUlwiKSxcbiAgfSA9IHt9XG4pIHtcbiAgbGV0IHsgb3JpZ2luLCBzY2FsZSB9ID0gcHJvamVjdGlvbjtcbiAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjdHg7XG5cbiAgY3R4LmZvbnRTaXplID0gZnM7XG5cbiAgY29uc3QgcHJvamVjdCA9IGZ1bmN0aW9uIChcbiAgICB0aGlzOiB7IG94OiBudW1iZXI7IG95OiBudW1iZXI7IHBzOiBudW1iZXIgfSxcbiAgICByOiBudW1iZXIsXG4gICAgaTogbnVtYmVyID0gMFxuICApOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICBsZXQgeyBwcywgb3gsIG95IH0gPSB0aGlzO1xuICAgIHJldHVybiBbciAqIHBzICsgb3gsIC1pICogcHMgKyBveV07XG4gIH0uYmluZCh7IG94OiBvcmlnaW5bMF0sIG95OiBvcmlnaW5bMV0sIHBzOiBzY2FsZSB9KTtcblxuICBjb25zdCBwb3MxID0gcHJvamVjdCgxKTtcbiAgY29uc3QgcG9zaSA9IHByb2plY3QoMCwgMSk7XG5cbiAgY29uc3QgZHggPSBbcG9zMVswXSAtIG9yaWdpblswXSwgcG9zMVsxXSAtIG9yaWdpblsxXV0gYXMgW251bWJlciwgbnVtYmVyXTtcbiAgY29uc3QgZHkgPSBbcG9zaVswXSAtIG9yaWdpblswXSwgcG9zaVsxXSAtIG9yaWdpblsxXV0gYXMgW251bWJlciwgbnVtYmVyXTtcblxuICBpZiAoIW5vWCkge1xuICAgIGNvbnN0IFssICwgcngsIHJ5XSA9IGluZkFycm93KGN0eCwgd2lkdGgsIGhlaWdodCwgb3JpZ2luLCBkeCwge1xuICAgICAgYXJyb3dTaXplOiBhcyxcbiAgICB9KTtcbiAgICBpZiAobGFiZWxYKVxuICAgICAgY3R4LnRleHROb2RlKFxuICAgICAgICBsYWJlbFgsXG4gICAgICAgIHJ4IC0gMC4yICogZnMsXG4gICAgICAgIHJ5ICsgMC4yICogZnMgKyBhcyAvIDIsXG4gICAgICAgIHJlbmRlci5UZXh0QWxpZ24uVFJcbiAgICAgICk7XG4gIH1cbiAgaWYgKCFub1kpIHtcbiAgICBjb25zdCBbLCAsIGl4LCBpeV0gPSBpbmZBcnJvdyhjdHgsIHdpZHRoLCBoZWlnaHQsIG9yaWdpbiwgZHksIHtcbiAgICAgIGFycm93U2l6ZTogYXMsXG4gICAgfSk7XG4gICAgaWYgKCFub1kgJiYgbGFiZWxZKVxuICAgICAgY3R4LnRleHROb2RlKFxuICAgICAgICBsYWJlbFksXG4gICAgICAgIGl4IC0gMC4yICogZnMgLSBhcyAvIDIsXG4gICAgICAgIGl5ICsgMC4yICogZnMsXG4gICAgICAgIHJlbmRlci5UZXh0QWxpZ24uVFJcbiAgICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFubm90YXRlQ2FydGhlc2lhbjJEQXhpcyhcbiAgY3R4OiByZW5kZXIuUmVuZGVyZXIyRCxcbiAgYXhpczogXCJ4XCIsXG4gIHsgb3JpZ2luOiBwMCwgc2NhbGU6IHBzIH06IHsgb3JpZ2luOiBbbnVtYmVyLCBudW1iZXJdOyBzY2FsZTogbnVtYmVyIH0sXG4gIGFubm90YXRpb25zOiB7IHNwcml0ZTogc3ByaXRlcy5CQlNwcml0ZTsgYXQ6IG51bWJlciB9W10sXG4gIHsgZ2FwID0gNSB9ID0ge31cbikge1xuICB2YXIgd2lkdGg6IG51bWJlciA9IChjdHggYXMgYW55KS53aWR0aCB8fCAwO1xuICB2YXIgaGVpZ2h0OiBudW1iZXIgPSAoY3R4IGFzIGFueSkuaGVpZ2h0IHx8IDA7XG5cbiAgaWYgKGF4aXMgPT0gXCJ4XCIpIHtcbiAgICBsZXQgeDAgPSBwMFswXTtcbiAgICBsZXQgeTAgPSBwMFsxXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5ub3RhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCB7IGF0LCBzcHJpdGUgfSA9IGFubm90YXRpb25zW2ldO1xuICAgICAgbGV0IHggPSBhdCAqIHBzICsgeDA7XG5cbiAgICAgIGlmICh4ICsgc3ByaXRlLnJpZ2h0ID49IDAgJiYgeCAtIHNwcml0ZS5sZWZ0IDw9IHdpZHRoKSB7XG4gICAgICAgIGxldCB0ID0geTAsXG4gICAgICAgICAgbCA9IHggLSAwLjUsXG4gICAgICAgICAgciA9IHggKyAwLjUsXG4gICAgICAgICAgYiA9IHkwICsgMztcbiAgICAgICAgY3R4XG4gICAgICAgICAgLmJlZ2luUGF0aCgpXG4gICAgICAgICAgLm1vdmVUbyhsLCB0KVxuICAgICAgICAgIC5saW5lVG8ociwgdClcbiAgICAgICAgICAubGluZVRvKHIsIGIpXG4gICAgICAgICAgLmxpbmVUbyhsLCBiKVxuICAgICAgICAgIC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgc3ByaXRlLmRyYXcoY3R4LCB4LCB5MCArIHNwcml0ZS50b3AgKyBnYXApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB0eXBlICogYXMgcmVuZGVyIGZyb20gXCIuLi9yZW5kZXJlclwiO1xuXG5leHBvcnQgdHlwZSBTcHJpdGUgPSB7XG4gIGRyYXcoY3R4OiByZW5kZXIuUmVuZGVyZXIyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB1bmtub3duO1xufTtcblxuZXhwb3J0IHR5cGUgQkJTcHJpdGUgPSBTcHJpdGUgJiB7XG4gIHRvcDogbnVtYmVyO1xuICBib3Q6IG51bWJlcjtcbiAgbGVmdDogbnVtYmVyO1xuICByaWdodDogbnVtYmVyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cm9rZUJvdW5kcyhcbiAgY3R4OiByZW5kZXIuUmVuZGVyZXIyRCxcbiAgc3ByaXRlOiBCQlNwcml0ZSxcbiAgeDogbnVtYmVyLFxuICB5OiBudW1iZXJcbikge1xuICBsZXQgbCA9IHggLSBzcHJpdGUubGVmdCxcbiAgICB0ID0geSAtIHNwcml0ZS50b3AsXG4gICAgciA9IHggKyBzcHJpdGUucmlnaHQsXG4gICAgYiA9IHkgKyBzcHJpdGUuYm90O1xuICBjdHguYmVnaW5QYXRoKCkubGluZVRvKGwsIHQpLmxpbmVUbyhyLCB0KS5saW5lVG8ociwgYikubGluZVRvKGwsIGIpO1xuICBjdHguY2xvc2VQYXRoKCk7XG4gIGN0eC5zdHJva2UoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzcHJpdGUgb2JqZWN0IGZvciB0ZXh0LlxuICogQHBhcmFtIGN0eCBSZW5kZXJpbmcgY29udGV4dCB1c2VkIGZvciBtZWFzdXJpbmcgZm9udC5cbiAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0XG4gKiBAcGFyYW0gb3B0aW9uc1xuICogQHJldHVybnMgU3ByaXRlIG9mIHRoZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUZXh0U3ByaXRlKFxuICBtZWFzdXJlOiByZW5kZXIuTWVhc3VyZVRleHQsXG4gIHRleHQ6IHN0cmluZyxcbiAgb3B0aW9ucz86IHsgY2VudGVyPzogYm9vbGVhbiB9XG4pOiBCQlNwcml0ZSB7XG4gIGNvbnN0IHsgY2VudGVyID0gZmFsc2UgfSA9IG9wdGlvbnMgfHwge307XG4gIGxldCB7IHRvcCwgYm90LCBsZWZ0LCByaWdodCB9ID0gbWVhc3VyZS5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgbGV0IGR4ID0gMDtcbiAgaWYgKGNlbnRlcikge1xuICAgIGR4ID0gKHJpZ2h0IC0gbGVmdCkgLyAyO1xuICAgIGxlZnQgKz0gZHg7XG4gICAgcmlnaHQgLT0gZHg7XG4gIH1cblxuICBjb25zdCBzcHJpdGUgPSB7XG4gICAgdGV4dDogdGV4dCxcbiAgICBkeCxcbiAgICB0b3AsXG4gICAgYm90LFxuICAgIGxlZnQsXG4gICAgcmlnaHQsXG4gICAgZHJhdzogZnVuY3Rpb24gKGN0eDogcmVuZGVyLlJlbmRlcmVyMkQsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICBjdHgudGV4dE5vZGUodGhpcy50ZXh0LCB4IC0gdGhpcy5keCwgeSwgMCBhcyByZW5kZXIuVGV4dEFsaWduKTtcbiAgICB9LFxuICB9O1xuICByZXR1cm4gc3ByaXRlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHNwcml0ZSB0aGF0IGRyYXdzIGEgZnJhY3Rpb24uIEZvbnRzaXplIGFuZCBsaW5lV2lkdGggZnJvbSB0aGUgY29udGV4dCBhcmUgdXNlZC5cbiAqIEBwYXJhbSB0b3AgVG9wIHNwcml0ZVxuICogQHBhcmFtIGJvdCBCb3R0b20gc3ByaXRlXG4gKiBAcmV0dXJucyBUaGUgc3ByaXRlIHRoYXQgZHJhd3MgZnJhY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZyYWNTcHJpdGUodG9wOiBCQlNwcml0ZSwgYm90OiBCQlNwcml0ZSk6IEJCU3ByaXRlIHtcbiAgLy8gMC4yIGF2ZXJhZ2UgaGVpZ2h0IGFzIGdhcFxuICBjb25zdCBmcmFjdGlvbkdhcCA9IDAuMDUgKiAodG9wLnRvcCArIHRvcC5ib3QgKyBib3QudG9wICsgYm90LmJvdCk7XG5cbiAgLy8gU2hpZnQgdG8gY2VudGVyIHRvcCAvIGJvdCB0ZXh0IGFsb25nIHhcbiAgY29uc3QgdG9wT2Zmc2V0WCA9IDAuNSAqICh0b3AubGVmdCAtIHRvcC5yaWdodCk7XG4gIGNvbnN0IGJvdE9mZnNldFggPSAwLjUgKiAoYm90LmxlZnQgLSBib3QucmlnaHQpO1xuICAvLyBTaGlmdFxuICBjb25zdCB0b3BPZmZzZXRZID0gLXRvcC5ib3QgLSBmcmFjdGlvbkdhcDtcbiAgY29uc3QgYm90T2Zmc2V0WSA9IGJvdC50b3AgKyBmcmFjdGlvbkdhcDtcblxuICAvLyBBbW91bnQgb2YgbGluZSByZXF1aXJlZCBvbiBlYWNoIHNpZGVcbiAgY29uc3QgaGFsZkxpbmVMZW5ndGggPSBNYXRoLm1heChcbiAgICAwLjUgKiAodG9wLmxlZnQgKyB0b3AucmlnaHQpLFxuICAgIDAuNSAqIChib3QubGVmdCArIGJvdC5yaWdodClcbiAgKTtcblxuICBjb25zdCBzcHJpdGUgPSB7XG4gICAgZGF0YTogW1xuICAgICAgdG9wT2Zmc2V0WCxcbiAgICAgIHRvcE9mZnNldFksXG4gICAgICBib3RPZmZzZXRYLFxuICAgICAgYm90T2Zmc2V0WSxcbiAgICAgIGhhbGZMaW5lTGVuZ3RoLFxuICAgIF0gYXMgY29uc3QsXG4gICAgdG9wOiAtdG9wT2Zmc2V0WSArIHRvcC50b3AsXG4gICAgYm90OiBib3RPZmZzZXRZICsgYm90LmJvdCxcbiAgICBsZWZ0OiBoYWxmTGluZUxlbmd0aCxcbiAgICByaWdodDogaGFsZkxpbmVMZW5ndGgsXG5cbiAgICBkcmF3OiBmdW5jdGlvbiAoY3R4OiByZW5kZXIuUmVuZGVyZXIyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgIGxldCBbdG9wT2Zmc2V0WCwgdG9wT2Zmc2V0WSwgYm90T2Zmc2V0WCwgYm90T2Zmc2V0WSwgaGFsZkxpbmVMZW5ndGhdID1cbiAgICAgICAgdGhpcy5kYXRhO1xuXG4gICAgICB0b3AuZHJhdyhjdHgsIHggKyB0b3BPZmZzZXRYLCB5ICsgdG9wT2Zmc2V0WSk7XG4gICAgICBib3QuZHJhdyhjdHgsIHggKyBib3RPZmZzZXRYLCB5ICsgYm90T2Zmc2V0WSk7XG5cbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIGN0eC5tb3ZlVG8oeCAtIGhhbGZMaW5lTGVuZ3RoLCB5KTtcbiAgICAgIGN0eC5saW5lVG8oeCArIGhhbGZMaW5lTGVuZ3RoLCB5KTtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9LFxuICB9O1xuICByZXR1cm4gc3ByaXRlO1xufVxuIiwgIi8qKlxuICogQSBjbGFzcyB0aGF0IGFsbG93cyBlYXN5IGludGVyYWN0aW9uIHdpdGggYW4gY2FudmFzIG9yIG90aGVyIEhUTUwgZWxlbWVudC5cbiAqIFdoZW4gcmVnaXN0ZXJlZCBvbiBhbiBlbGVtZW50LCB0aGUgbGlzdGVuZXJzIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgYXJlXG4gKiBjYWxsZWQgd2hlbiB0aGUgcmVzcGVjdGl2ZSBldmVudCB0YWtlcyBwbGFjZS5cbiAqL1xuZXhwb3J0IGNsYXNzIERyYWdab29tSG92ZXIge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHdpdGggbGlzdGVuZXJzLlxuICAgKiBBbGwgdmFsdWVzIGFyZSBtZXN1cmVkIGluIENTUyBwaXhlbHMgbWVhc3VyZWRcbiAgICogYXMgb2Zmc2V0IGZyb20gdGhlIHRhcmdldCBlbGVtZW50LlxuICAgKiBAcGFyYW0gb25EcmFnIGRyYWcgbGlzdGVuZXJcbiAgICogQHBhcmFtIG9uWm9vbSB6b29tIGxpc3RlbmVyXG4gICAqIEBwYXJhbSBvbkhvdmVyIGhvdmVyIGxpc3RlbmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgb25EcmFnOiAoZGVsdGE6IFtudW1iZXIsIG51bWJlcl0pID0+IGFueSxcbiAgICBwdWJsaWMgb25ab29tOiAoZmFjdG9yOiBudW1iZXIsIGNlbnRlcjogW251bWJlciwgbnVtYmVyXSkgPT4gYW55LFxuICAgIHB1YmxpYyBvbkhvdmVyOiAocG9zOiBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbCkgPT4gYW55XG4gICkge31cblxuICBwcml2YXRlIHN0YXRlOiBBcnJheTx7XG4gICAgaWQ6IG51bWJlcjtcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICB9PiA9IG5ldyBBcnJheSgpO1xuXG4gIHByaXZhdGUgZG93biA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICBpZiAoZS5wb2ludGVyVHlwZSA9PSBcIm1vdXNlXCIgJiYgZS5idXR0b24gIT0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3QgeyBwb2ludGVySWQsIG9mZnNldFg6IHgsIG9mZnNldFk6IHkgfSA9IGU7XG4gICAgbGV0IHN0YXRlID0gdGhpcy5zdGF0ZS5maW5kKCh7IGlkIH0pID0+IGlkID09PSBwb2ludGVySWQpO1xuICAgIGlmIChzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdGF0ZSA9IHsgaWQ6IHBvaW50ZXJJZCwgeCwgeSB9O1xuICAgICAgdGhpcy5zdGF0ZS5wdXNoKHN0YXRlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUubGVuZ3RoIDw9IDEpIHRoaXMub25Ib3ZlcihbeCwgeV0pO1xuICAgIGVsc2UgdGhpcy5vbkhvdmVyKG51bGwpO1xuICAgIChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLnNldFBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XG4gIH07XG4gIHByaXZhdGUgbW92ZSA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IHBvaW50ZXJJZCwgb2Zmc2V0WDogeCwgb2Zmc2V0WTogeSB9ID0gZTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5vbkhvdmVyKFt4LCB5XSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW5kID0gdGhpcy5zdGF0ZS5maW5kSW5kZXgoKHsgaWQgfSkgPT4gaWQgPT09IHBvaW50ZXJJZCk7XG4gICAgaWYgKGluZCA9PT0gLTEpIHJldHVybjtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVbaW5kXTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5vbkhvdmVyKFt4LCB5XSk7XG4gICAgICB0aGlzLm9uRHJhZyhbeCAtIHN0YXRlLngsIHkgLSBzdGF0ZS55XSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmxlbmd0aCA9PT0gMikge1xuICAgICAgLy8gRHJhZyBhbmQgem9vbSBzbyB0aGF0IGJvdGggcG9pbnRlcnNcbiAgICAgIC8vIGhhdmUgdGhlIHNhbWUgY2VudGVyIGFuZCBkaXN0YW5jZVxuXG4gICAgICBjb25zdCBzMSA9IHN0YXRlO1xuICAgICAgY29uc3QgczIgPSB0aGlzLnN0YXRlWzEgLSBpbmRdO1xuXG4gICAgICBjb25zdCBkT2xkID0gKHMxLnggLSBzMi54KSAqKiAyICsgKHMxLnkgLSBzMi55KSAqKiAyLFxuICAgICAgICBkTmV3ID0gKHggLSBzMi54KSAqKiAyICsgKHkgLSBzMi55KSAqKiAyO1xuICAgICAgY29uc3QgZHJhZyA9IFswLjUgKiAoeCAtIHMxLngpLCAwLjUgKiAoeSAtIHMxLnkpXSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuXG4gICAgICB0aGlzLm9uSG92ZXIobnVsbCk7XG4gICAgICB0aGlzLm9uRHJhZyhkcmFnKTtcbiAgICAgIHRoaXMub25ab29tKGROZXcgLyBkT2xkLCBbMC41ICogKHggKyBzMi54KSwgMC41ICogKHkgKyBzMi55KV0pO1xuICAgIH1cblxuICAgIHN0YXRlLnggPSB4O1xuICAgIHN0YXRlLnkgPSB5O1xuICB9O1xuICBwcml2YXRlIHVwID0gKGU6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgIGlmIChlLnBvaW50ZXJUeXBlID09IFwibW91c2VcIiAmJiBlLmJ1dHRvbiAhPSAwKSByZXR1cm47XG4gICAgY29uc3QgeyBwb2ludGVySWQsIG9mZnNldFg6IHgsIG9mZnNldFk6IHkgfSA9IGU7XG4gICAgbGV0IGluZCA9IHRoaXMuc3RhdGUuZmluZEluZGV4KCh7IGlkIH0pID0+IGlkID09PSBwb2ludGVySWQpO1xuICAgIHRoaXMuc3RhdGUuc3BsaWNlKGluZCwgMSk7XG5cbiAgICAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5yZWxlYXNlUG9pbnRlckNhcHR1cmUocG9pbnRlcklkKTtcbiAgfTtcbiAgcHJpdmF0ZSBjYW5jZWwgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT0gXCJtb3VzZVwiICYmIGUuYnV0dG9uICE9IDApIHJldHVybjtcblxuICAgIGNvbnN0IHsgcG9pbnRlcklkLCBvZmZzZXRYOiB4LCBvZmZzZXRZOiB5IH0gPSBlO1xuICAgIGxldCBpbmQgPSB0aGlzLnN0YXRlLmZpbmRJbmRleCgoeyBpZCB9KSA9PiBpZCA9PT0gcG9pbnRlcklkKTtcbiAgICB0aGlzLnN0YXRlLnNwbGljZShpbmQsIDEpO1xuXG4gICAgKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XG4gIH07XG4gIHByaXZhdGUgbGVhdmUgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT0gXCJtb3VzZVwiICYmIHRoaXMuc3RhdGUubGVuZ3RoID09PSAwKSB0aGlzLm9uSG92ZXIobnVsbCk7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT0gXCJtb3VzZVwiICYmIGUuYnV0dG9uICE9IDApIHJldHVybjtcbiAgICAvLyBSZWxlYXNlIHBvaW50ZXIgaWYgbm8gY2FwdHVyZSBpcyBwcmVzZW50XG5cbiAgICBpZiAoKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHBvaW50ZXJJZCwgb2Zmc2V0WDogeCwgb2Zmc2V0WTogeSB9ID0gZTtcbiAgICBsZXQgaW5kID0gdGhpcy5zdGF0ZS5maW5kSW5kZXgoKHsgaWQgfSkgPT4gaWQgPT09IHBvaW50ZXJJZCk7XG4gICAgdGhpcy5zdGF0ZS5zcGxpY2UoaW5kLCAxKTtcblxuICAgIChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpO1xuICB9O1xuICBwcml2YXRlIHdoZWVsID0gKGU6IFdoZWVsRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5vblpvb20oTWF0aC5leHAoLWUuZGVsdGFZICogKGUuZGVsdGFNb2RlID09IDEgPyAwLjAzMzMzIDogMC4wMDEpKSwgW1xuICAgICAgZS5vZmZzZXRYLFxuICAgICAgZS5vZmZzZXRZLFxuICAgIF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGxpc3RlbmVycyB0byBhbiBIVE1MRWxlbWVudC5cbiAgICovXG4gIHJlZ2lzdGVyTGlzdGVuZXJzKGU6IEhUTUxFbGVtZW50KSB7XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMudXApO1xuICAgIGUuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuZG93bik7XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5tb3ZlKTtcbiAgICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHRoaXMuY2FuY2VsKTtcbiAgICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybGVhdmVcIiwgdGhpcy5sZWF2ZSk7XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy53aGVlbCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgZnJvbSBhbiBIVE1MRWxlbWVudC5cbiAgICovXG4gIHJlbW92ZUxpc3RlcmVzKGU6IEhUTUxFbGVtZW50KSB7XG4gICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMudXApO1xuICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuZG93bik7XG4gICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5tb3ZlKTtcbiAgICBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHRoaXMuY2FuY2VsKTtcbiAgICBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCB0aGlzLndoZWVsKTtcbiAgfVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBFbGVtZW50PEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KFxuICBuYW1lOiBLLFxuICBjaGlsZHJlbjogKHN0cmluZyB8IE5vZGUpW10gfCB7IF9faHRtbDogc3RyaW5nIH0gPSBbXSxcbiAgYXR0cnM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXI7XG4gIH0gPSB7fSxcbiAgZXZlbnRzOiB7XG4gICAgW2tleSBpbiBrZXlvZiBHbG9iYWxFdmVudEhhbmRsZXJzXT86IEdsb2JhbEV2ZW50SGFuZGxlcnNba2V5XTtcbiAgfSA9IHt9XG4pOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10ge1xuICBsZXQgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xuXG4gIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhdHRycykpXG4gICAgZWwuc2V0QXR0cmlidXRlKGssIHR5cGVvZiB2ID09PSBcInN0cmluZ1wiID8gdiA6IHYgKyBcIlwiKTtcbiAgZm9yIChsZXQgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGV2ZW50cykpIChlbCBhcyBhbnkpW2tdID0gdjtcblxuICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpXG4gICAgZm9yICh2YXIgYyBvZiBjaGlsZHJlbikge1xuICAgICAgaWYgKHR5cGVvZiBjID09PSBcInN0cmluZ1wiKSBjID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYyk7XG4gICAgICBlbC5hcHBlbmQoYyk7XG4gICAgfVxuICBlbHNlIGVsLmlubmVySFRNTCA9IGNoaWxkcmVuLl9faHRtbDtcbiAgcmV0dXJuIGVsO1xufVxuXG5mdW5jdGlvbiBkZWVwQ2hpbGRyZW4oZWw6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCwgY2hpbGRyZW46IGFueVtdKSB7XG4gIGZvciAodmFyIGMgb2YgY2hpbGRyZW4pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjKSkgZGVlcENoaWxkcmVuKGVsLCBjKTtcbiAgICBlbHNlIGVsLmFwcGVuZChjIGluc3RhbmNlb2YgTm9kZSA/IGMgOiBcIlwiICsgYyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGpzeChcbiAgbmFtZTogc3RyaW5nLFxuICBhdHRyczoganN4LkpTWC5JbnRyaW5zaWNFbGVtZW50c1tcIlwiXSxcbiAgLi4uY2hpbGRyZW46IGFueVtdXG4pOiBIVE1MRWxlbWVudDtcbmV4cG9ydCBmdW5jdGlvbiBqc3goXG4gIG5hbWU6IHN0cmluZyxcbiAgYXR0cnM6IGpzeC5KU1guSW50cmluc2ljRWxlbWVudHNbXCJcIl0sXG4gIC4uLmNoaWxkcmVuOiBhbnlbXVxuKTogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgaWYgKG5hbWUgPT09IGpzeC5GcmFnbWVudCkge1xuICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBkZWVwQ2hpbGRyZW4oZWwsIGNoaWxkcmVuKTtcbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgbGV0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbiAgYXR0cnMgPSBhdHRycyB8fCB7fTtcblxuICBpZiAoXCJfX2h0bWxcIiBpbiBhdHRycykge1xuICAgIGVsLmlubmVySFRNTCA9IFwiXCIgKyBhdHRycy5fX2h0bWw7XG4gICAgZGVsZXRlIGF0dHJzLl9faHRtbDtcbiAgfVxuXG4gIGZvciAodmFyIFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhdHRycykpIHtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgKGVsIGFzIGFueSlba10gPSB2O1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoaywgXCJcIiArIHYpO1xuICAgIH1cbiAgfVxuXG4gIGRlZXBDaGlsZHJlbihlbCwgY2hpbGRyZW4pO1xuICByZXR1cm4gZWw7XG59XG5qc3guRnJhZ21lbnQgPSBcIlwiO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UganN4LkpTWCB7XG4gIHR5cGUgRWxlbWVudCA9IEhUTUxFbGVtZW50O1xuICB0eXBlIEludHJpbnNpY0VsZW1lbnRzID0ge1xuICAgIFtrZXk6IHN0cmluZ106IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8ICgoLi4uYXJnczogYW55KSA9PiBhbnkpIHwgdW5kZWZpbmVkO1xuICAgIH0gJiB7XG4gICAgICBba2V5IGluIGtleW9mIEdsb2JhbEV2ZW50SGFuZGxlcnNdPzpcbiAgICAgICAgfCBHbG9iYWxFdmVudEhhbmRsZXJzW2tleV1cbiAgICAgICAgfCBzdHJpbmdcbiAgICAgICAgfCBudW1iZXI7XG4gICAgfSAmIHsgX19odG1sPzogc3RyaW5nIH07XG4gIH07XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBMYXllcmVkQ29uZmlnLCBMYXllck9iamVjdCB9IGZyb20gXCIuL1wiO1xuaW1wb3J0ICogYXMgZG9tIGZyb20gXCJAbGliL0RvbUVsZW1lbnRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG9wdGlvbnM6IHtcbiAgdXBkYXRlOiAoY29uZmlnOiBMYXllcmVkQ29uZmlnLCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4gdW5rbm93bjtcbn0pOiBMYXllck9iamVjdDxIVE1MQ2FudmFzRWxlbWVudD4ge1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZShjb25maWc6IExheWVyZWRDb25maWcsIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgaWYgKFxuICAgICAgICBNYXRoLmZsb29yKGNvbmZpZy53aWR0aCAqIGRwcikgIT09IGNhbnZhcy53aWR0aCB8fFxuICAgICAgICBNYXRoLmZsb29yKGNvbmZpZy5oZWlnaHQgKiBkcHIpICE9PSBjYW52YXMuaGVpZ2h0XG4gICAgICApIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gTWF0aC5mbG9vcihjb25maWcud2lkdGggKiBkcHIpO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihjb25maWcuaGVpZ2h0ICogZHByKTtcbiAgICAgIH1cbiAgICAgIGN0eC5zZXRUcmFuc2Zvcm0oZHByLCAwLCAwLCBkcHIsIDAsIDApO1xuICAgICAgb3B0aW9ucy51cGRhdGUoY29uZmlnLCBjdHgpO1xuICAgIH0sXG4gICAgcmVzaXplZChjb25maWc6IExheWVyZWRDb25maWcpIHtcbiAgICAgIGNvbmZpZy51cGRhdGUodGhpcyk7XG4gICAgfSxcbiAgICBjb25uZWN0ZWQoY29uZmlnOiBMYXllcmVkQ29uZmlnKSB7XG4gICAgICBsZXQgY2FudmFzID0gZG9tLkVsZW1lbnQoXCJjYW52YXNcIiwgW10sIHsgY2xhc3M6IFwiY2FudmFzLWxheWVyXCIgfSk7XG4gICAgICByZXR1cm4geyBub2RlczogY2FudmFzIH07XG4gICAgfSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgKiBhcyBkb20gZnJvbSBcIkBsaWIvRG9tRWxlbWVudFwiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi9pbmRleC5jc3NcIjtcblxuZXhwb3J0IHR5cGUgTGF5ZXJIYW5kbGVyID0ge1xuICAvKipcbiAgICogU2V0dXAgZm9yIHRoZSBMYXllcmVkRWxlbWVudFxuICAgKi9cbiAgY29ubmVjdGVkPzogKGNvbmZpZzogTGF5ZXJlZENvbmZpZykgPT4gYW55O1xuICBkaXNjb25uZWN0ZWQ/OiAoY29uZmlnOiBMYXllcmVkQ29uZmlnKSA9PiBhbnk7XG4gIHJlc2l6ZWQ/OiAoY29uZmlnOiBMYXllcmVkQ29uZmlnKSA9PiBhbnk7XG59O1xuXG4vKipcbiAqIENvbmZpZyBPYmplY3QgZm9yIGEgTGF5ZXJlZEVsZW1lbnQuXG4gKi9cbmV4cG9ydCB0eXBlIExheWVyZWRDb25maWcgPSB7XG4gIC8qKiBUaGUgY3VycmVudCB3aWR0aCBpbiBDU1NQaXhlbHMgKi9cbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcbiAgLyoqIFRoZSBjdXJyZW50IGhlaWdodCBpbiBDU1NQaXhlbHMgKi9cbiAgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG4gIC8qKiBUaGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIGFsbCBsYXllcnMgKi9cbiAgcmVhZG9ubHkgY29udGFpbmVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIC8qKiBUaGUgd2ViY29tcG9uZW50IGhvc3QgZWxlbWVudCAqL1xuICByZWFkb25seSBob3N0RWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIC8qKiBSZWRyYXcgYSBzaW5nbGUgbGF5ZXIuIEltcHJvdmVkIHBlcmZvcm1hbmNlIHdoZW4gdXNpbmcgc3RyaW5nLiAqL1xuICB1cGRhdGUobGF5ZXI/OiBzdHJpbmcgfCBMYXllck9iamVjdDxhbnk+KTogdW5rbm93bjtcbiAgLyoqIEFkZCBDU1MgdG8gdGhlIHN0eWxlc2hlZXQgaW4gdGhlIHNoYWRkb3cgZG9tICovXG4gIGFkZFN0eWxlcyhjc3M6IHN0cmluZyk6IHVua25vd247XG4gIC8qKiBBZGQgYSBsYXllciB0byB0aGUgZWxlbWVudC4gKi9cbiAgYWRkTGF5ZXIobmFtZTogc3RyaW5nLCBsYXllcjogTm9kZSk6IHVua25vd247XG4gIGFkZExheWVyPE8+KG5hbWU6IHN0cmluZywgbGF5ZXI6IExheWVyPGFueSwgTz4pOiBMYXllckhhbmRsZTxPPjtcbiAgLyoqIEF0dGFjaCBhIG5vZGUgZGlyZWN0bHkgdG8gdGhlIHNoYWRkb3cgZG9tICovXG4gIGF0dGFjaFRvU2hhZGRvdyguLi5ub2RlOiBOb2RlW10pOiB1bmtub3duO1xufTtcblxuLyoqXG4gKiBPOiBUaGUgZmllbGRzIHRoYXQgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgTGF5ZXJIYW5kbGVcbiAqIE46IFR5cGUgb2Ygbm9kZXMgdG8gYXR0YWNoXG4gKi9cbmV4cG9ydCB0eXBlIExheWVyT2JqZWN0PFxuICBOIGV4dGVuZHMgTm9kZSB8IE5vZGVbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgTyA9IHVuZGVmaW5lZFxuPiA9IHtcbiAgY29ubmVjdGVkOiAoXG4gICAgY29uZmlnOiBMYXllcmVkQ29uZmlnXG4gICkgPT4gTiBleHRlbmRzIHVuZGVmaW5lZFxuICAgID8gTyBleHRlbmRzIHVuZGVmaW5lZFxuICAgICAgPyB7fVxuICAgICAgOiB7IGhhbmRsZTogTyB9XG4gICAgOiBPIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgPyB7IG5vZGVzOiBOIH1cbiAgICA6IHsgbm9kZXM6IE47IGhhbmRsZTogTyB9O1xuICBkaXNjb25uZWN0ZWQ/OiAoY29uZmlnOiBMYXllcmVkQ29uZmlnKSA9PiB1bmtub3duO1xuXG4gIHVwZGF0ZT86IChjb25maWc6IExheWVyZWRDb25maWcsIG5vZGVzOiBOKSA9PiB1bmtub3duO1xuICByZXNpemVkPzogKGNvbmZpZzogTGF5ZXJlZENvbmZpZywgbm9kZXM6IE4pID0+IHVua25vd247XG59O1xuZXhwb3J0IHR5cGUgTGF5ZXI8TiBleHRlbmRzIE5vZGUgfCBOb2RlW10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsIE8gPSB7fT4gPVxuICB8ICgoXG4gICAgICBjb25maWc6IExheWVyZWRDb25maWdcbiAgICApID0+IE4gZXh0ZW5kcyB1bmRlZmluZWRcbiAgICAgID8gTyBleHRlbmRzIHVuZGVmaW5lZFxuICAgICAgICA/IHt9XG4gICAgICAgIDogeyBoYW5kbGU6IE8gfVxuICAgICAgOiBPIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICA/IHsgbm9kZXM6IE4gfVxuICAgICAgOiB7IG5vZGVzOiBOOyBoYW5kbGU6IE8gfSlcbiAgfCBMYXllck9iamVjdDxOLCBPPjtcblxuLyoqIFRoZSBoYW5kbGUgcmV0dXJuZWQgYnkgYWRkTGF5ZXIgKi9cbmV4cG9ydCB0eXBlIExheWVySGFuZGxlPE8+ID0ge1xuICBbTmFtZSBpbiBFeGNsdWRlPGtleW9mIE8sIFwibm9kZXNcIiB8IFwidXBkYXRlXCI+XTogT1tOYW1lXTtcbn0gJiB7IHVwZGF0ZSgpOiB1bmtub3duIH07XG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ2FudmFzIH0gZnJvbSBcIi4vQ2FudmFzXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zXCI7XG5cbmFic3RyYWN0IGNsYXNzIExheWVyZWRFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAvKiogQ29udGFpbmVyIGZvciB0aGUgY2FudmFzZXMgKi9cbiAgcHJpdmF0ZSBzaGFkb3c6IFNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7XG4gICAgbW9kZTogXCJvcGVuXCIsXG4gIH0pO1xuICBwcml2YXRlIGNsZWFudXA6ICgoKSA9PiBhbnkpW10gPSBbXTtcbiAgYWJzdHJhY3QgbGF5ZXJIYW5kbGVyOiBMYXllckhhbmRsZXI7XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3Qgc2hhZG93ID0gdGhpcy5zaGFkb3c7XG4gICAgc2hhZG93LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBjb25zdCBzdHlsZSA9IGRvbS5FbGVtZW50KFwic3R5bGVcIiwgW3N0eWxlcy5jc3NdKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb20uRWxlbWVudChcImRpdlwiLCBbXSwge1xuICAgICAgY2xhc3M6IHN0eWxlcy5jbGFzcy5jb250YWluZXIsXG4gICAgfSk7XG4gICAgY29uc3QgcmVzaXplT2JzID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcbiAgICAgIHRoaXMubGF5ZXJIYW5kbGVyLnJlc2l6ZWQ/Lihjb25maWcpO1xuICAgICAgZm9yICh2YXIgbGF5ZXIgb2YgbGF5ZXJzLnZhbHVlcygpKVxuICAgICAgICBsYXllci5sYXllcj8ucmVzaXplZD8uKGNvbmZpZywgbGF5ZXIubm9kZXMpO1xuICAgIH0pO1xuICAgIHJlc2l6ZU9icy5vYnNlcnZlKGNvbnRhaW5lcik7XG4gICAgc2hhZG93LmFwcGVuZChzdHlsZSwgY29udGFpbmVyKTtcblxuICAgIGNvbnN0IGxheWVyczogTWFwPFxuICAgICAgc3RyaW5nLFxuICAgICAgeyBub2Rlcz86IE5vZGUgfCBOb2RlW107IGxheWVyPzogTGF5ZXJPYmplY3Q8YW55LCBhbnk+OyB1cGRhdGU6IGJvb2xlYW4gfVxuICAgID4gPSBuZXcgTWFwKCk7XG5cbiAgICAvKiogV2hlbiBjaGFuZ2luZyBmcm9tIDAgYW4gYW5pbWF0aW9uIGZyYW1lXG4gICAgICogZm9yIHVwZGF0ZUxheWVycyBuZWVkcyB0byBiZSBzY2hlZHVsZWRcbiAgICAgKiAwIG5vIHVwZGF0ZXMsIDEgdXBkYXRlIHNvbWUgbGF5ZXJzLCAyIHVwZGF0ZSBhbGxcbiAgICAgKi9cbiAgICBsZXQgdXBkYXRlU3RhdGU6IDAgfCAxIHwgMiA9IDA7XG4gICAgY29uc3QgdXBkYXRlTGF5ZXJzID0gKCkgPT4ge1xuICAgICAgbGV0IGFsbCA9IHVwZGF0ZVN0YXRlID09PSAyO1xuICAgICAgdXBkYXRlU3RhdGUgPSAwO1xuICAgICAgZm9yICh2YXIgbGF5ZXIgb2YgbGF5ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgIGlmIChhbGwgfHwgbGF5ZXIudXBkYXRlKVxuICAgICAgICAgIGxheWVyLmxheWVyPy51cGRhdGU/Lihjb25maWcsIGxheWVyLm5vZGVzIGFzIGFueSk7XG4gICAgICAgIGxheWVyLnVwZGF0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBjb25maWc6IExheWVyZWRDb25maWcgPSB7XG4gICAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICB9LFxuICAgICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICB9LFxuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyLFxuICAgICAgaG9zdEVsZW1lbnQ6IHRoaXMsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIChsYXllcj86IHN0cmluZyB8IExheWVyT2JqZWN0PGFueT4pOiB1bmtub3duIHtcbiAgICAgICAgaWYgKHVwZGF0ZVN0YXRlID09PSAyKSByZXR1cm47XG4gICAgICAgIGlmICh1cGRhdGVTdGF0ZSA9PT0gMCkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUxheWVycyk7XG4gICAgICAgIGlmIChsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdXBkYXRlU3RhdGUgPSAyO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGxheWVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdXBkYXRlU3RhdGUgPSAxO1xuICAgICAgICAgIGxldCBsID0gbGF5ZXJzLmdldChsYXllcik7XG4gICAgICAgICAgaWYgKGwpIGwudXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbCBvZiBsYXllcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICBpZiAobGF5ZXIgPT09IGwubGF5ZXIpIGwudXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkZFN0eWxlczogZnVuY3Rpb24gKGNzczogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHN0eWxlLmFwcGVuZChjc3MpO1xuICAgICAgfSxcbiAgICAgIGFkZExheWVyOiBmdW5jdGlvbiA8Tz4obmFtZTogc3RyaW5nLCBsYXllcjogTm9kZSB8IExheWVyPGFueSwgTz4pOiBhbnkge1xuICAgICAgICAvLyBNYW51YWxseSBjaGVjayB0aGF0IHJldHVybiB0eXBlIGlzIGNvcnJlY3RcbiAgICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYXllcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxheWVyT2JqZWN0OiB1bmRlZmluZWQgfCBMYXllck9iamVjdDxhbnksIGFueT4sXG4gICAgICAgICAgaW5zdGFuY2U6IHsgbm9kZXM/OiBOb2RlIHwgTm9kZVtdOyBoYW5kbGU/OiBPIH07XG4gICAgICAgIGlmICh0eXBlb2YgbGF5ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGluc3RhbmNlID0gbGF5ZXIoY29uZmlnKTtcbiAgICAgICAgICBsYXllck9iamVjdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnN0YW5jZSA9IGxheWVyLmNvbm5lY3RlZChjb25maWcpO1xuICAgICAgICAgIGxheWVyT2JqZWN0ID0gbGF5ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbm9kZXMgPSBpbnN0YW5jZS5ub2RlcztcbiAgICAgICAgaWYgKG5vZGVzKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZXMpKSBjb250YWluZXIuYXBwZW5kKC4uLm5vZGVzKTtcbiAgICAgICAgICBlbHNlIGNvbnRhaW5lci5hcHBlbmQobm9kZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGF5ZXJzLnNldChuYW1lLCB7IG5vZGVzLCBsYXllcjogbGF5ZXJPYmplY3QsIHVwZGF0ZTogZmFsc2UgfSk7XG4gICAgICAgIGNvbmZpZy51cGRhdGUobmFtZSk7XG5cbiAgICAgICAgbGV0IGhhbmRsZTogTGF5ZXJIYW5kbGU8Tz4gPSBpbnN0YW5jZS5oYW5kbGUgYXMgYW55O1xuICAgICAgICBpZiAoIWhhbmRsZSkgaGFuZGxlID0ge30gYXMgYW55O1xuICAgICAgICBoYW5kbGUudXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMudXBkYXRlKG5hbWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgICB9LFxuICAgICAgYXR0YWNoVG9TaGFkZG93KC4uLm5vZGVzOiBOb2RlW10pIHtcbiAgICAgICAgc2hhZG93LmFwcGVuZCguLi5ub2Rlcyk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmxheWVySGFuZGxlci5jb25uZWN0ZWQ/Lihjb25maWcpO1xuXG4gICAgdGhpcy5jbGVhbnVwLnB1c2goKCkgPT4ge1xuICAgICAgcmVzaXplT2JzLnVub2JzZXJ2ZShjb250YWluZXIpO1xuICAgICAgZm9yICh2YXIgbGF5ZXIgb2YgbGF5ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgIGxheWVyLmxheWVyPy5kaXNjb25uZWN0ZWQ/Lihjb25maWcpO1xuICAgICAgfVxuICAgICAgdGhpcy5sYXllckhhbmRsZXIuZGlzY29ubmVjdGVkPy4oY29uZmlnKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGZvciAodmFyIGNsZWFuIG9mIHRoaXMuY2xlYW51cCkgY2xlYW4oKTtcbiAgICB0aGlzLmNsZWFudXAgPSBbXTtcbiAgICB0aGlzLnNoYWRvdy5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBMYXllcmVkQ29tcG9uZW50KGhhbmRsZXI6IExheWVySGFuZGxlcikge1xuICByZXR1cm4gY2xhc3MgZXh0ZW5kcyBMYXllcmVkRWxlbWVudCB7XG4gICAgbGF5ZXJIYW5kbGVyID0gaGFuZGxlcjtcbiAgfTtcbn1cbiIsICJpbXBvcnQge1xuICBDb21wbGV4U2NUcixcbiAgZHJhd0NhcnRoZXNpYW4yREF4aXMsXG4gIGFubm90YXRlQ2FydGhlc2lhbjJEQXhpcyxcbn0gZnJvbSBcIi4uL2NhbnZhcy9heGlzXCI7XG5pbXBvcnQgKiBhcyByZW5kZXIgZnJvbSBcIi4uL3JlbmRlcmVyXCI7XG5pbXBvcnQgeyBCQlNwcml0ZSwgRnJhY1Nwcml0ZSwgVGV4dFNwcml0ZSB9IGZyb20gXCIuLi9jYW52YXMvc3ByaXRlc1wiO1xuaW1wb3J0IHsgRHJhZ1pvb21Ib3ZlciB9IGZyb20gXCIuLi9tb2R1bGVzL0ludGVyYWN0XCI7XG5pbXBvcnQgeyBDb21wbGV4IH0gZnJvbSBcIi4uL21vZHVsZXMvbWF0aFwiO1xuaW1wb3J0ICogYXMgbGF5ZXJzIGZyb20gXCIuL2xheWVyc1wiO1xuXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFxuICBcImZhcmV5LWZyYWN0aW9uc1wiLFxuICBsYXllcnMuTGF5ZXJlZENvbXBvbmVudCh7XG4gICAgY29ubmVjdGVkKGNvbmZpZykge1xuICAgICAgY29uc3QgYXBwID0gdGhpcztcblxuICAgICAgY29uc3QgcHIgPSBuZXcgQ29tcGxleFNjVHIoWzEwMCwgMTAwXSwgMTAwKTtcblxuICAgICAgZnVuY3Rpb24gZml4VHJab29tKCkge1xuICAgICAgICBsZXQgcDAgPSBwci5wcm9qZWN0KG5ldyBDb21wbGV4KDApKTtcbiAgICAgICAgbGV0IHAxID0gcHIucHJvamVjdChuZXcgQ29tcGxleCgxKSk7XG4gICAgICAgIGxldCBkID0gTWF0aC5hYnMocDBbMF0gLSBwMVswXSk7XG5cbiAgICAgICAgbGV0IG1vZCA9IGZhbHNlO1xuXG4gICAgICAgIGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNvbmZpZztcblxuICAgICAgICBpZiAocDBbMV0gPCBoZWlnaHQgLyA2KSB7XG4gICAgICAgICAgcHIuYWRkVHJhbnNsYXRpb24oWzAsIC1wMFsxXSArIGhlaWdodCAvIDZdKTtcbiAgICAgICAgICBtb2QgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHAwWzFdID4gKDUgKiBoZWlnaHQpIC8gNikge1xuICAgICAgICAgIHByLmFkZFRyYW5zbGF0aW9uKFswLCAtcDBbMV0gKyAoNSAqIGhlaWdodCkgLyA2XSk7XG4gICAgICAgICAgbW9kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocDFbMF0gPCAwLjUgKiB3aWR0aCkge1xuICAgICAgICAgIHByLmFkZFRyYW5zbGF0aW9uKFstcDFbMF0gKyAwLjUgKiB3aWR0aCwgMF0pO1xuICAgICAgICAgIG1vZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHAwWzBdID4gd2lkdGggKiAwLjUpIHtcbiAgICAgICAgICBwci5hZGRUcmFuc2xhdGlvbihbLXAwWzBdICsgMC41ICogd2lkdGgsIDBdKTtcbiAgICAgICAgICBtb2QgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCAwLjI1ICogd2lkdGgpIHtcbiAgICAgICAgICBwci5hZGRab29tKCgwLjI1ICogd2lkdGgpIC8gZCwgW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0pO1xuICAgICAgICAgIG1vZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW9kKSBjb25maWcudXBkYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGR6aCA9IG5ldyBEcmFnWm9vbUhvdmVyKFxuICAgICAgICAoZHJhZ0RpcikgPT4ge1xuICAgICAgICAgIHByLmFkZFRyYW5zbGF0aW9uKGRyYWdEaXIpO1xuICAgICAgICAgIGNvbmZpZy51cGRhdGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgKHpvb21GYWN0b3IsIGNlbnRlcikgPT4ge1xuICAgICAgICAgIGxldCBwMCA9IHByLnByb2plY3QobmV3IENvbXBsZXgoMCkpO1xuICAgICAgICAgIGxldCBwMSA9IHByLnByb2plY3QobmV3IENvbXBsZXgoMSkpO1xuICAgICAgICAgIGxldCBkID0gTWF0aC5hYnMocDBbMF0gLSBwMVswXSk7XG4gICAgICAgICAgaWYgKHpvb21GYWN0b3IgPD0gKDAuMjUgKiBjb25maWcud2lkdGgpIC8gZClcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSAoMC4yNSAqIGNvbmZpZy53aWR0aCkgLyBkO1xuICAgICAgICAgIHByLmFkZFpvb20oem9vbUZhY3RvciwgY2VudGVyKTtcblxuICAgICAgICAgIGNvbmZpZy51cGRhdGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge31cbiAgICAgICk7XG4gICAgICBkemgucmVnaXN0ZXJMaXN0ZW5lcnMoY29uZmlnLmNvbnRhaW5lckVsZW1lbnQpO1xuXG4gICAgICBjb25maWcuYWRkTGF5ZXIoXG4gICAgICAgIFwiZHJhd1wiLFxuICAgICAgICBsYXllcnMuQ2FudmFzKHtcbiAgICAgICAgICB1cGRhdGUoY29uZmlnLCBjdHgpIHtcbiAgICAgICAgICAgIGZpeFRyWm9vbSgpO1xuICAgICAgICAgICAgbGV0IHIgPSBuZXcgcmVuZGVyLkNhbnZhcyhjdHgpO1xuXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCk7XG5cbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxLjI1O1xuICAgICAgICAgICAgZHJhd0NhcnRoZXNpYW4yREF4aXMociwgcHIpO1xuXG4gICAgICAgICAgICBsZXQgZnMgPSAxMDtcbiAgICAgICAgICAgIHIuZm9udFNpemUgPSBmcztcbiAgICAgICAgICAgIGxldCBRID0gYmVzdFEocHIuc2NhbGUsIGZzKTtcblxuICAgICAgICAgICAgLy8gRmluZCBzbWFsbGVzdCBhbmQgbGFyZ2VzdCB2YWx1ZSBvbiBzY3JlZW5cbiAgICAgICAgICAgIGxldCBtaW4gPSBNYXRoLm1heCgtcHIub3JpZ2luWzBdIC8gcHIuc2NhbGUsIDAuMDAwMDAwMDAwMDEpO1xuICAgICAgICAgICAgbGV0IG1heCA9IE1hdGgubWluKFxuICAgICAgICAgICAgICAoci53aWR0aCAtIHByLm9yaWdpblswXSkgLyBwci5zY2FsZSxcbiAgICAgICAgICAgICAgMC45OTk5OTk5OTk5OVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gRmluZCBiaWdnZXN0IGZyYWN0aW9uIG5vdCB5ZXQgb24gc2NyZWVuXG4gICAgICAgICAgICBsZXQgW2EsIGIsIGMsIGRdID0gYmVzdEZyYWNzRm9yKFEsIG1pbik7XG5cbiAgICAgICAgICAgIC8vIEZpbmQgYWxsIGZyYWNpb25zIG9uIHNjcmVlblxuICAgICAgICAgICAgbGV0IHNwciA9IGZhcmV5SXRlcihyLCBbYSwgYiwgYywgZF0sIFEsIG1heCk7XG4gICAgICAgICAgICBzcHIucHVzaCh7IHNwcml0ZTogVGV4dFNwcml0ZShyLCBcIjFcIiwgeyBjZW50ZXI6IHRydWUgfSksIGF0OiAxIH0pO1xuICAgICAgICAgICAgZm9yIChsZXQgbyBvZiBzcHIpIHtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYW5ub3RhdGUgRnJhY3Rpb25zXG4gICAgICAgICAgICBhbm5vdGF0ZUNhcnRoZXNpYW4yREF4aXMociwgXCJ4XCIsIHByLCBzcHIpO1xuXG4gICAgICAgICAgICAvLyBEcmF3IHRleHRib3hcbiAgICAgICAgICAgIGxldCB0cyA9IFRleHRTcHJpdGUociwgXCJGcmFjdGlvbnMgd2l0aCBkZW5vbWluYXRvciB1cCB0byBcIiArIFEpO1xuICAgICAgICAgICAgci5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHIucmVjdChcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgci5oZWlnaHQsXG4gICAgICAgICAgICAgIHRzLmxlZnQgKyB0cy5yaWdodCArIDIwLFxuICAgICAgICAgICAgICAtTWF0aC5yb3VuZCh0cy5ib3QgKyB0cy50b3AgKyAxMClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByLmZpbGxTdHlsZSA9IFwiI0ZGRkZGRlwiO1xuICAgICAgICAgICAgci5maWxsKCk7XG4gICAgICAgICAgICByLnN0cm9rZSgpO1xuICAgICAgICAgICAgci5maWxsU3R5bGUgPSBcIiMwMDAwMDBcIjtcbiAgICAgICAgICAgIHRzLmRyYXcociwgdHMubGVmdCArIDEwLCByLmhlaWdodCAtIHRzLmJvdCAtIDUpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sXG4gIH0pXG4pO1xuXG5mdW5jdGlvbiBiZXN0UShzY2FsZTogbnVtYmVyLCBmczogbnVtYmVyKSB7XG4gIGxldCBRID0gMDtcbiAgbGV0IFAgPSAxO1xuICBsZXQgUDIgPSAwO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGlmIChzY2FsZSAvICgoUSArIFApICogKFEgKyBQIC0gMSkpIDwgMC43NSAqICgxICsgTWF0aC5sb2cxMChRICsgUCkpICogZnMpIHtcbiAgICAgIGlmIChQMiA9PSAwKSByZXR1cm4gUTtcbiAgICAgIFEgPSBRICsgUDI7XG4gICAgICBQID0gMTtcbiAgICAgIFAyID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgUDIgPSBQO1xuICAgICAgUCA9IFAgKiAyO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnY2QoYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgYSA9IE1hdGguYWJzKGEpO1xuICBiID0gTWF0aC5hYnMoYik7XG4gIGlmIChiID4gYSkge1xuICAgIGxldCB0ZW1wID0gYTtcbiAgICBhID0gYjtcbiAgICBiID0gdGVtcDtcbiAgfVxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGlmIChiID09IDApIHJldHVybiBhO1xuICAgIGEgJT0gYjtcbiAgICBpZiAoYSA9PSAwKSByZXR1cm4gYjtcbiAgICBiICU9IGE7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdmFsdWUgJHYkIGhhcyB0byBiZSBiZXR3ZWVuIDAgYW5kIDE7XG4gKlxuICogQ2hvb3NlcyAkXFxmcmFje2FeK317Yl4rfSA9IFxcZnJhY3thICsgZV8xIGN9e2IgKyBlXzEgZH0gPD0gdiQgd2l0aCAkYiArIGVfMSBkIDw9IFEkIGluIHRoZSBmaXJzdCxcbiAqIGFuZCAkXFxmcmFje2NeK317ZF4rfSA9IFxcZnJhY3tlXzIgYV4rICsgY317IGVfMiBiXisgKyBkfSA+PSB2JCB3aXRoICRlXzIgYiArIGQgPD0gUSQuXG4gKiBUaGUgZmluYWwgZnJhY3Rpb25zIHdpbGwgYmUgY29uc2VjdXRpdmUgZWxlbWVudHMgaW4gdGhlIEZhcmV5IHNlcXVlbmNlLlxuICovXG5mdW5jdGlvbiBiZXN0RnJhY3NGb3IoUTogbnVtYmVyLCB2OiBudW1iZXIpIHtcbiAgLy8gRW5zdXJlIHYgaW4gWzAsMSlcbiAgbGV0IHZfaW50ID0gTWF0aC5mbG9vcih2KTtcbiAgdiA9IHYgLSB2X2ludDtcbiAgbGV0IGEgPSAwLFxuICAgIGIgPSAxLFxuICAgIGMgPSAxLFxuICAgIGQgPSAxO1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgbGV0IF90bXAgPSBjIC0gdiAqIGQ7IC8vIFRlbXBvcmFyeSBkZW5vbWluYXRvciBmb3IgMCBjaGVja1xuXG4gICAgLy8gQmF0Y2ggZTEgc3RlcHMgaW4gZGlyZWN0aW9uIGMvZFxuICAgIGxldCBlMTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGlmIChfdG1wICE9IDApIGUxID0gTWF0aC5mbG9vcigodiAqIGIgLSBhKSAvIF90bXApO1xuICAgIGlmIChlMSA9PT0gdW5kZWZpbmVkIHx8IGIgKyBlMSAqIGQgPiBRKSBlMSA9IE1hdGguZmxvb3IoKFEgLSBiKSAvIGQpO1xuXG4gICAgYSA9IGEgKyBlMSAqIGM7XG4gICAgYiA9IGIgKyBlMSAqIGQ7XG5cbiAgICBfdG1wID0gYiAqIHYgLSBhOyAvLyBUZW1wb3JhcnkgZGVub21pbmF0b3IgZm9yIDAgY2hlY2tcblxuICAgIC8vIEJhdGNoIGUyIHN0ZXBzIGluIGRpcmVjdGlvbiBhL2JcbiAgICBsZXQgZTI6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBpZiAoX3RtcCAhPSAwKSBlMiA9IE1hdGguZmxvb3IoKGMgLSB2ICogZCkgLyBfdG1wKTtcbiAgICBpZiAoZTIgPT09IHVuZGVmaW5lZCB8fCBiICogZTIgKyBkID4gUSkgZTIgPSBNYXRoLmZsb29yKChRIC0gZCkgLyBiKTtcblxuICAgIGMgPSBhICogZTIgKyBjO1xuICAgIGQgPSBiICogZTIgKyBkO1xuXG4gICAgLy8gSWYgYm90aCBzdGVwcyBkbyBub3RoaW5nIHdlIGFyZSBkb25lXG4gICAgaWYgKGUxID09IDAgJiYgZTIgPT0gMCkgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gW2EsIGIsIGMsIGRdO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gc3RhcnQgVHdvIGNvbnNlY3V0aXZlIGVsZW1lbnRzIGluIHRoZSBzZXF1ZW5jZS5cbiAqIEBwYXJhbSBRIFRoZSBtYXhpbXVtIGRlbm9taW5hdG9yXG4gKiBAcGFyYW0gbWF4IFRoZSBtYXhpbXVtIGZyYWN0aW9uIHZhbHVlLlxuICovXG5mdW5jdGlvbiBmYXJleUl0ZXIoXG4gIGN0eDogcmVuZGVyLk1lYXN1cmVUZXh0LFxuICBzdGFydDogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gIFE6IG51bWJlcixcbiAgbWF4OiBudW1iZXJcbikge1xuICBsZXQgc3ByaXRlczogeyBzcHJpdGU6IEJCU3ByaXRlOyBhdDogbnVtYmVyIH1bXSA9IFtdO1xuICBsZXQgW2EsIGIsIGMsIGRdID0gc3RhcnQ7XG4gIHdoaWxlIChjIDwgbWF4ICogZCkge1xuICAgIGxldCBrID0gTWF0aC5mbG9vcigoUSArIGIpIC8gZCk7XG4gICAgW2EsIGIsIGMsIGRdID0gW2MsIGQsIGsgKiBjIC0gYSwgayAqIGQgLSBiXTtcbiAgICBzcHJpdGVzLnB1c2goe1xuICAgICAgc3ByaXRlOiBGcmFjU3ByaXRlKFRleHRTcHJpdGUoY3R4LCBcIlwiICsgYSksIFRleHRTcHJpdGUoY3R4LCBcIlwiICsgYikpLFxuICAgICAgYXQ6IGEgLyBiLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBzcHJpdGVzO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogImtPQWtHQSxXQUlFLEVBQU8sRUFBTSxFQUFxQixFQUEyQyxnQ0F0Ry9FLFFBdUdFLFlBQWlCLElBQ2pCLEdBQUksR0FBeUIsRUFBYSxTQUUxQyxLQUFjLFFBQWQsZ0JBR0EsR0FBSSxHQUFNLEVBQUUsTUFBTSxFQUFJLEdBQ2xCLEVBQUksRUFBSSxPQUNaLEtBQU8sQ0FBQyxFQUFFLE1BQ1IsQUFBSSxFQUFjLGVBQWUsTUFBTSxHQUFjLFNBQ3JELEVBQUksRUFBSSxPQUdWLFdBQWMsT0FBZCxnQkFDTyxFQUFFLFFBR0osV0FJTCxFQUFPLEVBQU0sRUFBd0IsQ0FFckMsR0FBSSxHQUFNLEVBQUUsTUFBTSxFQUFJLEdBQ2xCLEVBQUksRUFBSSxPQUNaLEtBQU8sQ0FBQyxFQUFFLE1BQU0sRUFBSSxFQUFJLE9BQ3hCLE1BQU8sR0FBRSxNQUdKLEdBQU0sSUFBc0MsQ0FDakQsT0FBUSxJQUNDLEVBQ0ws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
